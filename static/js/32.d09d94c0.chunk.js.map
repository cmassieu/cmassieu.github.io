{"version":3,"sources":["../node_modules/codemirror/mode/markdown/markdown.js","../node_modules/codemirror/mode/xml/xml.js","../node_modules/codemirror/addon/mode/overlay.js","../node_modules/react-simplemde-editor/lib/index.js","../node_modules/easymde/src/js/easymde.js","../node_modules/codemirror/addon/edit/continuelist.js","../node_modules/easymde/src/js/codemirror/tablist.js","../node_modules/codemirror/addon/display/fullscreen.js","../node_modules/codemirror/mode/meta.js","../node_modules/codemirror/addon/display/placeholder.js","../node_modules/codemirror/addon/selection/mark-selection.js","../node_modules/codemirror/addon/search/searchcursor.js","../node_modules/codemirror/mode/gfm/gfm.js","../node_modules/codemirror-spell-checker/src/js/spell-checker.js","../node_modules/typo-js/typo.js","../node_modules/marked/lib/marked.js","../node_modules/classnames/index.js","../node_modules/reactstrap/es/utils.js","../node_modules/reactstrap/es/Breadcrumb.js","../node_modules/reactstrap/es/BreadcrumbItem.js","../node_modules/reactstrap/es/Row.js","../node_modules/reactstrap/es/Col.js","../node_modules/reactstrap/es/Card.js","../node_modules/reactstrap/es/CardBody.js","../node_modules/codemirror/lib/codemirror.js"],"names":["CodeMirror","defineMode","cmCfg","modeCfg","htmlMode","getMode","htmlModeMissing","name","undefined","highlightFormatting","maxBlockquoteDepth","taskLists","strikethrough","emoji","fencedCodeBlockHighlighting","xml","tokenTypeOverrides","tokenTypes","header","code","quote","list1","list2","list3","hr","image","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","em","strong","tokenType","hasOwnProperty","hrRE","listRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","punctuation","switchInline","stream","state","f","inline","switchBlock","block","blankLine","linkTitle","indentedCode","htmlBlock","exit","inner","innerMode","htmlState","mode","tagStart","context","tokenize","isInText","inlineNormal","blockNormal","trailingSpace","trailingSpaceNewLine","prevLine","thisLine","line","firstTokenOnLine","column","indentation","prevLineLineIsEmpty","test","string","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","list","maxNonCodeIndentation","listStack","length","lineIndentation","indentationDiff","pop","allowsInlineContinuation","fencedCodeEnd","isHr","match","skipToEnd","eatSpace","getType","eat","setext","listType","current","push","taskList","fencedEndRE","RegExp","localMode","findModeByName","found","mime","mimes","localState","startState","local","lookAhead","charAt","peek","footnoteLink","style","token","md_inside","indexOf","returnType","currListInd","hasExitedList","maxFencedEndInd","styles","i","taskOpen","join","taskClosed","listMod","handleText","text","ch","next","matchCh","regex","replace","previousFormatting","eatWhile","count","t","type","formattingEscape","end","pos","atts","substring","start","backUp","len","before","after","leftFlanking","rightFlanking","setEm","setStrong","retType","endChar","returnState","linkRE","footnoteLinkInside","footnoteUrl","copyState","s","slice","indent","textAfter","Pass","blockCommentStart","blockCommentEnd","closeBrackets","fold","defineMIME","mod","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","indentUnit","config","defaults","prop","inText","chain","parser","inBlock","doctype","depth","inTag","baseState","tagName","closure","eol","isInAttribute","inAttribute","stringStartCol","terminator","Context","startOfLine","this","prev","indented","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","baseIndent","sol","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","exec","grabbers","electricInput","configuration","helperType","skipAttribute","xmlCurrentTag","close","xmlCurrentContext","cx","reverse","mimeModes","overlayMode","base","overlay","combine","basePos","baseCur","overlayPos","overlayCur","streamSeen","Math","min","combineTokens","electricChars","baseToken","overlayToken","Object","defineProperty","exports","value","default","React","obj","__esModule","newObj","key","prototype","call","desc","getOwnPropertyDescriptor","get","set","_interopRequireWildcard","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","Symbol","iterator","done","err","_iterableToArrayLimit","TypeError","_nonIterableRest","_defineProperties","props","descriptor","enumerable","configurable","writable","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_id","generateId","concat","SimpleMDEEditor","_React$PureComponent","_this","instance","Constructor","_classCallCheck","keyChange","id","simpleMde","editorEl","editorToolbarEl","createEditor","SimpleMDE","initialOptions","element","document","getElementById","initialValue","allOptions","assign","options","eventWrapper","setState","onChange","removeEvents","removeEventListener","addEvents","elementWrapperRef","getElementsByClassName","addEventListener","codemirror","on","getCursor","_events","events","entries","forEach","_ref","_ref2","eventName","callback","getLineAndCursor","getDoc","getMdeInstance","addExtraKeys","extraKeys","setOption","setElementWrapperRef","protoProps","staticProps","subClass","superClass","create","constructor","_inherits","window","prevProps","_this$props","label","children","rest","createElement","ref","htmlFor","PureComponent","defaultProps","CodeMirrorSpellChecker","marked","isMac","navigator","platform","anchorToExternalRegex","bindings","toggleBold","toggleItalic","drawLink","toggleHeadingSmaller","toggleHeadingBigger","drawImage","toggleBlockquote","toggleOrderedList","toggleUnorderedList","toggleCodeBlock","togglePreview","toggleStrikethrough","toggleHeading1","toggleHeading2","toggleHeading3","cleanBlock","drawTable","drawHorizontalRule","undo","redo","toggleSideBySide","toggleFullScreen","shortcuts","getBindingName","isMobile","a","check","userAgent","vendor","opera","substr","fixShortcut","createToolbarButton","enableTooltips","el","className","setAttribute","action","title","actionName","tooltip","createTooltip","noDisable","classList","add","noMobile","classNameParts","split","iconClasses","classNameIndex","classNamePart","tabIndex","icon","iconClassIndex","iconClass","appendChild","createSep","innerHTML","getState","cm","stat","getTokenAt","data","types","ret","bold","getLine","italic","link","saved_overflow","editor","getOption","body","overflow","wrap","getWrapperElement","previousSibling","toolbarElements","fullscreen","toolbarButton","sidebyside","nextSibling","onToggleFullScreen","_toggleBlock","blockStyles","fenceCharsToInsert","fencing_line","token_state","code_type","line_num","firstTok","lastTok","getLineHandle","fencedChars","block_start","block_end","lineCount","cur_start","cur_end","tok","is_code","replaceRange","setSelection","focus","start_text","start_line","end_text","end_line","fence_chars","operation","search_from","next_line","next_line_last_tok","indentLine","no_sel_and_starting_of_line","sel_multi","start_line_sel","end_line_sel","repl_start","repl_end","_replaceSelection","insertFencingAtSelection","_toggleLine","_toggleHeading","lastChild","startPoint","endPoint","_cleanBlock","url","promptURLs","prompt","promptTexts","insertTexts","afterImageUploaded","imageName","lastIndexOf","uploadedImage","updateStatusBar","imageTexts","sbOnUploaded","setTimeout","sbInit","table","horizontalRule","wrapper","preview","useSideBySideListener","previewNormal","toolbar","toolbar_div","sideBySideRenderingFunction","newValue","previewRender","off","refresh","previewClass","active","startEnd","getSelection","replaceSelection","direction","size","currHeadingLevel","search","listRegexp","whitespacesRegexp","repl","_toggle","untoggleOnly","char","_getChar","rt","_checkChar","start_chars","end_chars","humanFileSize","bytes","units","abs","u","toFixed","_mergeProperties","property","extend","arguments","wordCount","m","charCodeAt","toolbarBuiltInButtons","openBrowseFileWindow","sbOnDragEnter","sbOnDrop","sbProgress","sizeUnits","errorMessages","noFileGiven","typeNotAllowed","fileTooLarge","importError","EasyMDE","parent","autoDownloadFA","autoDownloadFontAwesome","styleSheets","href","rel","getElementsByTagName","console","log","showIcons","status","uploadImage","unshift","plainText","markdown","parsingConfig","minHeight","errorCallback","errorMessage","alert","imageMaxSize","imageAccept","autosave","unique_id","uniqueId","render","foundSavedValue","event","stopPropagation","preventDefault","imageUploadFunction","uploadImagesUsingCustomFunction","dataTransfer","files","uploadImages","clipboardData","isLocalStorageAvailable","localStorage","setItem","removeItem","e","onSuccess","onError","names","uploadImageUsingCustomFunction","itemName","content","matchingClasses","gui","statusbar","textContent","markedOptions","renderingConfig","singleLineBreaks","breaks","codeSyntaxHighlighting","hljs","highlight","highlightAuto","setOptions","htmlText","linkString","fixedLinkString","addAnchorTargetBlank","_rendered","backdrop","keyMaps","open","keyCode","spellChecker","gitHubSpice","codeMirrorInstance","fromTextArea","theme","tabSize","indentWithTabs","lineNumbers","autofocus","lineWrapping","allowDropFileTypes","placeholder","getAttribute","styleSelectedText","configureMouse","repeat","addNew","getScrollerElement","forceSync","save","createToolbar","createStatusbar","enabled","sideBySide","createSideBySide","temp_cm","bind","easyMDE","binded","form","clearTimeout","autosaveTimeoutId","delay","loaded","getItem","setValue","d","Date","hh","getHours","getMinutes","dd","h","clearAutosavedValue","imageInput","click","file","onErrorSup","fillErrorMessage","imageUrl","formData","FormData","append","imageCSRFToken","request","XMLHttpRequest","upload","onprogress","lengthComputable","progress","round","total","imageUploadEndpoint","onload","response","JSON","parse","responseText","error","filePath","location","origin","statusText","onerror","send","filledErrorMessage","parentNode","insertBefore","syncSideBySidePreviewScroll","cScroll","pScroll","v","height","getScrollInfo","clientHeight","ratio","parseFloat","top","move","scrollHeight","scrollTop","onscroll","scrollTo","items","bar","toolbarData","toolbarGuideIcon","hideIcons","nonSeparatorIconsFollow","x","item","toolbarTips","onclick","multiple","accept","display","opacity","cmWrapper","onUpdate","defaultValue","getValue","val","isPreviewActive","isSideBySideActive","isFullscreenActive","toTextArea","removeChild","module","emptyListRE","unorderedListRE","incrementRemainingMarkdownListNumbers","startLine","skipCount","startItem","startIndent","nextLineNumber","nextLine","nextItem","nextIndent","newNumber","parseInt","nextNumber","itemNumber","isNaN","commands","newlineAndIndentContinueMarkdownList","ranges","listSelections","replacements","head","eolState","getStateAfter","execCommand","inList","inQuote","cursorBeforeBullet","empty","numbered","bullet","replaceSelections","tabAndIndentMarkdownList","spaces","shiftTabAndUnindentMarkdownList","defineOption","old","Init","fullScreenRestore","pageYOffset","scrollLeft","pageXOffset","width","documentElement","setFullscreen","info","setNormal","modeInfo","ext","alias","findModeByMIME","toLowerCase","j","findModeByExtension","findModeByFileName","filename","dot","clearPlaceholder","setPlaceholder","elt","cssText","placeHolder","createTextNode","lineSpace","firstChild","onBlur","isEmpty","hasFocus","onCursorActivity","markedSelection","somethingSelected","clear","reset","from","to","array","coverRange","coverStart","find","coverEnd","CHUNK_SIZE","cmp","shift","update","markedSelectionStyle","Pos","cmpPos","addAt","cls","endLine","atEnd","mark","markText","splice","doFold","noFold","ensureFlags","regexp","flags","ignoreCase","global","multiline","regexpFlags","searchRegexpForward","doc","last","lastLine","lastIndex","index","searchRegexpForwardMultiline","maybeMultiline","chunk","curLine","inside","startCh","lastMatchIn","cutOff","newMatch","searchRegexpBackward","first","firstLine","searchRegexpBackwardMultiline","adjustPos","orig","folded","foldFunc","max","mid","searchStringForward","query","lines","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","clipPos","matches","String","normalize","str","findNext","findPrevious","result","newText","splitLines","defineExtension","defineDocExtension","cur","getSearchCursor","anchor","setSelections","urlRE","modeConfig","codeDepth","gfmOverlay","codeBlock","ateSpace","difference","markdownConfig","attr","Typo","includes","apply","aff_loading","xhr_aff","readyState","aff_data","num_loaded","typo","dic_data","dic_loading","xhr_dic","rx_word","word","dictionary","affData","wordsData","settings","rules","dictionaryTable","compoundRules","compoundRuleCodes","replacementTable","memoized","path","_len","_jlen","readDataFile","setFunc","_readFile","asyncLoad","then","setAffData","setup","setWordsData","_parseAFF","rule","ONLYINCOMPOUND","_parseDIC","ruleText","expressionText","character","loadedCallback","chrome","extension","dictionaryPath","getURL","__dirname","load","charset","async","promise","req","Promise","resolve","reject","overrideMimeType","fs","existsSync","stats","statSync","fileDescriptor","openSync","buffer","Buffer","readSync","toString","numEntries","lineParts","_removeAffixComments","definitionParts","ruleType","ruleCode","combineable","charactersToRemove","additionParts","charactersToAdd","continuationClasses","parseRuleCodes","regexToMatch","entry","remove","_removeDicComments","addWord","parts","ruleCodesArray","NEEDAFFIX","newWords","_applyRule","ii","_iilen","newWord","k","combineCode","combineRule","otherNewWords","iii","_iiilen","trim","textCodes","FLAG","continuationRule","aWord","trimmedWord","checkExact","toUpperCase","capitalizedWord","hasFlag","lowercaseWord","ruleCodes","COMPOUNDMIN","flag","wordFlags","alphabet","suggest","limit","memoizedLimit","replacementEntry","correctedWord","edits1","words","rv","ed1","ed2","corrections","known","weighted_corrections","sorted_corrections","sort","b","capitalization_scheme","correct","root","newline","fences","heading","blockquote","html","def","nptable","noop","lheading","_paragraph","Lexer","tokens","links","normal","pedantic","gfm","_label","_title","edit","getRegex","_tag","_comment","paragraph","merge","lex","src","loose","cap","bull","listStart","listItems","space","tag","l","isordered","istask","ischecked","lastToken","trimRight","codeBlockStyle","rtrim","lang","splitCells","align","cells","ordered","smartLists","task","checked","sanitize","pre","sanitizer","escape","Error","autolink","reflink","nolink","br","del","InlineLexer","renderer","Renderer","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","unescape","_","n","fromCharCode","opt","cleanUrl","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","output","prevCapZero","out","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","random","infostring","escaped","langPrefix","level","raw","headerIds","headerPrefix","slug","xhtml","listitem","checkbox","tablerow","tablecell","baseUrl","inlineText","parseText","row","cell","errMsg","silent","originalSlug","tableRow","offset","curr","c","invert","suffLen","currChar","checkSanitizeDeprecation","warn","pending","message","getDefaults","lexer","inlineLexer","hasOwn","classNames","classes","arg","argType","globalCssModule","getScrollbarWidth","scrollDiv","position","scrollbarWidth","offsetWidth","clientWidth","setScrollbarWidth","padding","paddingRight","isBodyOverflowing","innerWidth","getOriginalBodyPadding","getComputedStyle","getPropertyValue","conditionallyUpdateScrollbar","fixedContent","querySelectorAll","bodyPadding","setGlobalCssModule","cssModule","mapToCssModules","map","omit","omitKeys","pick","pickKeys","warned","warnOnce","deprecated","propType","explanation","propName","componentName","_key","Element","DOMElement","targetPropType","oneOfType","func","shape","any","tagPropType","$$typeof","symbol","arrayOf","TransitionTimeouts","Fade","Collapse","Modal","Carousel","TransitionPropTypeKeys","TransitionStatuses","ENTERING","ENTERED","EXITING","EXITED","keyCodes","esc","enter","tab","up","down","home","PopperPlacements","canUseDOM","isReactRefObj","getTag","toNumber","isObject","other","valueOf","isBinary","isFunction","findDOMElements","selection","isArrayOrNodeList","els","getTarget","allElements","defaultToggleEvents","addMultipleEventListeners","_els","handler","useCapture","focusableElements","propTypes","listTag","listClassName","object","node","Breadcrumb","Tag","ListTag","attributes","listClasses","bool","BreadcrumbItem","noGutters","Row","stringOrNumberProp","number","columnProps","order","xs","sm","md","lg","xl","widths","getColumnSizeClass","isXs","colWidth","colSize","Col","colClasses","columnProp","_classNames","colSizeInterfix","colClass","_colClass","inverse","color","outline","innerRef","Card","CardBody","gecko","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","presto","safari","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","range","rmClass","removeChildren","childNodes","removeChildrenAndAdd","eltP","contains","child","nodeType","host","activeElt","activeElement","shadowRoot","addClass","joinClasses","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","args","copyObj","overwrite","countColumn","startIndex","startValue","nextTab","selectionStart","selectionEnd","Delayed","time","onTimeout","ms","scrollerGap","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","nothing","createObj","inst","nonASCIISingleCaseWordChar","isWordCharBasic","isWordChar","helper","extendingChars","isExtendingChar","skipExtendingChars","dir","findFirst","pred","midF","ceil","floor","bidiOther","getBidiPartAt","sticky","bidiOrdering","lowTypes","arabicTypes","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","outerType","i$1","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","i$7","at","j$2","nstart","getOrder","noHandlers","emitter","attachEvent","map$$1","_handlers","getHandlers","detachEvent","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","nl","hasSelection","te","range$$1","ownerDocument","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","dependencies","resolveMode","spec","mfactory","modeObj","modeExtensions","exts","modeProps","prop$1","extendMode","properties","nstate","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","_lineAtHeight","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","equalCursorPos","copyPos","maxPos","minPos","clipLine","_clipPos","linelen","clipToLen","clipPosArray","skipTo","pattern","consume","caseInsensitive","cased","hideFirstChars","oracle","SavedContext","maxLookAhead","baseTokens","baseTokenPos","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlays","i_end","opaque","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","minindent","minline","lim","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","startAt","callBlankLine","readToken","copy","Token","takeToken","asArray","extractLineClasses","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","endCh","isInsert","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","found$1","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","splitSpaces","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","querySelector","defaultSpecialCharPlaceholder","startStyle","endStyle","css","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","built","background","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","gutterSpecs","gutterWidth","alignable","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","marginLeft","widgetHeight","parentStyle","gutters","eventInWidget","sizer","mover","paddingTop","offsetTop","paddingVert","paddingH","cachedPaddingH","currentStyle","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","curWidth","heights","rects","getClientRects","bottom","ensureLineHeights","place","nodeAndOffsetInLineMap","getUsefulRect","screen","logicalXDPI","deviceXDPI","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageScrollY","marginTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","getBidi","partPos","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","widgetHeight$$1","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","closestDist","endX","dist","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","clientX","clientY","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","primIndex","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","readOnly","selForContextMenu","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","checkedZeroWidth","minWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","_startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","_endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","anchorNode","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","updateLine","linesFor","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","shared","attachDoc","setDirectionClass","History","startGen","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","_replaceRange","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","_markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","lineSeparator","getRange","getLineNumber","getLineHandleVisualStart","setCursor","extendSelectionsBy","addSelection","getSelections","dup","newSel","hint","oldPrev","newPrev","computeReplacedSel","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","isReadOnly","FileReader","File","read","loadFile","reader","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","registerGlobalHandlers","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","keyMap","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","pcDefault","emacsy","macDefault","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","coordsChar","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","defaultTab","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","moveOnDrag","dragDrop","moved","dragEnd","mouseMove","dragStart","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","_top","onDragStart","inp","getField","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","curSpace","curSpaceString","indentString","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","disableInput","smartIndent","getModeAt","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","_findPosH","origDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","findNextLine","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","closing","extraLinebreak","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","newBreaks","getInputField","detach","attach","integer","defineOptions","helpers","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getLineTokens","getTokenTypeAt","getHelpers","help","_global","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","scrollToRange","interpret","startOperation","endOperation","swapDoc","phrase","phraseText","phrases","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","method","tabindex","realSubmit","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","addLegacyProps","version","factory"],"mappings":"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M,gBACN9C,KAAM,SACNowB,IAAK,CAAC,MACL,CACD3zB,KAAM,MACNqG,KAAM,aACN9C,KAAM,MACNowB,IAAK,CAAC,QACL,CACD3zB,KAAM,sBACNqG,KAAM,oBACN9C,KAAM,eACNowB,IAAK,CAAC,QACL,CACD3zB,KAAM,gBACNqG,KAAM,oBACN9C,KAAM,eACNowB,IAAK,CAAC,QACL,CACD3zB,KAAM,SACNqG,KAAM,gBACN9C,KAAM,SACNowB,IAAK,CAAC,QACL,CACD3zB,KAAM,QACNqG,KAAM,eACN9C,KAAM,OACL,CACDvD,KAAM,SACNqG,KAAM,gBACN9C,KAAM,SACNowB,IAAK,CAAC,WACL,CACD3zB,KAAM,MACNqG,KAAM,aACN9C,KAAM,OACL,CACDvD,KAAM,QACNqG,KAAM,eACN9C,KAAM,QACNowB,IAAK,CAAC,QAAS,MAAO,QACrB,CACD3zB,KAAM,UACNqG,KAAM,iBACN9C,KAAM,UACNowB,IAAK,CAAC,IAAK,MAAO,MAAO,MAAO,QAC/B,CACD3zB,KAAM,KACNqG,KAAM,gBACN9C,KAAM,SACNowB,IAAK,CAAC,MACNC,MAAO,CAAC,WACP,CACD5zB,KAAM,MACNqG,KAAM,aACN9C,KAAM,MACNowB,IAAK,CAAC,MACL,CACD3zB,KAAM,UACNqG,KAAM,iBACN9C,KAAM,UACNowB,IAAK,CAAC,YACL,CACD3zB,KAAM,2BACNqG,KAAM,aACN9C,KAAM,MACN4oB,KAAM,uCACL,CACDnsB,KAAM,KACNqG,KAAM,YACN9C,KAAM,KACNowB,IAAK,CAAC,OACL,CACD3zB,KAAM,SACNqG,KAAM,gBACN9C,KAAM,SACNowB,IAAK,CAAC,SAAU,UAChBxH,KAAM,iBACL,CACDnsB,KAAM,OACNqG,KAAM,cACN9C,KAAM,OACNowB,IAAK,CAAC,SACL,CACD3zB,KAAM,UACNqG,KAAM,iBACN9C,KAAM,UACNowB,IAAK,CAAC,OACL,CACD3zB,KAAM,qBACNqG,KAAM,0BACN9C,KAAM,mBACNowB,IAAK,CAAC,QACL,CACD3zB,KAAM,OACNqG,KAAM,cACN9C,KAAM,OACNo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","file":"static/js/32.d09d94c0.chunk.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"markdown\", function (cmCfg, modeCfg) {\n    var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n    var htmlModeMissing = htmlMode.name == \"null\";\n\n    function getMode(name) {\n      if (CodeMirror.findModeByName) {\n        var found = CodeMirror.findModeByName(name);\n        if (found) name = found.mime || found.mimes[0];\n      }\n\n      var mode = CodeMirror.getMode(cmCfg, name);\n      return mode.name == \"null\" ? null : mode;\n    } // Should characters that affect highlighting be highlighted separate?\n    // Does not include characters that will be output (such as `1.` and `-` for lists)\n\n\n    if (modeCfg.highlightFormatting === undefined) modeCfg.highlightFormatting = false; // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n    // Excess `>` will emit `error` token.\n\n    if (modeCfg.maxBlockquoteDepth === undefined) modeCfg.maxBlockquoteDepth = 0; // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n\n    if (modeCfg.taskLists === undefined) modeCfg.taskLists = false; // Turn on strikethrough syntax\n\n    if (modeCfg.strikethrough === undefined) modeCfg.strikethrough = false;\n    if (modeCfg.emoji === undefined) modeCfg.emoji = false;\n    if (modeCfg.fencedCodeBlockHighlighting === undefined) modeCfg.fencedCodeBlockHighlighting = true;\n    if (modeCfg.xml === undefined) modeCfg.xml = true; // Allow token types to be overridden by user-provided token types.\n\n    if (modeCfg.tokenTypeOverrides === undefined) modeCfg.tokenTypeOverrides = {};\n    var tokenTypes = {\n      header: \"header\",\n      code: \"comment\",\n      quote: \"quote\",\n      list1: \"variable-2\",\n      list2: \"variable-3\",\n      list3: \"keyword\",\n      hr: \"hr\",\n      image: \"image\",\n      imageAltText: \"image-alt-text\",\n      imageMarker: \"image-marker\",\n      formatting: \"formatting\",\n      linkInline: \"link\",\n      linkEmail: \"link\",\n      linkText: \"link\",\n      linkHref: \"string\",\n      em: \"em\",\n      strong: \"strong\",\n      strikethrough: \"strikethrough\",\n      emoji: \"builtin\"\n    };\n\n    for (var tokenType in tokenTypes) {\n      if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n        tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n      }\n    }\n\n    var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/,\n        listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/,\n        taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n    ,\n        atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/,\n        setextHeaderRE = /^ *(?:\\={1,}|-{1,})\\s*$/,\n        textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/,\n        fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w+#-]*)[^\\n`]*$/,\n        linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n    ,\n        punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/,\n        expandedTab = \"    \"; // CommonMark specifies tab as 4 spaces\n\n    function switchInline(stream, state, f) {\n      state.f = state.inline = f;\n      return f(stream, state);\n    }\n\n    function switchBlock(stream, state, f) {\n      state.f = state.block = f;\n      return f(stream, state);\n    }\n\n    function lineIsEmpty(line) {\n      return !line || !/\\S/.test(line.string);\n    } // Blocks\n\n\n    function blankLine(state) {\n      // Reset linkTitle state\n      state.linkTitle = false;\n      state.linkHref = false;\n      state.linkText = false; // Reset EM state\n\n      state.em = false; // Reset STRONG state\n\n      state.strong = false; // Reset strikethrough state\n\n      state.strikethrough = false; // Reset state.quote\n\n      state.quote = 0; // Reset state.indentedCode\n\n      state.indentedCode = false;\n\n      if (state.f == htmlBlock) {\n        var exit = htmlModeMissing;\n\n        if (!exit) {\n          var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n          exit = inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText;\n        }\n\n        if (exit) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      } // Reset state.trailingSpace\n\n\n      state.trailingSpace = 0;\n      state.trailingSpaceNewLine = false; // Mark this line as blank\n\n      state.prevLine = state.thisLine;\n      state.thisLine = {\n        stream: null\n      };\n      return null;\n    }\n\n    function blockNormal(stream, state) {\n      var firstTokenOnLine = stream.column() === state.indentation;\n      var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n      var prevLineIsIndentedCode = state.indentedCode;\n      var prevLineIsHr = state.prevLine.hr;\n      var prevLineIsList = state.list !== false;\n      var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n      state.indentedCode = false;\n      var lineIndentation = state.indentation; // compute once per line (on first token)\n\n      if (state.indentationDiff === null) {\n        state.indentationDiff = state.indentation;\n\n        if (prevLineIsList) {\n          state.list = null; // While this list item's marker's indentation is less than the deepest\n          //  list item's content's indentation,pop the deepest list item\n          //  indentation off the stack, and update block indentation state\n\n          while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n            state.listStack.pop();\n\n            if (state.listStack.length) {\n              state.indentation = state.listStack[state.listStack.length - 1]; // less than the first list's indent -> the line is no longer a list\n            } else {\n              state.list = false;\n            }\n          }\n\n          if (state.list !== false) {\n            state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1];\n          }\n        }\n      } // not comprehensive (currently only for setext detection purposes)\n\n\n      var allowsInlineContinuation = !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header && (!prevLineIsList || !prevLineIsIndentedCode) && !state.prevLine.fencedCodeEnd;\n      var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) && state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n      var match = null;\n\n      if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd || state.prevLine.header || prevLineLineIsEmpty)) {\n        stream.skipToEnd();\n        state.indentedCode = true;\n        return tokenTypes.code;\n      } else if (stream.eatSpace()) {\n        return null;\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n        state.quote = 0;\n        state.header = match[1].length;\n        state.thisLine.header = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        state.f = state.inline;\n        return getType(state);\n      } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n        state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n        if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n        stream.eatSpace();\n        return getType(state);\n      } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n        var listType = match[1] ? \"ol\" : \"ul\";\n        state.indentation = lineIndentation + stream.current().length;\n        state.list = true;\n        state.quote = 0; // Add this list item's content's indentation to the stack\n\n        state.listStack.push(state.indentation); // Reset inline styles which shouldn't propagate aross list items\n\n        state.em = false;\n        state.strong = false;\n        state.code = false;\n        state.strikethrough = false;\n\n        if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n          state.taskList = true;\n        }\n\n        state.f = state.inline;\n        if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n        return getType(state);\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n        state.quote = 0;\n        state.fencedEndRE = new RegExp(match[1] + \"+ *$\"); // try switching mode\n\n        state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2]);\n        if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n        state.f = state.block = local;\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        state.code = -1;\n        return getType(state); // SETEXT has lowest block-scope precedence after HR, so check it after\n        //  the others (code, blockquote, list...)\n      } else if ( // if setext set, indicates line after ---/===\n      state.setext || // line before ---/===\n      (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false && !state.code && !isHr && !linkDefRE.test(stream.string) && (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))) {\n        if (!state.setext) {\n          state.header = match[0].charAt(0) == '=' ? 1 : 2;\n          state.setext = state.header;\n        } else {\n          state.header = state.setext; // has no effect on type so we can reset it now\n\n          state.setext = 0;\n          stream.skipToEnd();\n          if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        }\n\n        state.thisLine.header = true;\n        state.f = state.inline;\n        return getType(state);\n      } else if (isHr) {\n        stream.skipToEnd();\n        state.hr = true;\n        state.thisLine.hr = true;\n        return tokenTypes.hr;\n      } else if (stream.peek() === '[') {\n        return switchInline(stream, state, footnoteLink);\n      }\n\n      return switchInline(stream, state, state.inline);\n    }\n\n    function htmlBlock(stream, state) {\n      var style = htmlMode.token(stream, state.htmlState);\n\n      if (!htmlModeMissing) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n\n        if (inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText || state.md_inside && stream.current().indexOf(\">\") > -1) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      }\n\n      return style;\n    }\n\n    function local(stream, state) {\n      var currListInd = state.listStack[state.listStack.length - 1] || 0;\n      var hasExitedList = state.indentation < currListInd;\n      var maxFencedEndInd = currListInd + 3;\n\n      if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        var returnType;\n        if (!hasExitedList) returnType = getType(state);\n        state.localMode = state.localState = null;\n        state.block = blockNormal;\n        state.f = inlineNormal;\n        state.fencedEndRE = null;\n        state.code = 0;\n        state.thisLine.fencedCodeEnd = true;\n        if (hasExitedList) return switchBlock(stream, state, state.block);\n        return returnType;\n      } else if (state.localMode) {\n        return state.localMode.token(stream, state.localState);\n      } else {\n        stream.skipToEnd();\n        return tokenTypes.code;\n      }\n    } // Inline\n\n\n    function getType(state) {\n      var styles = [];\n\n      if (state.formatting) {\n        styles.push(tokenTypes.formatting);\n        if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n        for (var i = 0; i < state.formatting.length; i++) {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n          if (state.formatting[i] === \"header\") {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n          } // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n          // Add `error` instead if the maximum blockquote nesting depth is passed\n\n\n          if (state.formatting[i] === \"quote\") {\n            if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n              styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n            } else {\n              styles.push(\"error\");\n            }\n          }\n        }\n      }\n\n      if (state.taskOpen) {\n        styles.push(\"meta\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.taskClosed) {\n        styles.push(\"property\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.linkHref) {\n        styles.push(tokenTypes.linkHref, \"url\");\n      } else {\n        // Only apply inline styles to non-url text\n        if (state.strong) {\n          styles.push(tokenTypes.strong);\n        }\n\n        if (state.em) {\n          styles.push(tokenTypes.em);\n        }\n\n        if (state.strikethrough) {\n          styles.push(tokenTypes.strikethrough);\n        }\n\n        if (state.emoji) {\n          styles.push(tokenTypes.emoji);\n        }\n\n        if (state.linkText) {\n          styles.push(tokenTypes.linkText);\n        }\n\n        if (state.code) {\n          styles.push(tokenTypes.code);\n        }\n\n        if (state.image) {\n          styles.push(tokenTypes.image);\n        }\n\n        if (state.imageAltText) {\n          styles.push(tokenTypes.imageAltText, \"link\");\n        }\n\n        if (state.imageMarker) {\n          styles.push(tokenTypes.imageMarker);\n        }\n      }\n\n      if (state.header) {\n        styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header);\n      }\n\n      if (state.quote) {\n        styles.push(tokenTypes.quote); // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n\n        if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n          styles.push(tokenTypes.quote + \"-\" + state.quote);\n        } else {\n          styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n        }\n      }\n\n      if (state.list !== false) {\n        var listMod = (state.listStack.length - 1) % 3;\n\n        if (!listMod) {\n          styles.push(tokenTypes.list1);\n        } else if (listMod === 1) {\n          styles.push(tokenTypes.list2);\n        } else {\n          styles.push(tokenTypes.list3);\n        }\n      }\n\n      if (state.trailingSpaceNewLine) {\n        styles.push(\"trailing-space-new-line\");\n      } else if (state.trailingSpace) {\n        styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n      }\n\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    function handleText(stream, state) {\n      if (stream.match(textRE, true)) {\n        return getType(state);\n      }\n\n      return undefined;\n    }\n\n    function inlineNormal(stream, state) {\n      var style = state.text(stream, state);\n      if (typeof style !== 'undefined') return style;\n\n      if (state.list) {\n        // List marker (*, +, -, 1., etc)\n        state.list = null;\n        return getType(state);\n      }\n\n      if (state.taskList) {\n        var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n        if (taskOpen) state.taskOpen = true;else state.taskClosed = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"task\";\n        state.taskList = false;\n        return getType(state);\n      }\n\n      state.taskOpen = false;\n      state.taskClosed = false;\n\n      if (state.header && stream.match(/^#+$/, true)) {\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        return getType(state);\n      }\n\n      var ch = stream.next(); // Matches link titles present on next line\n\n      if (state.linkTitle) {\n        state.linkTitle = false;\n        var matchCh = ch;\n\n        if (ch === '(') {\n          matchCh = ')';\n        }\n\n        matchCh = (matchCh + '').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n        var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n\n        if (stream.match(new RegExp(regex), true)) {\n          return tokenTypes.linkHref;\n        }\n      } // If this block is changed, it may need to be updated in GFM mode\n\n\n      if (ch === '`') {\n        var previousFormatting = state.formatting;\n        if (modeCfg.highlightFormatting) state.formatting = \"code\";\n        stream.eatWhile('`');\n        var count = stream.current().length;\n\n        if (state.code == 0 && (!state.quote || count == 1)) {\n          state.code = count;\n          return getType(state);\n        } else if (count == state.code) {\n          // Must be exact\n          var t = getType(state);\n          state.code = 0;\n          return t;\n        } else {\n          state.formatting = previousFormatting;\n          return getType(state);\n        }\n      } else if (state.code) {\n        return getType(state);\n      }\n\n      if (ch === '\\\\') {\n        stream.next();\n\n        if (modeCfg.highlightFormatting) {\n          var type = getType(state);\n          var formattingEscape = tokenTypes.formatting + \"-escape\";\n          return type ? type + \" \" + formattingEscape : formattingEscape;\n        }\n      }\n\n      if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n        state.imageMarker = true;\n        state.image = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n        state.imageMarker = false;\n        state.imageAltText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.imageAltText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        var type = getType(state);\n        state.imageAltText = false;\n        state.image = false;\n        state.inline = state.f = linkHref;\n        return type;\n      }\n\n      if (ch === '[' && !state.image) {\n        if (state.linkText && stream.match(/^.*?\\]/)) return getType(state);\n        state.linkText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.linkText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n        state.linkText = false;\n        state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal;\n        return type;\n      }\n\n      if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkEmail;\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n        var end = stream.string.indexOf(\">\", stream.pos);\n\n        if (end != -1) {\n          var atts = stream.string.substring(stream.start, end);\n          if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n        }\n\n        stream.backUp(1);\n        state.htmlState = CodeMirror.startState(htmlMode);\n        return switchBlock(stream, state, htmlBlock);\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n        state.md_inside = false;\n        return \"tag\";\n      } else if (ch === \"*\" || ch === \"_\") {\n        var len = 1,\n            before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2);\n\n        while (len < 3 && stream.eat(ch)) {\n          len++;\n        }\n\n        var after = stream.peek() || \" \"; // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n\n        var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before));\n        var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after));\n        var setEm = null,\n            setStrong = null;\n\n        if (len % 2) {\n          // Em\n          if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setEm = true;else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setEm = false;\n        }\n\n        if (len > 1) {\n          // Strong\n          if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setStrong = true;else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setStrong = false;\n        }\n\n        if (setStrong != null || setEm != null) {\n          if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\";\n          if (setEm === true) state.em = ch;\n          if (setStrong === true) state.strong = ch;\n          var t = getType(state);\n          if (setEm === false) state.em = false;\n          if (setStrong === false) state.strong = false;\n          return t;\n        }\n      } else if (ch === ' ') {\n        if (stream.eat('*') || stream.eat('_')) {\n          // Probably surrounded by spaces\n          if (stream.peek() === ' ') {\n            // Surrounded by spaces, ignore\n            return getType(state);\n          } else {\n            // Not surrounded by spaces, back up pointer\n            stream.backUp(1);\n          }\n        }\n      }\n\n      if (modeCfg.strikethrough) {\n        if (ch === '~' && stream.eatWhile(ch)) {\n          if (state.strikethrough) {\n            // Remove strikethrough\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            var t = getType(state);\n            state.strikethrough = false;\n            return t;\n          } else if (stream.match(/^[^\\s]/, false)) {\n            // Add strikethrough\n            state.strikethrough = true;\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            return getType(state);\n          }\n        } else if (ch === ' ') {\n          if (stream.match(/^~~/, true)) {\n            // Probably surrounded by space\n            if (stream.peek() === ' ') {\n              // Surrounded by spaces, ignore\n              return getType(state);\n            } else {\n              // Not surrounded by spaces, back up pointer\n              stream.backUp(2);\n            }\n          }\n        }\n      }\n\n      if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n        state.emoji = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n        var retType = getType(state);\n        state.emoji = false;\n        return retType;\n      }\n\n      if (ch === ' ') {\n        if (stream.match(/^ +$/, false)) {\n          state.trailingSpace++;\n        } else if (state.trailingSpace) {\n          state.trailingSpaceNewLine = true;\n        }\n      }\n\n      return getType(state);\n    }\n\n    function linkInline(stream, state) {\n      var ch = stream.next();\n\n      if (ch === \">\") {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      stream.match(/^[^>]+/, true);\n      return tokenTypes.linkInline;\n    }\n\n    function linkHref(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      }\n\n      var ch = stream.next();\n\n      if (ch === '(' || ch === '[') {\n        state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        state.linkHref = true;\n        return getType(state);\n      }\n\n      return 'error';\n    }\n\n    var linkRE = {\n      \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n      \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n    };\n\n    function getLinkHrefInside(endChar) {\n      return function (stream, state) {\n        var ch = stream.next();\n\n        if (ch === endChar) {\n          state.f = state.inline = inlineNormal;\n          if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n          var returnState = getType(state);\n          state.linkHref = false;\n          return returnState;\n        }\n\n        stream.match(linkRE[endChar]);\n        state.linkHref = true;\n        return getType(state);\n      };\n    }\n\n    function footnoteLink(stream, state) {\n      if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n        state.f = footnoteLinkInside;\n        stream.next(); // Consume [\n\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        state.linkText = true;\n        return getType(state);\n      }\n\n      return switchInline(stream, state, inlineNormal);\n    }\n\n    function footnoteLinkInside(stream, state) {\n      if (stream.match(/^\\]:/, true)) {\n        state.f = state.inline = footnoteUrl;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var returnType = getType(state);\n        state.linkText = false;\n        return returnType;\n      }\n\n      stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n      return tokenTypes.linkText;\n    }\n\n    function footnoteUrl(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      } // Match URL\n\n\n      stream.match(/^[^\\s]+/, true); // Check for link title\n\n      if (stream.peek() === undefined) {\n        // End of line, set flag to check next line\n        state.linkTitle = true;\n      } else {\n        // More content on line, check if link title\n        stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n      }\n\n      state.f = state.inline = inlineNormal;\n      return tokenTypes.linkHref + \" url\";\n    }\n\n    var mode = {\n      startState: function startState() {\n        return {\n          f: blockNormal,\n          prevLine: {\n            stream: null\n          },\n          thisLine: {\n            stream: null\n          },\n          block: blockNormal,\n          htmlState: null,\n          indentation: 0,\n          inline: inlineNormal,\n          text: handleText,\n          formatting: false,\n          linkText: false,\n          linkHref: false,\n          linkTitle: false,\n          code: 0,\n          em: false,\n          strong: false,\n          header: 0,\n          setext: 0,\n          hr: false,\n          taskList: false,\n          list: false,\n          listStack: [],\n          quote: 0,\n          trailingSpace: 0,\n          trailingSpaceNewLine: false,\n          strikethrough: false,\n          emoji: false,\n          fencedEndRE: null\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          f: s.f,\n          prevLine: s.prevLine,\n          thisLine: s.thisLine,\n          block: s.block,\n          htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n          indentation: s.indentation,\n          localMode: s.localMode,\n          localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n          inline: s.inline,\n          text: s.text,\n          formatting: false,\n          linkText: s.linkText,\n          linkTitle: s.linkTitle,\n          linkHref: s.linkHref,\n          code: s.code,\n          em: s.em,\n          strong: s.strong,\n          strikethrough: s.strikethrough,\n          emoji: s.emoji,\n          header: s.header,\n          setext: s.setext,\n          hr: s.hr,\n          taskList: s.taskList,\n          list: s.list,\n          listStack: s.listStack.slice(0),\n          quote: s.quote,\n          indentedCode: s.indentedCode,\n          trailingSpace: s.trailingSpace,\n          trailingSpaceNewLine: s.trailingSpaceNewLine,\n          md_inside: s.md_inside,\n          fencedEndRE: s.fencedEndRE\n        };\n      },\n      token: function token(stream, state) {\n        // Reset state.formatting\n        state.formatting = false;\n\n        if (stream != state.thisLine.stream) {\n          state.header = 0;\n          state.hr = false;\n\n          if (stream.match(/^\\s*$/, true)) {\n            blankLine(state);\n            return null;\n          }\n\n          state.prevLine = state.thisLine;\n          state.thisLine = {\n            stream: stream\n          }; // Reset state.taskList\n\n          state.taskList = false; // Reset state.trailingSpace\n\n          state.trailingSpace = 0;\n          state.trailingSpaceNewLine = false;\n\n          if (!state.localState) {\n            state.f = state.block;\n\n            if (state.f != htmlBlock) {\n              var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n              state.indentation = indentation;\n              state.indentationDiff = null;\n              if (indentation > 0) return null;\n            }\n          }\n        }\n\n        return state.f(stream, state);\n      },\n      innerMode: function innerMode(state) {\n        if (state.block == htmlBlock) return {\n          state: state.htmlState,\n          mode: htmlMode\n        };\n        if (state.localState) return {\n          state: state.localState,\n          mode: state.localMode\n        };\n        return {\n          state: state,\n          mode: mode\n        };\n      },\n      indent: function indent(state, textAfter, line) {\n        if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line);\n        if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);\n        return CodeMirror.Pass;\n      },\n      blankLine: blankLine,\n      getType: getType,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      closeBrackets: \"()[]{}''\\\"\\\"``\",\n      fold: \"markdown\"\n    };\n    return mode;\n  }, \"xml\");\n  CodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n  CodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var htmlConfig = {\n    autoSelfClosers: {\n      'area': true,\n      'base': true,\n      'br': true,\n      'col': true,\n      'command': true,\n      'embed': true,\n      'frame': true,\n      'hr': true,\n      'img': true,\n      'input': true,\n      'keygen': true,\n      'link': true,\n      'meta': true,\n      'param': true,\n      'source': true,\n      'track': true,\n      'wbr': true,\n      'menuitem': true\n    },\n    implicitlyClosed: {\n      'dd': true,\n      'li': true,\n      'optgroup': true,\n      'option': true,\n      'p': true,\n      'rp': true,\n      'rt': true,\n      'tbody': true,\n      'td': true,\n      'tfoot': true,\n      'th': true,\n      'tr': true\n    },\n    contextGrabbers: {\n      'dd': {\n        'dd': true,\n        'dt': true\n      },\n      'dt': {\n        'dd': true,\n        'dt': true\n      },\n      'li': {\n        'li': true\n      },\n      'option': {\n        'option': true,\n        'optgroup': true\n      },\n      'optgroup': {\n        'optgroup': true\n      },\n      'p': {\n        'address': true,\n        'article': true,\n        'aside': true,\n        'blockquote': true,\n        'dir': true,\n        'div': true,\n        'dl': true,\n        'fieldset': true,\n        'footer': true,\n        'form': true,\n        'h1': true,\n        'h2': true,\n        'h3': true,\n        'h4': true,\n        'h5': true,\n        'h6': true,\n        'header': true,\n        'hgroup': true,\n        'hr': true,\n        'menu': true,\n        'nav': true,\n        'ol': true,\n        'p': true,\n        'pre': true,\n        'section': true,\n        'table': true,\n        'ul': true\n      },\n      'rp': {\n        'rp': true,\n        'rt': true\n      },\n      'rt': {\n        'rp': true,\n        'rt': true\n      },\n      'tbody': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'td': {\n        'td': true,\n        'th': true\n      },\n      'tfoot': {\n        'tbody': true\n      },\n      'th': {\n        'td': true,\n        'th': true\n      },\n      'thead': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'tr': {\n        'tr': true\n      }\n    },\n    doNotIndent: {\n      \"pre\": true\n    },\n    allowUnquoted: true,\n    allowMissing: true,\n    caseFold: true\n  };\n  var xmlConfig = {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false,\n    allowMissingTagName: false,\n    caseFold: false\n  };\n  CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n    var indentUnit = editorConf.indentUnit;\n    var config = {};\n    var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n\n    for (var prop in defaults) {\n      config[prop] = defaults[prop];\n    }\n\n    for (var prop in config_) {\n      config[prop] = config_[prop];\n    } // Return variables for tokenizers\n\n\n    var type, setStyle;\n\n    function inText(stream, state) {\n      function chain(parser) {\n        state.tokenize = parser;\n        return parser(stream, state);\n      }\n\n      var ch = stream.next();\n\n      if (ch == \"<\") {\n        if (stream.eat(\"!\")) {\n          if (stream.eat(\"[\")) {\n            if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n          } else if (stream.match(\"--\")) {\n            return chain(inBlock(\"comment\", \"-->\"));\n          } else if (stream.match(\"DOCTYPE\", true, true)) {\n            stream.eatWhile(/[\\w\\._\\-]/);\n            return chain(doctype(1));\n          } else {\n            return null;\n          }\n        } else if (stream.eat(\"?\")) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          state.tokenize = inBlock(\"meta\", \"?>\");\n          return \"meta\";\n        } else {\n          type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n          state.tokenize = inTag;\n          return \"tag bracket\";\n        }\n      } else if (ch == \"&\") {\n        var ok;\n\n        if (stream.eat(\"#\")) {\n          if (stream.eat(\"x\")) {\n            ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n          } else {\n            ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n          }\n        } else {\n          ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n        }\n\n        return ok ? \"atom\" : \"error\";\n      } else {\n        stream.eatWhile(/[^&<]/);\n        return null;\n      }\n    }\n\n    inText.isInText = true;\n\n    function inTag(stream, state) {\n      var ch = stream.next();\n\n      if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n        state.tokenize = inText;\n        type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n        return \"tag bracket\";\n      } else if (ch == \"=\") {\n        type = \"equals\";\n        return null;\n      } else if (ch == \"<\") {\n        state.tokenize = inText;\n        state.state = baseState;\n        state.tagName = state.tagStart = null;\n        var next = state.tokenize(stream, state);\n        return next ? next + \" tag error\" : \"tag error\";\n      } else if (/[\\'\\\"]/.test(ch)) {\n        state.tokenize = inAttribute(ch);\n        state.stringStartCol = stream.column();\n        return state.tokenize(stream, state);\n      } else {\n        stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n        return \"word\";\n      }\n    }\n\n    function inAttribute(quote) {\n      var closure = function closure(stream, state) {\n        while (!stream.eol()) {\n          if (stream.next() == quote) {\n            state.tokenize = inTag;\n            break;\n          }\n        }\n\n        return \"string\";\n      };\n\n      closure.isInAttribute = true;\n      return closure;\n    }\n\n    function inBlock(style, terminator) {\n      return function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.match(terminator)) {\n            state.tokenize = inText;\n            break;\n          }\n\n          stream.next();\n        }\n\n        return style;\n      };\n    }\n\n    function doctype(depth) {\n      return function (stream, state) {\n        var ch;\n\n        while ((ch = stream.next()) != null) {\n          if (ch == \"<\") {\n            state.tokenize = doctype(depth + 1);\n            return state.tokenize(stream, state);\n          } else if (ch == \">\") {\n            if (depth == 1) {\n              state.tokenize = inText;\n              break;\n            } else {\n              state.tokenize = doctype(depth - 1);\n              return state.tokenize(stream, state);\n            }\n          }\n        }\n\n        return \"meta\";\n      };\n    }\n\n    function Context(state, tagName, startOfLine) {\n      this.prev = state.context;\n      this.tagName = tagName;\n      this.indent = state.indented;\n      this.startOfLine = startOfLine;\n      if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n    }\n\n    function popContext(state) {\n      if (state.context) state.context = state.context.prev;\n    }\n\n    function maybePopContext(state, nextTagName) {\n      var parentTagName;\n\n      while (true) {\n        if (!state.context) {\n          return;\n        }\n\n        parentTagName = state.context.tagName;\n\n        if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n          return;\n        }\n\n        popContext(state);\n      }\n    }\n\n    function baseState(type, stream, state) {\n      if (type == \"openTag\") {\n        state.tagStart = stream.column();\n        return tagNameState;\n      } else if (type == \"closeTag\") {\n        return closeTagNameState;\n      } else {\n        return baseState;\n      }\n    }\n\n    function tagNameState(type, stream, state) {\n      if (type == \"word\") {\n        state.tagName = stream.current();\n        setStyle = \"tag\";\n        return attrState;\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return attrState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return tagNameState;\n      }\n    }\n\n    function closeTagNameState(type, stream, state) {\n      if (type == \"word\") {\n        var tagName = stream.current();\n        if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n\n        if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n          setStyle = \"tag\";\n          return closeState;\n        } else {\n          setStyle = \"tag error\";\n          return closeStateErr;\n        }\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return closeState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return closeStateErr;\n      }\n    }\n\n    function closeState(type, _stream, state) {\n      if (type != \"endTag\") {\n        setStyle = \"error\";\n        return closeState;\n      }\n\n      popContext(state);\n      return baseState;\n    }\n\n    function closeStateErr(type, stream, state) {\n      setStyle = \"error\";\n      return closeState(type, stream, state);\n    }\n\n    function attrState(type, _stream, state) {\n      if (type == \"word\") {\n        setStyle = \"attribute\";\n        return attrEqState;\n      } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n        var tagName = state.tagName,\n            tagStart = state.tagStart;\n        state.tagName = state.tagStart = null;\n\n        if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n          maybePopContext(state, tagName);\n        } else {\n          maybePopContext(state, tagName);\n          state.context = new Context(state, tagName, tagStart == state.indented);\n        }\n\n        return baseState;\n      }\n\n      setStyle = \"error\";\n      return attrState;\n    }\n\n    function attrEqState(type, stream, state) {\n      if (type == \"equals\") return attrValueState;\n      if (!config.allowMissing) setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrValueState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n\n      if (type == \"word\" && config.allowUnquoted) {\n        setStyle = \"string\";\n        return attrState;\n      }\n\n      setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrContinuedState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n      return attrState(type, stream, state);\n    }\n\n    return {\n      startState: function startState(baseIndent) {\n        var state = {\n          tokenize: inText,\n          state: baseState,\n          indented: baseIndent || 0,\n          tagName: null,\n          tagStart: null,\n          context: null\n        };\n        if (baseIndent != null) state.baseIndent = baseIndent;\n        return state;\n      },\n      token: function token(stream, state) {\n        if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n        if (stream.eatSpace()) return null;\n        type = null;\n        var style = state.tokenize(stream, state);\n\n        if ((style || type) && style != \"comment\") {\n          setStyle = null;\n          state.state = state.state(type || style, stream, state);\n          if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n        }\n\n        return style;\n      },\n      indent: function indent(state, textAfter, fullLine) {\n        var context = state.context; // Indent multi-line strings (e.g. css).\n\n        if (state.tokenize.isInAttribute) {\n          if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n        }\n\n        if (context && context.noIndent) return CodeMirror.Pass;\n        if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0; // Indent the starts of attribute names.\n\n        if (state.tagName) {\n          if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n        }\n\n        if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n        var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n\n        if (tagAfter && tagAfter[1]) {\n          // Closing tag spotted\n          while (context) {\n            if (context.tagName == tagAfter[2]) {\n              context = context.prev;\n              break;\n            } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        } else if (tagAfter) {\n          // Opening tag spotted\n          while (context) {\n            var grabbers = config.contextGrabbers[context.tagName];\n            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n          }\n        }\n\n        while (context && context.prev && !context.startOfLine) {\n          context = context.prev;\n        }\n\n        if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n      },\n      electricInput: /<\\/[\\s\\w:]+>$/,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      configuration: config.htmlMode ? \"html\" : \"xml\",\n      helperType: config.htmlMode ? \"html\" : \"xml\",\n      skipAttribute: function skipAttribute(state) {\n        if (state.state == attrValueState) state.state = attrState;\n      },\n      xmlCurrentTag: function xmlCurrentTag(state) {\n        return state.tagName ? {\n          name: state.tagName,\n          close: state.type == \"closeTag\"\n        } : null;\n      },\n      xmlCurrentContext: function xmlCurrentContext(state) {\n        var context = [];\n\n        for (var cx = state.context; cx; cx = cx.prev) {\n          if (cx.tagName) context.push(cx.tagName);\n        }\n\n        return context.reverse();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/xml\", \"xml\");\n  CodeMirror.defineMIME(\"application/xml\", \"xml\");\n  if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", {\n    name: \"xml\",\n    htmlMode: true\n  });\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.overlayMode = function (base, overlay, combine) {\n    return {\n      startState: function startState() {\n        return {\n          base: CodeMirror.startState(base),\n          overlay: CodeMirror.startState(overlay),\n          basePos: 0,\n          baseCur: null,\n          overlayPos: 0,\n          overlayCur: null,\n          streamSeen: null\n        };\n      },\n      copyState: function copyState(state) {\n        return {\n          base: CodeMirror.copyState(base, state.base),\n          overlay: CodeMirror.copyState(overlay, state.overlay),\n          basePos: state.basePos,\n          baseCur: null,\n          overlayPos: state.overlayPos,\n          overlayCur: null\n        };\n      },\n      token: function token(stream, state) {\n        if (stream != state.streamSeen || Math.min(state.basePos, state.overlayPos) < stream.start) {\n          state.streamSeen = stream;\n          state.basePos = state.overlayPos = stream.start;\n        }\n\n        if (stream.start == state.basePos) {\n          state.baseCur = base.token(stream, state.base);\n          state.basePos = stream.pos;\n        }\n\n        if (stream.start == state.overlayPos) {\n          stream.pos = stream.start;\n          state.overlayCur = overlay.token(stream, state.overlay);\n          state.overlayPos = stream.pos;\n        }\n\n        stream.pos = Math.min(state.basePos, state.overlayPos); // state.overlay.combineTokens always takes precedence over combine,\n        // unless set to null\n\n        if (state.overlayCur == null) return state.baseCur;else if (state.baseCur != null && state.overlay.combineTokens || combine && state.overlay.combineTokens == null) return state.baseCur + \" \" + state.overlayCur;else return state.overlayCur;\n      },\n      indent: base.indent && function (state, textAfter, line) {\n        return base.indent(state.base, textAfter, line);\n      },\n      electricChars: base.electricChars,\n      innerMode: function innerMode(state) {\n        return {\n          state: state.base,\n          mode: base\n        };\n      },\n      blankLine: function blankLine(state) {\n        var baseToken, overlayToken;\n        if (base.blankLine) baseToken = base.blankLine(state.base);\n        if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n        return overlayToken == null ? baseToken : combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken;\n      }\n    };\n  };\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar noop = function noop() {};\n\nvar _id = 0;\n\nvar generateId = function generateId() {\n  return \"simplemde-editor-\".concat(++_id);\n};\n\nvar SimpleMDEEditor =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(SimpleMDEEditor, _React$PureComponent);\n\n  function SimpleMDEEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SimpleMDEEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleMDEEditor).call(this, props));\n    _this.keyChange = false;\n    _this.state = {\n      value: _this.props.value || \"\"\n    };\n    _this.id = _this.props.id ? _this.props.id : generateId();\n    _this.simpleMde = null;\n    _this.editorEl = null;\n    _this.editorToolbarEl = null;\n\n    _this.createEditor = function () {\n      var SimpleMDE = require(\"easymde\");\n\n      var initialOptions = {\n        element: document.getElementById(_this.id),\n        initialValue: _this.props.value\n      };\n      var allOptions = Object.assign({}, initialOptions, _this.props.options);\n      _this.simpleMde = new SimpleMDE(allOptions);\n    };\n\n    _this.eventWrapper = function () {\n      _this.keyChange = true;\n\n      _this.setState({\n        value: _this.simpleMde.value()\n      });\n\n      _this.props.onChange(_this.simpleMde.value());\n    };\n\n    _this.removeEvents = function () {\n      if (_this.editorEl && _this.editorToolbarEl) {\n        _this.editorEl.removeEventListener(\"keyup\", _this.eventWrapper);\n\n        _this.editorEl.removeEventListener(\"paste\", _this.eventWrapper);\n\n        _this.editorToolbarEl.removeEventListener(\"click\", _this.eventWrapper);\n      }\n    };\n\n    _this.addEvents = function () {\n      if (_this.elementWrapperRef && _this.simpleMde) {\n        _this.editorEl = _this.elementWrapperRef;\n        _this.editorToolbarEl = _this.elementWrapperRef.getElementsByClassName(\"editor-toolbar\")[0];\n\n        _this.editorEl.addEventListener(\"keyup\", _this.eventWrapper);\n\n        _this.editorEl.addEventListener(\"paste\", _this.eventWrapper);\n\n        _this.editorToolbarEl && _this.editorToolbarEl.addEventListener(\"click\", _this.eventWrapper);\n\n        _this.simpleMde.codemirror.on(\"cursorActivity\", _this.getCursor);\n\n        var _events = _this.props.events; // Handle custom events\n\n        _events && Object.entries(_events).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              eventName = _ref2[0],\n              callback = _ref2[1];\n\n          if (eventName && callback) {\n            _this.simpleMde && _this.simpleMde.codemirror.on(eventName, callback);\n          }\n        });\n      }\n    };\n\n    _this.getCursor = function () {\n      // https://codemirror.net/doc/manual.html#api_selection\n      if (_this.props.getLineAndCursor) {\n        _this.props.getLineAndCursor(_this.simpleMde.codemirror.getDoc().getCursor());\n      }\n    };\n\n    _this.getMdeInstance = function () {\n      if (_this.props.getMdeInstance) {\n        _this.props.getMdeInstance(_this.simpleMde);\n      }\n    };\n\n    _this.addExtraKeys = function () {\n      // https://codemirror.net/doc/manual.html#option_extraKeys\n      if (_this.props.extraKeys) {\n        _this.simpleMde.codemirror.setOption(\"extraKeys\", _this.props.extraKeys);\n      }\n    };\n\n    _this.elementWrapperRef = null;\n\n    _this.setElementWrapperRef = function (element) {\n      _this.elementWrapperRef = element;\n    };\n\n    return _this;\n  }\n\n  _createClass(SimpleMDEEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== undefined) {\n        this.createEditor();\n        this.addEvents();\n        this.addExtraKeys();\n        this.getCursor();\n        this.getMdeInstance();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!this.keyChange && this.props.value !== this.state.value && // This is somehow fixes moving cursor for controlled case\n      this.props.value !== prevProps.value // This one fixes no value change for uncontrolled input. If it's uncontrolled prevProps will be the same\n      ) {\n          this.simpleMde.value(this.props.value || \"\");\n        }\n\n      this.keyChange = false;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.editorEl !== null && this.editorEl !== undefined) {\n        this.removeEvents();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          events = _this$props.events,\n          value = _this$props.value,\n          options = _this$props.options,\n          children = _this$props.children,\n          extraKeys = _this$props.extraKeys,\n          getLineAndCursor = _this$props.getLineAndCursor,\n          getMdeInstance = _this$props.getMdeInstance,\n          label = _this$props.label,\n          onChange = _this$props.onChange,\n          id = _this$props.id,\n          rest = _objectWithoutProperties(_this$props, [\"events\", \"value\", \"options\", \"children\", \"extraKeys\", \"getLineAndCursor\", \"getMdeInstance\", \"label\", \"onChange\", \"id\"]);\n\n      return React.createElement(\"div\", Object.assign({\n        id: \"\".concat(this.id, \"-wrapper\")\n      }, rest, {\n        ref: this.setElementWrapperRef\n      }), label && React.createElement(\"label\", {\n        htmlFor: this.id\n      }, \" \", label, \" \"), React.createElement(\"textarea\", {\n        id: this.id\n      }));\n    }\n  }]);\n\n  return SimpleMDEEditor;\n}(React.PureComponent);\n\nexports.default = SimpleMDEEditor;\nSimpleMDEEditor.defaultProps = {\n  events: {},\n  onChange: noop,\n  options: {}\n};","'use strict';\n\nvar CodeMirror = require('codemirror');\n\nrequire('codemirror/addon/edit/continuelist.js');\n\nrequire('./codemirror/tablist');\n\nrequire('codemirror/addon/display/fullscreen.js');\n\nrequire('codemirror/mode/markdown/markdown.js');\n\nrequire('codemirror/addon/mode/overlay.js');\n\nrequire('codemirror/addon/display/placeholder.js');\n\nrequire('codemirror/addon/selection/mark-selection.js');\n\nrequire('codemirror/addon/search/searchcursor.js');\n\nrequire('codemirror/mode/gfm/gfm.js');\n\nrequire('codemirror/mode/xml/xml.js');\n\nvar CodeMirrorSpellChecker = require('codemirror-spell-checker');\n\nvar marked = require('marked'); // Some variables\n\n\nvar isMac = /Mac/.test(navigator.platform);\nvar anchorToExternalRegex = new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g); // Mapping of actions that can be bound to keyboard shortcuts or toolbar buttons\n\nvar bindings = {\n  'toggleBold': toggleBold,\n  'toggleItalic': toggleItalic,\n  'drawLink': drawLink,\n  'toggleHeadingSmaller': toggleHeadingSmaller,\n  'toggleHeadingBigger': toggleHeadingBigger,\n  'drawImage': drawImage,\n  'toggleBlockquote': toggleBlockquote,\n  'toggleOrderedList': toggleOrderedList,\n  'toggleUnorderedList': toggleUnorderedList,\n  'toggleCodeBlock': toggleCodeBlock,\n  'togglePreview': togglePreview,\n  'toggleStrikethrough': toggleStrikethrough,\n  'toggleHeading1': toggleHeading1,\n  'toggleHeading2': toggleHeading2,\n  'toggleHeading3': toggleHeading3,\n  'cleanBlock': cleanBlock,\n  'drawTable': drawTable,\n  'drawHorizontalRule': drawHorizontalRule,\n  'undo': undo,\n  'redo': redo,\n  'toggleSideBySide': toggleSideBySide,\n  'toggleFullScreen': toggleFullScreen\n};\nvar shortcuts = {\n  'toggleBold': 'Cmd-B',\n  'toggleItalic': 'Cmd-I',\n  'drawLink': 'Cmd-K',\n  'toggleHeadingSmaller': 'Cmd-H',\n  'toggleHeadingBigger': 'Shift-Cmd-H',\n  'cleanBlock': 'Cmd-E',\n  'drawImage': 'Cmd-Alt-I',\n  'toggleBlockquote': 'Cmd-\\'',\n  'toggleOrderedList': 'Cmd-Alt-L',\n  'toggleUnorderedList': 'Cmd-L',\n  'toggleCodeBlock': 'Cmd-Alt-C',\n  'togglePreview': 'Cmd-P',\n  'toggleSideBySide': 'F9',\n  'toggleFullScreen': 'F11'\n};\n\nvar getBindingName = function getBindingName(f) {\n  for (var key in bindings) {\n    if (bindings[key] === f) {\n      return key;\n    }\n  }\n\n  return null;\n};\n\nvar isMobile = function isMobile() {\n  var check = false;\n\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n\n  return check;\n};\n/**\n * Modify HTML to add 'target=\"_blank\"' to links so they open in new tabs by default.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\n\n\nfunction addAnchorTargetBlank(htmlText) {\n  var match;\n\n  while ((match = anchorToExternalRegex.exec(htmlText)) !== null) {\n    // With only one capture group in the RegExp, we can safely take the first index from the match.\n    var linkString = match[0];\n\n    if (linkString.indexOf('target=') === -1) {\n      var fixedLinkString = linkString.replace(/>$/, ' target=\"_blank\">');\n      htmlText = htmlText.replace(linkString, fixedLinkString);\n    }\n  }\n\n  return htmlText;\n}\n/**\n * Fix shortcut. Mac use Command, others use Ctrl.\n */\n\n\nfunction fixShortcut(name) {\n  if (isMac) {\n    name = name.replace('Ctrl', 'Cmd');\n  } else {\n    name = name.replace('Cmd', 'Ctrl');\n  }\n\n  return name;\n}\n/**\n * Create button element for toolbar.\n */\n\n\nfunction createToolbarButton(options, enableTooltips, shortcuts) {\n  options = options || {};\n  var el = document.createElement('button');\n  el.className = options.name;\n  el.setAttribute('type', 'button');\n  enableTooltips = enableTooltips == undefined ? true : enableTooltips; // Properly hande custom shortcuts\n\n  if (options.name && options.name in shortcuts) {\n    bindings[options.name] = options.action;\n  }\n\n  if (options.title && enableTooltips) {\n    el.title = createTooltip(options.title, options.action, shortcuts);\n\n    if (isMac) {\n      el.title = el.title.replace('Ctrl', '⌘');\n      el.title = el.title.replace('Alt', '⌥');\n    }\n  }\n\n  if (options.noDisable) {\n    el.classList.add('no-disable');\n  }\n\n  if (options.noMobile) {\n    el.classList.add('no-mobile');\n  } // Provide backwards compatibility with simple-markdown-editor by adding custom classes to the button.\n\n\n  var classNameParts = options.className.split(' ');\n  var iconClasses = [];\n\n  for (var classNameIndex = 0; classNameIndex < classNameParts.length; classNameIndex++) {\n    var classNamePart = classNameParts[classNameIndex]; // Split icon classes from the button.\n    // Regex will detect \"fa\", \"fas\", \"fa-something\" and \"fa-some-icon-1\", but not \"fanfare\".\n\n    if (classNamePart.match(/^fa([srlb]|(-[\\w-]*)|$)/)) {\n      iconClasses.push(classNamePart);\n    } else {\n      el.classList.add(classNamePart);\n    }\n  }\n\n  el.tabIndex = -1; // Create icon element and append as a child to the button\n\n  var icon = document.createElement('i');\n\n  for (var iconClassIndex = 0; iconClassIndex < iconClasses.length; iconClassIndex++) {\n    var iconClass = iconClasses[iconClassIndex];\n    icon.classList.add(iconClass);\n  }\n\n  el.appendChild(icon);\n  return el;\n}\n\nfunction createSep() {\n  var el = document.createElement('i');\n  el.className = 'separator';\n  el.innerHTML = '|';\n  return el;\n}\n\nfunction createTooltip(title, action, shortcuts) {\n  var actionName;\n  var tooltip = title;\n\n  if (action) {\n    actionName = getBindingName(action);\n\n    if (shortcuts[actionName]) {\n      tooltip += ' (' + fixShortcut(shortcuts[actionName]) + ')';\n    }\n  }\n\n  return tooltip;\n}\n/**\n * The state of CodeMirror at the given position.\n */\n\n\nfunction getState(cm, pos) {\n  pos = pos || cm.getCursor('start');\n  var stat = cm.getTokenAt(pos);\n  if (!stat.type) return {};\n  var types = stat.type.split(' ');\n  var ret = {},\n      data,\n      text;\n\n  for (var i = 0; i < types.length; i++) {\n    data = types[i];\n\n    if (data === 'strong') {\n      ret.bold = true;\n    } else if (data === 'variable-2') {\n      text = cm.getLine(pos.line);\n\n      if (/^\\s*\\d+\\.\\s/.test(text)) {\n        ret['ordered-list'] = true;\n      } else {\n        ret['unordered-list'] = true;\n      }\n    } else if (data === 'atom') {\n      ret.quote = true;\n    } else if (data === 'em') {\n      ret.italic = true;\n    } else if (data === 'quote') {\n      ret.quote = true;\n    } else if (data === 'strikethrough') {\n      ret.strikethrough = true;\n    } else if (data === 'comment') {\n      ret.code = true;\n    } else if (data === 'link') {\n      ret.link = true;\n    } else if (data === 'tag') {\n      ret.image = true;\n    } else if (data.match(/^header(-[1-6])?$/)) {\n      ret[data.replace('header', 'heading')] = true;\n    }\n  }\n\n  return ret;\n} // Saved overflow setting\n\n\nvar saved_overflow = '';\n/**\n * Toggle full screen of the editor.\n */\n\nfunction toggleFullScreen(editor) {\n  // Set fullscreen\n  var cm = editor.codemirror;\n  cm.setOption('fullScreen', !cm.getOption('fullScreen')); // Prevent scrolling on body during fullscreen active\n\n  if (cm.getOption('fullScreen')) {\n    saved_overflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  } else {\n    document.body.style.overflow = saved_overflow;\n  } // Update toolbar class\n\n\n  var wrap = cm.getWrapperElement();\n\n  if (!/fullscreen/.test(wrap.previousSibling.className)) {\n    wrap.previousSibling.className += ' fullscreen';\n  } else {\n    wrap.previousSibling.className = wrap.previousSibling.className.replace(/\\s*fullscreen\\b/, '');\n  } // Update toolbar button\n\n\n  if (editor.toolbarElements && editor.toolbarElements.fullscreen) {\n    var toolbarButton = editor.toolbarElements.fullscreen;\n\n    if (!/active/.test(toolbarButton.className)) {\n      toolbarButton.className += ' active';\n    } else {\n      toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    }\n  } // Hide side by side if needed\n\n\n  var sidebyside = cm.getWrapperElement().nextSibling;\n  if (/editor-preview-active-side/.test(sidebyside.className)) toggleSideBySide(editor);\n\n  if (editor.options.onToggleFullScreen) {\n    editor.options.onToggleFullScreen(cm.getOption('fullScreen') || false);\n  }\n}\n/**\n * Action for toggling bold.\n */\n\n\nfunction toggleBold(editor) {\n  _toggleBlock(editor, 'bold', editor.options.blockStyles.bold);\n}\n/**\n * Action for toggling italic.\n */\n\n\nfunction toggleItalic(editor) {\n  _toggleBlock(editor, 'italic', editor.options.blockStyles.italic);\n}\n/**\n * Action for toggling strikethrough.\n */\n\n\nfunction toggleStrikethrough(editor) {\n  _toggleBlock(editor, 'strikethrough', '~~');\n}\n/**\n * Action for toggling code block.\n */\n\n\nfunction toggleCodeBlock(editor) {\n  var fenceCharsToInsert = editor.options.blockStyles.code;\n\n  function fencing_line(line) {\n    /* return true, if this is a ``` or ~~~ line */\n    if (typeof line !== 'object') {\n      throw 'fencing_line() takes a \\'line\\' object (not a line number, or line text).  Got: ' + typeof line + ': ' + line;\n    }\n\n    return line.styles && line.styles[2] && line.styles[2].indexOf('formatting-code-block') !== -1;\n  }\n\n  function token_state(token) {\n    // base goes an extra level deep when mode backdrops are used, e.g. spellchecker on\n    return token.state.base.base || token.state.base;\n  }\n\n  function code_type(cm, line_num, line, firstTok, lastTok) {\n    /*\n     * Return \"single\", \"indented\", \"fenced\" or false\n     *\n     * cm and line_num are required.  Others are optional for efficiency\n     *   To check in the middle of a line, pass in firstTok yourself.\n     */\n    line = line || cm.getLineHandle(line_num);\n    firstTok = firstTok || cm.getTokenAt({\n      line: line_num,\n      ch: 1\n    });\n    lastTok = lastTok || !!line.text && cm.getTokenAt({\n      line: line_num,\n      ch: line.text.length - 1\n    });\n    var types = firstTok.type ? firstTok.type.split(' ') : [];\n\n    if (lastTok && token_state(lastTok).indentedCode) {\n      // have to check last char, since first chars of first line aren\"t marked as indented\n      return 'indented';\n    } else if (types.indexOf('comment') === -1) {\n      // has to be after \"indented\" check, since first chars of first indented line aren\"t marked as such\n      return false;\n    } else if (token_state(firstTok).fencedChars || token_state(lastTok).fencedChars || fencing_line(line)) {\n      return 'fenced';\n    } else {\n      return 'single';\n    }\n  }\n\n  function insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert) {\n    var start_line_sel = cur_start.line + 1,\n        end_line_sel = cur_end.line + 1,\n        sel_multi = cur_start.line !== cur_end.line,\n        repl_start = fenceCharsToInsert + '\\n',\n        repl_end = '\\n' + fenceCharsToInsert;\n\n    if (sel_multi) {\n      end_line_sel++;\n    } // handle last char including \\n or not\n\n\n    if (sel_multi && cur_end.ch === 0) {\n      repl_end = fenceCharsToInsert + '\\n';\n      end_line_sel--;\n    }\n\n    _replaceSelection(cm, false, [repl_start, repl_end]);\n\n    cm.setSelection({\n      line: start_line_sel,\n      ch: 0\n    }, {\n      line: end_line_sel,\n      ch: 0\n    });\n  }\n\n  var cm = editor.codemirror,\n      cur_start = cm.getCursor('start'),\n      cur_end = cm.getCursor('end'),\n      tok = cm.getTokenAt({\n    line: cur_start.line,\n    ch: cur_start.ch || 1\n  }),\n      // avoid ch 0 which is a cursor pos but not token\n  line = cm.getLineHandle(cur_start.line),\n      is_code = code_type(cm, cur_start.line, line, tok);\n  var block_start, block_end, lineCount;\n\n  if (is_code === 'single') {\n    // similar to some EasyMDE _toggleBlock logic\n    var start = line.text.slice(0, cur_start.ch).replace('`', ''),\n        end = line.text.slice(cur_start.ch).replace('`', '');\n    cm.replaceRange(start + end, {\n      line: cur_start.line,\n      ch: 0\n    }, {\n      line: cur_start.line,\n      ch: 99999999999999\n    });\n    cur_start.ch--;\n\n    if (cur_start !== cur_end) {\n      cur_end.ch--;\n    }\n\n    cm.setSelection(cur_start, cur_end);\n    cm.focus();\n  } else if (is_code === 'fenced') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      // find the fenced line so we know what type it is (tilde, backticks, number of them)\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (fencing_line(line)) {\n          break;\n        }\n      }\n\n      var fencedTok = cm.getTokenAt({\n        line: block_start,\n        ch: 1\n      });\n      var fence_chars = token_state(fencedTok).fencedChars;\n      var start_text, start_line;\n      var end_text, end_line; // check for selection going up against fenced lines, in which case we don't want to add more fencing\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        start_text = '';\n        start_line = cur_start.line;\n      } else if (fencing_line(cm.getLineHandle(cur_start.line - 1))) {\n        start_text = '';\n        start_line = cur_start.line - 1;\n      } else {\n        start_text = fence_chars + '\\n';\n        start_line = cur_start.line;\n      }\n\n      if (fencing_line(cm.getLineHandle(cur_end.line))) {\n        end_text = '';\n        end_line = cur_end.line;\n\n        if (cur_end.ch === 0) {\n          end_line += 1;\n        }\n      } else if (cur_end.ch !== 0 && fencing_line(cm.getLineHandle(cur_end.line + 1))) {\n        end_text = '';\n        end_line = cur_end.line + 1;\n      } else {\n        end_text = fence_chars + '\\n';\n        end_line = cur_end.line + 1;\n      }\n\n      if (cur_end.ch === 0) {\n        // full last line selected, putting cursor at beginning of next\n        end_line -= 1;\n      }\n\n      cm.operation(function () {\n        // end line first, so that line numbers don't change\n        cm.replaceRange(end_text, {\n          line: end_line,\n          ch: 0\n        }, {\n          line: end_line + (end_text ? 0 : 1),\n          ch: 0\n        });\n        cm.replaceRange(start_text, {\n          line: start_line,\n          ch: 0\n        }, {\n          line: start_line + (start_text ? 0 : 1),\n          ch: 0\n        });\n      });\n      cm.setSelection({\n        line: start_line + (start_text ? 1 : 0),\n        ch: 0\n      }, {\n        line: end_line + (start_text ? 1 : -1),\n        ch: 0\n      });\n      cm.focus();\n    } else {\n      // no selection, search for ends of this fenced block\n      var search_from = cur_start.line;\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        // gets a little tricky if cursor is right on a fenced line\n        if (code_type(cm, cur_start.line + 1) === 'fenced') {\n          block_start = cur_start.line;\n          search_from = cur_start.line + 1; // for searching for \"end\"\n        } else {\n          block_end = cur_start.line;\n          search_from = cur_start.line - 1; // for searching for \"start\"\n        }\n      }\n\n      if (block_start === undefined) {\n        for (block_start = search_from; block_start >= 0; block_start--) {\n          line = cm.getLineHandle(block_start);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      if (block_end === undefined) {\n        lineCount = cm.lineCount();\n\n        for (block_end = search_from; block_end < lineCount; block_end++) {\n          line = cm.getLineHandle(block_end);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      cm.operation(function () {\n        cm.replaceRange('', {\n          line: block_start,\n          ch: 0\n        }, {\n          line: block_start + 1,\n          ch: 0\n        });\n        cm.replaceRange('', {\n          line: block_end - 1,\n          ch: 0\n        }, {\n          line: block_end,\n          ch: 0\n        });\n      });\n      cm.focus();\n    }\n  } else if (is_code === 'indented') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      block_start = cur_start.line;\n      block_end = cur_end.line;\n\n      if (cur_end.ch === 0) {\n        block_end--;\n      }\n    } else {\n      // no selection, search for ends of this indented block\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_start, line) !== 'indented') {\n            block_start += 1;\n            break;\n          }\n        }\n      }\n\n      lineCount = cm.lineCount();\n\n      for (block_end = cur_start.line; block_end < lineCount; block_end++) {\n        line = cm.getLineHandle(block_end);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_end, line) !== 'indented') {\n            block_end -= 1;\n            break;\n          }\n        }\n      }\n    } // if we are going to un-indent based on a selected set of lines, and the next line is indented too, we need to\n    // insert a blank line so that the next line(s) continue to be indented code\n\n\n    var next_line = cm.getLineHandle(block_end + 1),\n        next_line_last_tok = next_line && cm.getTokenAt({\n      line: block_end + 1,\n      ch: next_line.text.length - 1\n    }),\n        next_line_indented = next_line_last_tok && token_state(next_line_last_tok).indentedCode;\n\n    if (next_line_indented) {\n      cm.replaceRange('\\n', {\n        line: block_end + 1,\n        ch: 0\n      });\n    }\n\n    for (var i = block_start; i <= block_end; i++) {\n      cm.indentLine(i, 'subtract'); // TODO: this doesn't get tracked in the history, so can't be undone :(\n    }\n\n    cm.focus();\n  } else {\n    // insert code formatting\n    var no_sel_and_starting_of_line = cur_start.line === cur_end.line && cur_start.ch === cur_end.ch && cur_start.ch === 0;\n    var sel_multi = cur_start.line !== cur_end.line;\n\n    if (no_sel_and_starting_of_line || sel_multi) {\n      insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert);\n    } else {\n      _replaceSelection(cm, false, ['`', '`']);\n    }\n  }\n}\n/**\n * Action for toggling blockquote.\n */\n\n\nfunction toggleBlockquote(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'quote');\n}\n/**\n * Action for toggling heading size: normal -> h1 -> h2 -> h3 -> h4 -> h5 -> h6 -> normal\n */\n\n\nfunction toggleHeadingSmaller(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'smaller');\n}\n/**\n * Action for toggling heading size: normal -> h6 -> h5 -> h4 -> h3 -> h2 -> h1 -> normal\n */\n\n\nfunction toggleHeadingBigger(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'bigger');\n}\n/**\n * Action for toggling heading size 1\n */\n\n\nfunction toggleHeading1(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 1);\n}\n/**\n * Action for toggling heading size 2\n */\n\n\nfunction toggleHeading2(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 2);\n}\n/**\n * Action for toggling heading size 3\n */\n\n\nfunction toggleHeading3(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 3);\n}\n/**\n * Action for toggling ul.\n */\n\n\nfunction toggleUnorderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'unordered-list');\n}\n/**\n * Action for toggling ol.\n */\n\n\nfunction toggleOrderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'ordered-list');\n}\n/**\n * Action for clean block (remove headline, list, blockquote code, markers)\n */\n\n\nfunction cleanBlock(editor) {\n  var cm = editor.codemirror;\n\n  _cleanBlock(cm);\n}\n/**\n * Action for drawing a link.\n */\n\n\nfunction drawLink(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.link, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.link, options.insertTexts.link, url);\n}\n/**\n * Action for drawing an img.\n */\n\n\nfunction drawImage(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.image, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.image, options.insertTexts.image, url);\n}\n/**\n * Action for opening the browse-file window to upload an image to a server.\n * @param editor {EasyMDE} The EasyMDE object\n */\n\n\nfunction drawUploadedImage(editor) {\n  // TODO: Draw the image template with a fake url? ie: '![](importing foo.png...)'\n  editor.openBrowseFileWindow();\n}\n/**\n * Action executed after an image have been successfully imported on the server.\n * @param editor {EasyMDE} The EasyMDE object\n * @param url {string} The url of the uploaded image\n */\n\n\nfunction afterImageUploaded(editor, url) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var imageName = url.substr(url.lastIndexOf('/') + 1);\n\n  _replaceSelection(cm, stat.image, options.insertTexts.uploadedImage, url); // show uploaded image filename for 1000ms\n\n\n  editor.updateStatusBar('upload-image', editor.options.imageTexts.sbOnUploaded.replace('#image_name#', imageName));\n  setTimeout(function () {\n    editor.updateStatusBar('upload-image', editor.options.imageTexts.sbInit);\n  }, 1000);\n}\n/**\n * Action for drawing a table.\n */\n\n\nfunction drawTable(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.table, options.insertTexts.table);\n}\n/**\n * Action for drawing a horizontal rule.\n */\n\n\nfunction drawHorizontalRule(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.image, options.insertTexts.horizontalRule);\n}\n/**\n * Undo action.\n */\n\n\nfunction undo(editor) {\n  var cm = editor.codemirror;\n  cm.undo();\n  cm.focus();\n}\n/**\n * Redo action.\n */\n\n\nfunction redo(editor) {\n  var cm = editor.codemirror;\n  cm.redo();\n  cm.focus();\n}\n/**\n * Toggle side by side preview\n */\n\n\nfunction toggleSideBySide(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  var toolbarButton = editor.toolbarElements && editor.toolbarElements['side-by-side'];\n  var useSideBySideListener = false;\n\n  if (/editor-preview-active-side/.test(preview.className)) {\n    preview.className = preview.className.replace(/\\s*editor-preview-active-side\\s*/g, '');\n    if (toolbarButton) toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    wrapper.className = wrapper.className.replace(/\\s*CodeMirror-sided\\s*/g, ' ');\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      if (!cm.getOption('fullScreen')) toggleFullScreen(editor);\n      preview.className += ' editor-preview-active-side';\n    }, 1);\n    if (toolbarButton) toolbarButton.className += ' active';\n    wrapper.className += ' CodeMirror-sided';\n    useSideBySideListener = true;\n  } // Hide normal preview if active\n\n\n  var previewNormal = wrapper.lastChild;\n\n  if (/editor-preview-active/.test(previewNormal.className)) {\n    previewNormal.className = previewNormal.className.replace(/\\s*editor-preview-active\\s*/g, '');\n    var toolbar = editor.toolbarElements.preview;\n    var toolbar_div = wrapper.previousSibling;\n    toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n    toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n  }\n\n  var sideBySideRenderingFunction = function sideBySideRenderingFunction() {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n  };\n\n  if (!cm.sideBySideRenderingFunction) {\n    cm.sideBySideRenderingFunction = sideBySideRenderingFunction;\n  }\n\n  if (useSideBySideListener) {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n\n    cm.on('update', cm.sideBySideRenderingFunction);\n  } else {\n    cm.off('update', cm.sideBySideRenderingFunction);\n  } // Refresh to fix selection being off (#309)\n\n\n  cm.refresh();\n}\n/**\n * Preview action.\n */\n\n\nfunction togglePreview(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var toolbar_div = wrapper.previousSibling;\n  var toolbar = editor.options.toolbar ? editor.toolbarElements.preview : false;\n  var preview = wrapper.lastChild;\n\n  if (!preview || !/editor-preview-full/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-full';\n\n    if (editor.options.previewClass) {\n      if (Array.isArray(editor.options.previewClass)) {\n        for (var i = 0; i < editor.options.previewClass.length; i++) {\n          preview.className += ' ' + editor.options.previewClass[i];\n        }\n      } else if (typeof editor.options.previewClass === 'string') {\n        preview.className += ' ' + editor.options.previewClass;\n      }\n    }\n\n    wrapper.appendChild(preview);\n  }\n\n  if (/editor-preview-active/.test(preview.className)) {\n    preview.className = preview.className.replace(/\\s*editor-preview-active\\s*/g, '');\n\n    if (toolbar) {\n      toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n      toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n    }\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      preview.className += ' editor-preview-active';\n    }, 1);\n\n    if (toolbar) {\n      toolbar.className += ' active';\n      toolbar_div.className += ' disabled-for-preview';\n    }\n  }\n\n  preview.innerHTML = editor.options.previewRender(editor.value(), preview); // Turn off side by side if needed\n\n  var sidebyside = cm.getWrapperElement().nextSibling;\n  if (/editor-preview-active-side/.test(sidebyside.className)) toggleSideBySide(editor);\n}\n\nfunction _replaceSelection(cm, active, startEnd, url) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var text;\n  var start = startEnd[0];\n  var end = startEnd[1];\n  var startPoint = {},\n      endPoint = {};\n  Object.assign(startPoint, cm.getCursor('start'));\n  Object.assign(endPoint, cm.getCursor('end'));\n\n  if (url) {\n    start = start.replace('#url#', url); // url is in start for upload-image\n\n    end = end.replace('#url#', url);\n  }\n\n  if (active) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    });\n  } else {\n    text = cm.getSelection();\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += start.length;\n    }\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _toggleHeading(cm, direction, size) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n      var currHeadingLevel = text.search(/[^#]/);\n\n      if (direction !== undefined) {\n        if (currHeadingLevel <= 0) {\n          if (direction == 'bigger') {\n            text = '###### ' + text;\n          } else {\n            text = '# ' + text;\n          }\n        } else if (currHeadingLevel == 6 && direction == 'smaller') {\n          text = text.substr(7);\n        } else if (currHeadingLevel == 1 && direction == 'bigger') {\n          text = text.substr(2);\n        } else {\n          if (direction == 'bigger') {\n            text = text.substr(1);\n          } else {\n            text = '#' + text;\n          }\n        }\n      } else {\n        if (size == 1) {\n          if (currHeadingLevel <= 0) {\n            text = '# ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '# ' + text.substr(currHeadingLevel + 1);\n          }\n        } else if (size == 2) {\n          if (currHeadingLevel <= 0) {\n            text = '## ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '## ' + text.substr(currHeadingLevel + 1);\n          }\n        } else {\n          if (currHeadingLevel <= 0) {\n            text = '### ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '### ' + text.substr(currHeadingLevel + 1);\n          }\n        }\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleLine(cm, name) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var listRegexp = /^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/;\n  var whitespacesRegexp = /^\\s*/;\n  var stat = getState(cm);\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var repl = {\n    'quote': /^(\\s*)>\\s+/,\n    'unordered-list': listRegexp,\n    'ordered-list': listRegexp\n  };\n\n  var _getChar = function _getChar(name, i) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '%%i.'\n    };\n    return map[name].replace('%%i', i);\n  };\n\n  var _checkChar = function _checkChar(name, char) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '\\\\d+.'\n    };\n    var rt = new RegExp(map[name]);\n    return char && rt.test(char);\n  };\n\n  var _toggle = function _toggle(name, text, untoggleOnly) {\n    var arr = listRegexp.exec(text);\n\n    var char = _getChar(name, line);\n\n    if (arr !== null) {\n      if (_checkChar(name, arr[2])) {\n        char = '';\n      }\n\n      text = arr[1] + char + arr[3] + text.replace(whitespacesRegexp, '').replace(repl[name], '$1');\n    } else if (untoggleOnly == false) {\n      text = char + ' ' + text;\n    }\n\n    return text;\n  };\n\n  var line = 1;\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n\n      if (stat[name]) {\n        text = text.replace(repl[name], '$1');\n      } else {\n        // If we're toggling unordered-list formatting, check if the current line\n        // is part of an ordered-list, and if so, untoggle that first.\n        // Workaround for https://github.com/Ionaru/easy-markdown-editor/issues/92\n        if (name == 'unordered-list') {\n          text = _toggle('ordered-list', text, true);\n        }\n\n        text = _toggle(name, text, false);\n        line += 1;\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleBlock(editor, type, start_chars, end_chars) {\n  if (/editor-preview-active/.test(editor.codemirror.getWrapperElement().lastChild.className)) return;\n  end_chars = typeof end_chars === 'undefined' ? start_chars : end_chars;\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var text;\n  var start = start_chars;\n  var end = end_chars;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  if (stat[type]) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n\n    if (type == 'bold') {\n      start = start.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/, '');\n      end = end.replace(/(\\*\\*|__)/, '');\n    } else if (type == 'italic') {\n      start = start.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/, '');\n      end = end.replace(/(\\*|_)/, '');\n    } else if (type == 'strikethrough') {\n      start = start.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/, '');\n      end = end.replace(/(\\*\\*|~~)/, '');\n    }\n\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    }, {\n      line: startPoint.line,\n      ch: 99999999999999\n    });\n\n    if (type == 'bold' || type == 'strikethrough') {\n      startPoint.ch -= 2;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 2;\n      }\n    } else if (type == 'italic') {\n      startPoint.ch -= 1;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 1;\n      }\n    }\n  } else {\n    text = cm.getSelection();\n\n    if (type == 'bold') {\n      text = text.split('**').join('');\n      text = text.split('__').join('');\n    } else if (type == 'italic') {\n      text = text.split('*').join('');\n      text = text.split('_').join('');\n    } else if (type == 'strikethrough') {\n      text = text.split('~~').join('');\n    }\n\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start_chars.length;\n    endPoint.ch = startPoint.ch + text.length;\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _cleanBlock(cm) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var text;\n\n  for (var line = startPoint.line; line <= endPoint.line; line++) {\n    text = cm.getLine(line);\n    text = text.replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/, '');\n    cm.replaceRange(text, {\n      line: line,\n      ch: 0\n    }, {\n      line: line,\n      ch: 99999999999999\n    });\n  }\n}\n/**\n * Convert a number of bytes to a human-readable file size.\n * @param bytes {integer} A number of bytes, as integer. Ex: 421137\n * @param units {number[]} An array of human-readable units, ie. ['b', 'Kb', 'Mb']\n * @returns string A human-readable file size. Ex: '412Kb'\n */\n\n\nfunction humanFileSize(bytes, units) {\n  if (Math.abs(bytes) < 1024) {\n    return '' + bytes + units[0];\n  }\n\n  var u = 0;\n\n  do {\n    bytes /= 1024;\n    ++u;\n  } while (Math.abs(bytes) >= 1024 && u < units.length);\n\n  return '' + bytes.toFixed(1) + units[u];\n} // Merge the properties of one object into another.\n\n\nfunction _mergeProperties(target, source) {\n  for (var property in source) {\n    if (Object.prototype.hasOwnProperty.call(source, property)) {\n      if (source[property] instanceof Array) {\n        target[property] = source[property].concat(target[property] instanceof Array ? target[property] : []);\n      } else if (source[property] !== null && typeof source[property] === 'object' && source[property].constructor === Object) {\n        target[property] = _mergeProperties(target[property] || {}, source[property]);\n      } else {\n        target[property] = source[property];\n      }\n    }\n  }\n\n  return target;\n} // Merge an arbitrary number of objects into one.\n\n\nfunction extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    target = _mergeProperties(target, arguments[i]);\n  }\n\n  return target;\n}\n/* The right word count in respect for CJK. */\n\n\nfunction wordCount(data) {\n  var pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\n  var m = data.match(pattern);\n  var count = 0;\n  if (m === null) return count;\n\n  for (var i = 0; i < m.length; i++) {\n    if (m[i].charCodeAt(0) >= 0x4E00) {\n      count += m[i].length;\n    } else {\n      count += 1;\n    }\n  }\n\n  return count;\n}\n\nvar toolbarBuiltInButtons = {\n  'bold': {\n    name: 'bold',\n    action: toggleBold,\n    className: 'fa fa-bold',\n    title: 'Bold',\n    default: true\n  },\n  'italic': {\n    name: 'italic',\n    action: toggleItalic,\n    className: 'fa fa-italic',\n    title: 'Italic',\n    default: true\n  },\n  'strikethrough': {\n    name: 'strikethrough',\n    action: toggleStrikethrough,\n    className: 'fa fa-strikethrough',\n    title: 'Strikethrough'\n  },\n  'heading': {\n    name: 'heading',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading',\n    title: 'Heading',\n    default: true\n  },\n  'heading-smaller': {\n    name: 'heading-smaller',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading header-smaller',\n    title: 'Smaller Heading'\n  },\n  'heading-bigger': {\n    name: 'heading-bigger',\n    action: toggleHeadingBigger,\n    className: 'fa fa-header fa-heading header-bigger',\n    title: 'Bigger Heading'\n  },\n  'heading-1': {\n    name: 'heading-1',\n    action: toggleHeading1,\n    className: 'fa fa-header fa-heading header-1',\n    title: 'Big Heading'\n  },\n  'heading-2': {\n    name: 'heading-2',\n    action: toggleHeading2,\n    className: 'fa fa-header fa-heading header-2',\n    title: 'Medium Heading'\n  },\n  'heading-3': {\n    name: 'heading-3',\n    action: toggleHeading3,\n    className: 'fa fa-header fa-heading header-3',\n    title: 'Small Heading'\n  },\n  'separator-1': {\n    name: 'separator-1'\n  },\n  'code': {\n    name: 'code',\n    action: toggleCodeBlock,\n    className: 'fa fa-code',\n    title: 'Code'\n  },\n  'quote': {\n    name: 'quote',\n    action: toggleBlockquote,\n    className: 'fa fa-quote-left',\n    title: 'Quote',\n    default: true\n  },\n  'unordered-list': {\n    name: 'unordered-list',\n    action: toggleUnorderedList,\n    className: 'fa fa-list-ul',\n    title: 'Generic List',\n    default: true\n  },\n  'ordered-list': {\n    name: 'ordered-list',\n    action: toggleOrderedList,\n    className: 'fa fa-list-ol',\n    title: 'Numbered List',\n    default: true\n  },\n  'clean-block': {\n    name: 'clean-block',\n    action: cleanBlock,\n    className: 'fa fa-eraser',\n    title: 'Clean block'\n  },\n  'separator-2': {\n    name: 'separator-2'\n  },\n  'link': {\n    name: 'link',\n    action: drawLink,\n    className: 'fa fa-link',\n    title: 'Create Link',\n    default: true\n  },\n  'image': {\n    name: 'image',\n    action: drawImage,\n    className: 'fa fa-image',\n    title: 'Insert Image',\n    default: true\n  },\n  'upload-image': {\n    name: 'upload-image',\n    action: drawUploadedImage,\n    className: 'fa fa-image',\n    title: 'Import an image'\n  },\n  'table': {\n    name: 'table',\n    action: drawTable,\n    className: 'fa fa-table',\n    title: 'Insert Table'\n  },\n  'horizontal-rule': {\n    name: 'horizontal-rule',\n    action: drawHorizontalRule,\n    className: 'fa fa-minus',\n    title: 'Insert Horizontal Line'\n  },\n  'separator-3': {\n    name: 'separator-3'\n  },\n  'preview': {\n    name: 'preview',\n    action: togglePreview,\n    className: 'fa fa-eye',\n    noDisable: true,\n    title: 'Toggle Preview',\n    default: true\n  },\n  'side-by-side': {\n    name: 'side-by-side',\n    action: toggleSideBySide,\n    className: 'fa fa-columns',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Side by Side',\n    default: true\n  },\n  'fullscreen': {\n    name: 'fullscreen',\n    action: toggleFullScreen,\n    className: 'fa fa-arrows-alt',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Fullscreen',\n    default: true\n  },\n  'separator-4': {\n    name: 'separator-4'\n  },\n  'guide': {\n    name: 'guide',\n    action: 'https://www.markdownguide.org/basic-syntax/',\n    className: 'fa fa-question-circle',\n    noDisable: true,\n    title: 'Markdown Guide',\n    default: true\n  },\n  'separator-5': {\n    name: 'separator-5'\n  },\n  'undo': {\n    name: 'undo',\n    action: undo,\n    className: 'fa fa-undo',\n    noDisable: true,\n    title: 'Undo'\n  },\n  'redo': {\n    name: 'redo',\n    action: redo,\n    className: 'fa fa-repeat fa-redo',\n    noDisable: true,\n    title: 'Redo'\n  }\n};\nvar insertTexts = {\n  link: ['[', '](#url#)'],\n  image: ['![](', '#url#)'],\n  uploadedImage: ['![](#url#)', ''],\n  // uploadedImage: ['![](#url#)\\n', ''], // TODO: New line insertion doesn't work here.\n  table: ['', '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n'],\n  horizontalRule: ['', '\\n\\n-----\\n\\n']\n};\nvar promptTexts = {\n  link: 'URL for the link:',\n  image: 'URL of the image:'\n};\nvar blockStyles = {\n  'bold': '**',\n  'code': '```',\n  'italic': '*'\n};\n/**\n * Texts displayed to the user (mainly on the status bar) for the import image\n * feature. Can be used for customization or internationalization.\n */\n\nvar imageTexts = {\n  sbInit: 'Attach files by drag and dropping or pasting from clipboard.',\n  sbOnDragEnter: 'Drop image to upload it.',\n  sbOnDrop: 'Uploading image #images_names#...',\n  sbProgress: 'Uploading #file_name#: #progress#%',\n  sbOnUploaded: 'Uploaded #image_name#',\n  sizeUnits: 'b,Kb,Mb'\n};\n/**\n * Errors displayed to the user, using the `errorCallback` option. Can be used for\n * customization or internationalization.\n */\n\nvar errorMessages = {\n  noFileGiven: 'You must select a file.',\n  typeNotAllowed: 'This image type is not allowed.',\n  fileTooLarge: 'Image #image_name# is too big (#image_size#).\\n' + 'Maximum file size is #image_max_size#.',\n  importError: 'Something went wrong when uploading the image #image_name#.'\n};\n/**\n * Interface of EasyMDE.\n */\n\nfunction EasyMDE(options) {\n  // Handle options parameter\n  options = options || {}; // Used later to refer to it\"s parent\n\n  options.parent = this; // Check if Font Awesome needs to be auto downloaded\n\n  var autoDownloadFA = true;\n\n  if (options.autoDownloadFontAwesome === false) {\n    autoDownloadFA = false;\n  }\n\n  if (options.autoDownloadFontAwesome !== true) {\n    var styleSheets = document.styleSheets;\n\n    for (var i = 0; i < styleSheets.length; i++) {\n      if (!styleSheets[i].href) continue;\n\n      if (styleSheets[i].href.indexOf('//maxcdn.bootstrapcdn.com/font-awesome/') > -1) {\n        autoDownloadFA = false;\n      }\n    }\n  }\n\n  if (autoDownloadFA) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css';\n    document.getElementsByTagName('head')[0].appendChild(link);\n  } // Find the textarea to use\n\n\n  if (options.element) {\n    this.element = options.element;\n  } else if (options.element === null) {\n    // This means that the element option was specified, but no element was found\n    console.log('EasyMDE: Error. No element was found.');\n    return;\n  } // Handle toolbar\n\n\n  if (options.toolbar === undefined) {\n    // Initialize\n    options.toolbar = []; // Loop over the built in buttons, to get the preferred order\n\n    for (var key in toolbarBuiltInButtons) {\n      if (Object.prototype.hasOwnProperty.call(toolbarBuiltInButtons, key)) {\n        if (key.indexOf('separator-') != -1) {\n          options.toolbar.push('|');\n        }\n\n        if (toolbarBuiltInButtons[key].default === true || options.showIcons && options.showIcons.constructor === Array && options.showIcons.indexOf(key) != -1) {\n          options.toolbar.push(key);\n        }\n      }\n    }\n  } // Editor preview styling class.\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'previewClass')) {\n    options.previewClass = 'editor-preview';\n  } // Handle status bar\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'status')) {\n    options.status = ['autosave', 'lines', 'words', 'cursor'];\n\n    if (options.uploadImage) {\n      options.status.unshift('upload-image');\n    }\n  } // Add default preview rendering function\n\n\n  if (!options.previewRender) {\n    options.previewRender = function (plainText) {\n      // Note: \"this\" refers to the options object\n      return this.parent.markdown(plainText);\n    };\n  } // Set default options for parsing config\n\n\n  options.parsingConfig = extend({\n    highlightFormatting: true // needed for toggleCodeBlock to detect types of code\n\n  }, options.parsingConfig || {}); // Merging the insertTexts, with the given options\n\n  options.insertTexts = extend({}, insertTexts, options.insertTexts || {}); // Merging the promptTexts, with the given options\n\n  options.promptTexts = extend({}, promptTexts, options.promptTexts || {}); // Merging the blockStyles, with the given options\n\n  options.blockStyles = extend({}, blockStyles, options.blockStyles || {}); // Merging the shortcuts, with the given options\n\n  options.shortcuts = extend({}, shortcuts, options.shortcuts || {});\n  options.minHeight = options.minHeight || '300px';\n\n  options.errorCallback = options.errorCallback || function (errorMessage) {\n    alert(errorMessage);\n  }; // Import-image default configuration\n\n\n  options.uploadImage = options.uploadImage || false;\n  options.imageMaxSize = options.imageMaxSize || 2097152; // 1024 * 1024 * 2\n\n  options.imageAccept = options.imageAccept || 'image/png, image/jpeg';\n  options.imageTexts = extend({}, imageTexts, options.imageTexts || {});\n  options.errorMessages = extend({}, errorMessages, options.errorMessages || {}); // Change unique_id to uniqueId for backwards compatibility\n\n  if (options.autosave != undefined && options.autosave.unique_id != undefined && options.autosave.unique_id != '') options.autosave.uniqueId = options.autosave.unique_id; // Update this options\n\n  this.options = options; // Auto render\n\n  this.render(); // The codemirror component is only available after rendering\n  // so, the setter for the initialValue can only run after\n  // the element has been rendered\n\n  if (options.initialValue && (!this.options.autosave || this.options.autosave.foundSavedValue !== true)) {\n    this.value(options.initialValue);\n  }\n\n  if (options.uploadImage) {\n    var self = this;\n    this.codemirror.on('dragenter', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragend', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragleave', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragover', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('drop', function (cm, event) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.dataTransfer.files);\n      } else {\n        self.uploadImages(event.dataTransfer.files);\n      }\n    });\n    this.codemirror.on('paste', function (cm, event) {\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.clipboardData.files);\n      } else {\n        self.uploadImages(event.clipboardData.files);\n      }\n    });\n  }\n}\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param {FileList} files The files to upload the the server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.uploadImages = function (files, onSuccess, onError) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImage(files[i], onSuccess, onError);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options.\n * @param {FileList} files The files to upload the the server.\n */\n\n\nEasyMDE.prototype.uploadImagesUsingCustomFunction = function (imageUploadFunction, files) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImageUsingCustomFunction(imageUploadFunction, files[i]);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Update an item in the status bar.\n * @param itemName {string} The name of the item to update (ie. 'upload-image', 'autosave', etc.).\n * @param content {string} the new content of the item to write in the status bar.\n */\n\n\nEasyMDE.prototype.updateStatusBar = function (itemName, content) {\n  var matchingClasses = this.gui.statusbar.getElementsByClassName(itemName);\n\n  if (matchingClasses.length === 1) {\n    this.gui.statusbar.getElementsByClassName(itemName)[0].textContent = content;\n  } else if (matchingClasses.length === 0) {\n    console.log('EasyMDE: status bar item ' + itemName + ' was not found.');\n  } else {\n    console.log('EasyMDE: Several status bar items named ' + itemName + ' was found.');\n  }\n};\n/**\n * Default markdown render.\n */\n\n\nEasyMDE.prototype.markdown = function (text) {\n  if (marked) {\n    // Initialize\n    var markedOptions;\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.markedOptions) {\n      markedOptions = this.options.renderingConfig.markedOptions;\n    } else {\n      markedOptions = {};\n    } // Update options\n\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === false) {\n      markedOptions.breaks = false;\n    } else {\n      markedOptions.breaks = true;\n    }\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === true) {\n      /* Get HLJS from config or window */\n      var hljs = this.options.renderingConfig.hljs || window.hljs;\n      /* Check if HLJS loaded */\n\n      if (hljs) {\n        markedOptions.highlight = function (code) {\n          return hljs.highlightAuto(code).value;\n        };\n      }\n    } // Set options\n\n\n    marked.setOptions(markedOptions); // Convert the markdown to HTML\n\n    var htmlText = marked(text); // Edit the HTML anchors to add 'target=\"_blank\"' by default.\n\n    htmlText = addAnchorTargetBlank(htmlText);\n    return htmlText;\n  }\n};\n/**\n * Render editor to the given element.\n */\n\n\nEasyMDE.prototype.render = function (el) {\n  if (!el) {\n    el = this.element || document.getElementsByTagName('textarea')[0];\n  }\n\n  if (this._rendered && this._rendered === el) {\n    // Already rendered.\n    return;\n  }\n\n  this.element = el;\n  var options = this.options;\n  var self = this;\n  var keyMaps = {};\n\n  for (var key in options.shortcuts) {\n    // null stands for \"do not bind this command\"\n    if (options.shortcuts[key] !== null && bindings[key] !== null) {\n      (function (key) {\n        keyMaps[fixShortcut(options.shortcuts[key])] = function () {\n          var action = bindings[key];\n\n          if (typeof action === 'function') {\n            action(self);\n          } else if (typeof action === 'string') {\n            window.open(action, '_blank');\n          }\n        };\n      })(key);\n    }\n  }\n\n  keyMaps['Enter'] = 'newlineAndIndentContinueMarkdownList';\n  keyMaps['Tab'] = 'tabAndIndentMarkdownList';\n  keyMaps['Shift-Tab'] = 'shiftTabAndUnindentMarkdownList';\n\n  keyMaps['Esc'] = function (cm) {\n    if (cm.getOption('fullScreen')) toggleFullScreen(self);\n  };\n\n  document.addEventListener('keydown', function (e) {\n    e = e || window.event;\n\n    if (e.keyCode == 27) {\n      if (self.codemirror.getOption('fullScreen')) toggleFullScreen(self);\n    }\n  }, false);\n  var mode, backdrop;\n\n  if (options.spellChecker !== false) {\n    mode = 'spell-checker';\n    backdrop = options.parsingConfig;\n    backdrop.name = 'gfm';\n    backdrop.gitHubSpice = false;\n    CodeMirrorSpellChecker({\n      codeMirrorInstance: CodeMirror\n    });\n  } else {\n    mode = options.parsingConfig;\n    mode.name = 'gfm';\n    mode.gitHubSpice = false;\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function configureMouse(cm, repeat, event) {\n    return {\n      addNew: false\n    };\n  }\n\n  this.codemirror = CodeMirror.fromTextArea(el, {\n    mode: mode,\n    backdrop: backdrop,\n    theme: options.theme != undefined ? options.theme : 'easymde',\n    tabSize: options.tabSize != undefined ? options.tabSize : 2,\n    indentUnit: options.tabSize != undefined ? options.tabSize : 2,\n    indentWithTabs: options.indentWithTabs === false ? false : true,\n    lineNumbers: false,\n    autofocus: options.autofocus === true ? true : false,\n    extraKeys: keyMaps,\n    lineWrapping: options.lineWrapping === false ? false : true,\n    allowDropFileTypes: ['text/plain'],\n    placeholder: options.placeholder || el.getAttribute('placeholder') || '',\n    styleSelectedText: options.styleSelectedText != undefined ? options.styleSelectedText : !isMobile(),\n    configureMouse: configureMouse\n  });\n  this.codemirror.getScrollerElement().style.minHeight = options.minHeight;\n\n  if (options.forceSync === true) {\n    var cm = this.codemirror;\n    cm.on('change', function () {\n      cm.save();\n    });\n  }\n\n  this.gui = {};\n\n  if (options.toolbar !== false) {\n    this.gui.toolbar = this.createToolbar();\n  }\n\n  if (options.status !== false) {\n    this.gui.statusbar = this.createStatusbar();\n  }\n\n  if (options.autosave != undefined && options.autosave.enabled === true) {\n    this.autosave();\n  }\n\n  this.gui.sideBySide = this.createSideBySide();\n  this._rendered = this.element; // Fixes CodeMirror bug (#344)\n\n  var temp_cm = this.codemirror;\n  setTimeout(function () {\n    temp_cm.refresh();\n  }.bind(temp_cm), 0);\n}; // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem throw QuotaExceededError. We're going to detect this and set a variable accordingly.\n\n\nfunction isLocalStorageAvailable() {\n  if (typeof localStorage === 'object') {\n    try {\n      localStorage.setItem('smde_localStorage', 1);\n      localStorage.removeItem('smde_localStorage');\n    } catch (e) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n}\n\nEasyMDE.prototype.autosave = function () {\n  if (isLocalStorageAvailable()) {\n    var easyMDE = this;\n\n    if (this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to use the autosave feature');\n      return;\n    }\n\n    if (this.options.autosave.binded !== true) {\n      if (easyMDE.element.form != null && easyMDE.element.form != undefined) {\n        easyMDE.element.form.addEventListener('submit', function () {\n          clearTimeout(easyMDE.autosaveTimeoutId);\n          easyMDE.autosaveTimeoutId = undefined;\n          localStorage.removeItem('smde_' + easyMDE.options.autosave.uniqueId); // Restart autosaving in case the submit will be cancelled down the line\n\n          setTimeout(function () {\n            easyMDE.autosave();\n          }, easyMDE.options.autosave.delay || 10000);\n        });\n      }\n\n      this.options.autosave.binded = true;\n    }\n\n    if (this.options.autosave.loaded !== true) {\n      if (typeof localStorage.getItem('smde_' + this.options.autosave.uniqueId) == 'string' && localStorage.getItem('smde_' + this.options.autosave.uniqueId) != '') {\n        this.codemirror.setValue(localStorage.getItem('smde_' + this.options.autosave.uniqueId));\n        this.options.autosave.foundSavedValue = true;\n      }\n\n      this.options.autosave.loaded = true;\n    }\n\n    localStorage.setItem('smde_' + this.options.autosave.uniqueId, easyMDE.value());\n    var el = document.getElementById('autosaved');\n\n    if (el != null && el != undefined && el != '') {\n      var d = new Date();\n      var hh = d.getHours();\n      var m = d.getMinutes();\n      var dd = 'am';\n      var h = hh;\n\n      if (h >= 12) {\n        h = hh - 12;\n        dd = 'pm';\n      }\n\n      if (h == 0) {\n        h = 12;\n      }\n\n      m = m < 10 ? '0' + m : m;\n      el.innerHTML = 'Autosaved: ' + h + ':' + m + ' ' + dd;\n    }\n\n    this.autosaveTimeoutId = setTimeout(function () {\n      easyMDE.autosave();\n    }, this.options.autosave.delay || 10000);\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n\nEasyMDE.prototype.clearAutosavedValue = function () {\n  if (isLocalStorageAvailable()) {\n    if (this.options.autosave == undefined || this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to clear the autosave value');\n      return;\n    }\n\n    localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n/**\n * Open the browse-file window to upload an image to a server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.openBrowseFileWindow = function (onSuccess, onError) {\n  var self = this;\n  var imageInput = this.gui.toolbar.getElementsByClassName('imageInput')[0];\n  imageInput.click(); //dispatchEvent(new MouseEvent('click'));  // replaced with click() for IE11 compatibility.\n\n  function onChange(event) {\n    if (self.options.imageUploadFunction) {\n      self.uploadImagesUsingCustomFunction(self.options.imageUploadFunction, event.target.files);\n    } else {\n      self.uploadImages(event.target.files, onSuccess, onError);\n    }\n\n    imageInput.removeEventListener('change', onChange);\n  }\n\n  imageInput.addEventListener('change', onChange);\n};\n/**\n * Upload an image to the server.\n *\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File)\n * @param [onSuccess] {function} A callback function to execute after the image has been successfully uploaded, with one parameter:\n * - url (string): The URL of the uploaded image.\n * @param [onError] {function} A callback function to execute when the image upload fails, with one parameter:\n * - error (string): the detailed error to display to the user (based on messages from options.errorMessages).\n */\n\n\nEasyMDE.prototype.uploadImage = function (file, onSuccess, onError) {\n  var self = this;\n\n  onSuccess = onSuccess || function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  };\n\n  function onErrorSup(errorMessage) {\n    // show error on status bar and reset after 10000ms\n    self.updateStatusBar('upload-image', errorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run custom error handler\n\n    if (onError && typeof onError === 'function') {\n      onError(errorMessage);\n    } // run error handler from options, this alerts the message.\n\n\n    self.options.errorCallback(errorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  if (file.size > this.options.imageMaxSize) {\n    onErrorSup(fillErrorMessage(this.options.errorMessages.fileTooLarge));\n    return;\n  }\n\n  var formData = new FormData();\n  formData.append('image', file); // insert CSRF token if provided in config.\n\n  if (self.options.imageCSRFToken) {\n    formData.append('csrfmiddlewaretoken', self.options.imageCSRFToken);\n  }\n\n  var request = new XMLHttpRequest();\n\n  request.upload.onprogress = function (event) {\n    if (event.lengthComputable) {\n      var progress = '' + Math.round(event.loaded * 100 / event.total);\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbProgress.replace('#file_name#', file.name).replace('#progress#', progress));\n    }\n  };\n\n  request.open('POST', this.options.imageUploadEndpoint);\n\n  request.onload = function () {\n    try {\n      var response = JSON.parse(this.responseText);\n    } catch (error) {\n      console.error('EasyMDE: The server did not return a valid json.');\n      onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      return;\n    }\n\n    if (this.status === 200 && response && !response.error && response.data && response.data.filePath) {\n      onSuccess(window.location.origin + '/' + response.data.filePath);\n    } else {\n      if (response.error && response.error in self.options.errorMessages) {\n        // preformatted error message\n        onErrorSup(fillErrorMessage(self.options.errorMessages[response.error]));\n      } else if (response.error) {\n        // server side generated error message\n        onErrorSup(fillErrorMessage(response.error));\n      } else {\n        //unknown error\n        console.error('EasyMDE: Received an unexpected response after uploading the image.' + this.status + ' (' + this.statusText + ')');\n        onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      }\n    }\n  };\n\n  request.onerror = function (event) {\n    console.error('EasyMDE: An unexpected error occurred when trying to upload the image.' + event.target.status + ' (' + event.target.statusText + ')');\n    onErrorSup(self.options.errorMessages.importError);\n  };\n\n  request.send(formData);\n};\n/**\n * Upload an image to the server using a custom upload function.\n *\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File).\n */\n\n\nEasyMDE.prototype.uploadImageUsingCustomFunction = function (imageUploadFunction, file) {\n  var self = this;\n\n  function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  }\n\n  function onError(errorMessage) {\n    var filledErrorMessage = fillErrorMessage(errorMessage); // show error on status bar and reset after 10000ms\n\n    self.updateStatusBar('upload-image', filledErrorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run error handler from options, this alerts the message.\n\n    self.options.errorCallback(filledErrorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  imageUploadFunction(file, onSuccess, onError);\n};\n\nEasyMDE.prototype.createSideBySide = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n\n  if (!preview || !/editor-preview-side/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-side';\n\n    if (this.options.previewClass) {\n      if (Array.isArray(this.options.previewClass)) {\n        for (var i = 0; i < this.options.previewClass.length; i++) {\n          preview.className += ' ' + this.options.previewClass[i];\n        }\n      } else if (typeof this.options.previewClass === 'string') {\n        preview.className += ' ' + this.options.previewClass;\n      }\n    }\n\n    wrapper.parentNode.insertBefore(preview, wrapper.nextSibling);\n  }\n\n  if (this.options.syncSideBySidePreviewScroll === false) return preview; // Syncs scroll  editor -> preview\n\n  var cScroll = false;\n  var pScroll = false;\n  cm.on('scroll', function (v) {\n    if (cScroll) {\n      cScroll = false;\n      return;\n    }\n\n    pScroll = true;\n    var height = v.getScrollInfo().height - v.getScrollInfo().clientHeight;\n    var ratio = parseFloat(v.getScrollInfo().top) / height;\n    var move = (preview.scrollHeight - preview.clientHeight) * ratio;\n    preview.scrollTop = move;\n  }); // Syncs scroll  preview -> editor\n\n  preview.onscroll = function () {\n    if (pScroll) {\n      pScroll = false;\n      return;\n    }\n\n    cScroll = true;\n    var height = preview.scrollHeight - preview.clientHeight;\n    var ratio = parseFloat(preview.scrollTop) / height;\n    var move = (cm.getScrollInfo().height - cm.getScrollInfo().clientHeight) * ratio;\n    cm.scrollTo(0, move);\n  };\n\n  return preview;\n};\n\nEasyMDE.prototype.createToolbar = function (items) {\n  items = items || this.options.toolbar;\n\n  if (!items || items.length === 0) {\n    return;\n  }\n\n  var i;\n\n  for (i = 0; i < items.length; i++) {\n    if (toolbarBuiltInButtons[items[i]] != undefined) {\n      items[i] = toolbarBuiltInButtons[items[i]];\n    }\n  }\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-toolbar';\n  var self = this;\n  var toolbarData = {};\n  self.toolbar = items;\n\n  for (i = 0; i < items.length; i++) {\n    if (items[i].name == 'guide' && self.options.toolbarGuideIcon === false) continue;\n    if (self.options.hideIcons && self.options.hideIcons.indexOf(items[i].name) != -1) continue; // Fullscreen does not work well on mobile devices (even tablets)\n    // In the future, hopefully this can be resolved\n\n    if ((items[i].name == 'fullscreen' || items[i].name == 'side-by-side') && isMobile()) continue; // Don't include trailing separators\n\n    if (items[i] === '|') {\n      var nonSeparatorIconsFollow = false;\n\n      for (var x = i + 1; x < items.length; x++) {\n        if (items[x] !== '|' && (!self.options.hideIcons || self.options.hideIcons.indexOf(items[x].name) == -1)) {\n          nonSeparatorIconsFollow = true;\n        }\n      }\n\n      if (!nonSeparatorIconsFollow) continue;\n    } // Create the icon and append to the toolbar\n\n\n    (function (item) {\n      var el;\n\n      if (item === '|') {\n        el = createSep();\n      } else {\n        el = createToolbarButton(item, self.options.toolbarTips, self.options.shortcuts);\n      } // bind events, special for info\n\n\n      if (item.action) {\n        if (typeof item.action === 'function') {\n          el.onclick = function (e) {\n            e.preventDefault();\n            item.action(self);\n          };\n        } else if (typeof item.action === 'string') {\n          el.onclick = function (e) {\n            e.preventDefault();\n            window.open(item.action, '_blank');\n          };\n        }\n      }\n\n      toolbarData[item.name || item] = el;\n      bar.appendChild(el); // Create the input element (ie. <input type='file'>), used among\n      // with the 'import-image' icon to open the browse-file window.\n\n      if (item.name === 'upload-image') {\n        var imageInput = document.createElement('input');\n        imageInput.className = 'imageInput';\n        imageInput.type = 'file';\n        imageInput.multiple = true;\n        imageInput.name = 'image';\n        imageInput.accept = self.options.imageAccept;\n        imageInput.style.display = 'none';\n        imageInput.style.opacity = 0;\n        bar.appendChild(imageInput);\n      }\n    })(items[i]);\n  }\n\n  self.toolbarElements = toolbarData;\n  var cm = this.codemirror;\n  cm.on('cursorActivity', function () {\n    var stat = getState(cm);\n\n    for (var key in toolbarData) {\n      (function (key) {\n        var el = toolbarData[key];\n\n        if (stat[key]) {\n          el.className += ' active';\n        } else if (key != 'fullscreen' && key != 'side-by-side') {\n          el.className = el.className.replace(/\\s*active\\s*/g, '');\n        }\n      })(key);\n    }\n  });\n  var cmWrapper = cm.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper);\n  return bar;\n};\n\nEasyMDE.prototype.createStatusbar = function (status) {\n  // Initialize\n  status = status || this.options.status;\n  var options = this.options;\n  var cm = this.codemirror; // Make sure the status variable is valid\n\n  if (!status || status.length === 0) {\n    return;\n  } // Set up the built-in items\n\n\n  var items = [];\n  var i, onUpdate, defaultValue;\n\n  for (i = 0; i < status.length; i++) {\n    // Reset some values\n    onUpdate = undefined;\n    defaultValue = undefined; // Handle if custom or not\n\n    if (typeof status[i] === 'object') {\n      items.push({\n        className: status[i].className,\n        defaultValue: status[i].defaultValue,\n        onUpdate: status[i].onUpdate\n      });\n    } else {\n      var name = status[i];\n\n      if (name === 'words') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n      } else if (name === 'lines') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = cm.lineCount();\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = cm.lineCount();\n        };\n      } else if (name === 'cursor') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = '0:0';\n        };\n\n        onUpdate = function onUpdate(el) {\n          var pos = cm.getCursor();\n          el.innerHTML = pos.line + ':' + pos.ch;\n        };\n      } else if (name === 'autosave') {\n        defaultValue = function defaultValue(el) {\n          if (options.autosave != undefined && options.autosave.enabled === true) {\n            el.setAttribute('id', 'autosaved');\n          }\n        };\n      } else if (name === 'upload-image') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = options.imageTexts.sbInit;\n        };\n      }\n\n      items.push({\n        className: name,\n        defaultValue: defaultValue,\n        onUpdate: onUpdate\n      });\n    }\n  } // Create element for the status bar\n\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-statusbar'; // Create a new span for each item\n\n  for (i = 0; i < items.length; i++) {\n    // Store in temporary variable\n    var item = items[i]; // Create span element\n\n    var el = document.createElement('span');\n    el.className = item.className; // Ensure the defaultValue is a function\n\n    if (typeof item.defaultValue === 'function') {\n      item.defaultValue(el);\n    } // Ensure the onUpdate is a function\n\n\n    if (typeof item.onUpdate === 'function') {\n      // Create a closure around the span of the current action, then execute the onUpdate handler\n      this.codemirror.on('update', function (el, item) {\n        return function () {\n          item.onUpdate(el);\n        };\n      }(el, item));\n    } // Append the item to the status bar\n\n\n    bar.appendChild(el);\n  } // Insert the status bar into the DOM\n\n\n  var cmWrapper = this.codemirror.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper.nextSibling);\n  return bar;\n};\n/**\n * Get or set the text content.\n */\n\n\nEasyMDE.prototype.value = function (val) {\n  var cm = this.codemirror;\n\n  if (val === undefined) {\n    return cm.getValue();\n  } else {\n    cm.getDoc().setValue(val);\n\n    if (this.isPreviewActive()) {\n      var wrapper = cm.getWrapperElement();\n      var preview = wrapper.lastChild;\n      preview.innerHTML = this.options.previewRender(val, preview);\n    }\n\n    return this;\n  }\n};\n/**\n * Bind static methods for exports.\n */\n\n\nEasyMDE.toggleBold = toggleBold;\nEasyMDE.toggleItalic = toggleItalic;\nEasyMDE.toggleStrikethrough = toggleStrikethrough;\nEasyMDE.toggleBlockquote = toggleBlockquote;\nEasyMDE.toggleHeadingSmaller = toggleHeadingSmaller;\nEasyMDE.toggleHeadingBigger = toggleHeadingBigger;\nEasyMDE.toggleHeading1 = toggleHeading1;\nEasyMDE.toggleHeading2 = toggleHeading2;\nEasyMDE.toggleHeading3 = toggleHeading3;\nEasyMDE.toggleCodeBlock = toggleCodeBlock;\nEasyMDE.toggleUnorderedList = toggleUnorderedList;\nEasyMDE.toggleOrderedList = toggleOrderedList;\nEasyMDE.cleanBlock = cleanBlock;\nEasyMDE.drawLink = drawLink;\nEasyMDE.drawImage = drawImage;\nEasyMDE.drawTable = drawTable;\nEasyMDE.drawHorizontalRule = drawHorizontalRule;\nEasyMDE.undo = undo;\nEasyMDE.redo = redo;\nEasyMDE.togglePreview = togglePreview;\nEasyMDE.toggleSideBySide = toggleSideBySide;\nEasyMDE.toggleFullScreen = toggleFullScreen;\n/**\n * Bind instance methods for exports.\n */\n\nEasyMDE.prototype.toggleBold = function () {\n  toggleBold(this);\n};\n\nEasyMDE.prototype.toggleItalic = function () {\n  toggleItalic(this);\n};\n\nEasyMDE.prototype.toggleStrikethrough = function () {\n  toggleStrikethrough(this);\n};\n\nEasyMDE.prototype.toggleBlockquote = function () {\n  toggleBlockquote(this);\n};\n\nEasyMDE.prototype.toggleHeadingSmaller = function () {\n  toggleHeadingSmaller(this);\n};\n\nEasyMDE.prototype.toggleHeadingBigger = function () {\n  toggleHeadingBigger(this);\n};\n\nEasyMDE.prototype.toggleHeading1 = function () {\n  toggleHeading1(this);\n};\n\nEasyMDE.prototype.toggleHeading2 = function () {\n  toggleHeading2(this);\n};\n\nEasyMDE.prototype.toggleHeading3 = function () {\n  toggleHeading3(this);\n};\n\nEasyMDE.prototype.toggleCodeBlock = function () {\n  toggleCodeBlock(this);\n};\n\nEasyMDE.prototype.toggleUnorderedList = function () {\n  toggleUnorderedList(this);\n};\n\nEasyMDE.prototype.toggleOrderedList = function () {\n  toggleOrderedList(this);\n};\n\nEasyMDE.prototype.cleanBlock = function () {\n  cleanBlock(this);\n};\n\nEasyMDE.prototype.drawLink = function () {\n  drawLink(this);\n};\n\nEasyMDE.prototype.drawImage = function () {\n  drawImage(this);\n};\n\nEasyMDE.prototype.drawTable = function () {\n  drawTable(this);\n};\n\nEasyMDE.prototype.drawHorizontalRule = function () {\n  drawHorizontalRule(this);\n};\n\nEasyMDE.prototype.undo = function () {\n  undo(this);\n};\n\nEasyMDE.prototype.redo = function () {\n  redo(this);\n};\n\nEasyMDE.prototype.togglePreview = function () {\n  togglePreview(this);\n};\n\nEasyMDE.prototype.toggleSideBySide = function () {\n  toggleSideBySide(this);\n};\n\nEasyMDE.prototype.toggleFullScreen = function () {\n  toggleFullScreen(this);\n};\n\nEasyMDE.prototype.isPreviewActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.lastChild;\n  return /editor-preview-active/.test(preview.className);\n};\n\nEasyMDE.prototype.isSideBySideActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  return /editor-preview-active-side/.test(preview.className);\n};\n\nEasyMDE.prototype.isFullscreenActive = function () {\n  var cm = this.codemirror;\n  return cm.getOption('fullScreen');\n};\n\nEasyMDE.prototype.getState = function () {\n  var cm = this.codemirror;\n  return getState(cm);\n};\n\nEasyMDE.prototype.toTextArea = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n\n  if (wrapper.parentNode) {\n    if (this.gui.toolbar) {\n      wrapper.parentNode.removeChild(this.gui.toolbar);\n    }\n\n    if (this.gui.statusbar) {\n      wrapper.parentNode.removeChild(this.gui.statusbar);\n    }\n\n    if (this.gui.sideBySide) {\n      wrapper.parentNode.removeChild(this.gui.sideBySide);\n    }\n  }\n\n  cm.toTextArea();\n\n  if (this.autosaveTimeoutId) {\n    clearTimeout(this.autosaveTimeoutId);\n    this.autosaveTimeoutId = undefined;\n    this.clearAutosavedValue();\n  }\n};\n\nmodule.exports = EasyMDE;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function (cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(),\n        replacements = [];\n\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head; // If we're not in Markdown mode, fall back to normal newlineAndIndent\n\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n      var line = cm.getLine(pos.line),\n          match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n\n      if (!ranges[i].empty() || !inList && !inQuote || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n\n      if (emptyListRE.test(line)) {\n        if (!/>\\s*$/.test(line)) cm.replaceRange(\"\", {\n          line: pos.line,\n          ch: 0\n        }, {\n          line: pos.line,\n          ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var indent = match[1],\n            after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet = numbered ? parseInt(match[3], 10) + 1 + match[4] : match[2].replace(\"x\", \" \");\n        replacements[i] = \"\\n\" + indent + bullet + after;\n        if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  }; // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n\n\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line,\n        lookAhead = 0,\n        skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)),\n        startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber),\n          nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = parseInt(startItem[3], 10) + lookAhead - skipCount;\n        var nextNumber = parseInt(nextItem[3], 10),\n            itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]), {\n            line: nextLineNumber,\n            ch: 0\n          }, {\n            line: nextLineNumber,\n            ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return; // This doesn't run if the next line immediatley indents, as it is\n          // not clear of the users intention (new indented item or same level)\n\n          if (startIndent.length < nextIndent.length && lookAhead === 1) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\nvar CodeMirror = require('codemirror');\n\nCodeMirror.commands.tabAndIndentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentMore');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};\n\nCodeMirror.commands.shiftTabAndUnindentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentLess');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function (cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {\n      scrollTop: window.pageYOffset,\n      scrollLeft: window.pageXOffset,\n      width: wrap.style.width,\n      height: wrap.style.height\n    };\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width;\n    wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [{\n    name: \"APL\",\n    mime: \"text/apl\",\n    mode: \"apl\",\n    ext: [\"dyalog\", \"apl\"]\n  }, {\n    name: \"PGP\",\n    mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"],\n    mode: \"asciiarmor\",\n    ext: [\"asc\", \"pgp\", \"sig\"]\n  }, {\n    name: \"ASN.1\",\n    mime: \"text/x-ttcn-asn\",\n    mode: \"asn.1\",\n    ext: [\"asn\", \"asn1\"]\n  }, {\n    name: \"Asterisk\",\n    mime: \"text/x-asterisk\",\n    mode: \"asterisk\",\n    file: /^extensions\\.conf$/i\n  }, {\n    name: \"Brainfuck\",\n    mime: \"text/x-brainfuck\",\n    mode: \"brainfuck\",\n    ext: [\"b\", \"bf\"]\n  }, {\n    name: \"C\",\n    mime: \"text/x-csrc\",\n    mode: \"clike\",\n    ext: [\"c\", \"h\", \"ino\"]\n  }, {\n    name: \"C++\",\n    mime: \"text/x-c++src\",\n    mode: \"clike\",\n    ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"],\n    alias: [\"cpp\"]\n  }, {\n    name: \"Cobol\",\n    mime: \"text/x-cobol\",\n    mode: \"cobol\",\n    ext: [\"cob\", \"cpy\"]\n  }, {\n    name: \"C#\",\n    mime: \"text/x-csharp\",\n    mode: \"clike\",\n    ext: [\"cs\"],\n    alias: [\"csharp\", \"cs\"]\n  }, {\n    name: \"Clojure\",\n    mime: \"text/x-clojure\",\n    mode: \"clojure\",\n    ext: [\"clj\", \"cljc\", \"cljx\"]\n  }, {\n    name: \"ClojureScript\",\n    mime: \"text/x-clojurescript\",\n    mode: \"clojure\",\n    ext: [\"cljs\"]\n  }, {\n    name: \"Closure Stylesheets (GSS)\",\n    mime: \"text/x-gss\",\n    mode: \"css\",\n    ext: [\"gss\"]\n  }, {\n    name: \"CMake\",\n    mime: \"text/x-cmake\",\n    mode: \"cmake\",\n    ext: [\"cmake\", \"cmake.in\"],\n    file: /^CMakeLists.txt$/\n  }, {\n    name: \"CoffeeScript\",\n    mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"],\n    mode: \"coffeescript\",\n    ext: [\"coffee\"],\n    alias: [\"coffee\", \"coffee-script\"]\n  }, {\n    name: \"Common Lisp\",\n    mime: \"text/x-common-lisp\",\n    mode: \"commonlisp\",\n    ext: [\"cl\", \"lisp\", \"el\"],\n    alias: [\"lisp\"]\n  }, {\n    name: \"Cypher\",\n    mime: \"application/x-cypher-query\",\n    mode: \"cypher\",\n    ext: [\"cyp\", \"cypher\"]\n  }, {\n    name: \"Cython\",\n    mime: \"text/x-cython\",\n    mode: \"python\",\n    ext: [\"pyx\", \"pxd\", \"pxi\"]\n  }, {\n    name: \"Crystal\",\n    mime: \"text/x-crystal\",\n    mode: \"crystal\",\n    ext: [\"cr\"]\n  }, {\n    name: \"CSS\",\n    mime: \"text/css\",\n    mode: \"css\",\n    ext: [\"css\"]\n  }, {\n    name: \"CQL\",\n    mime: \"text/x-cassandra\",\n    mode: \"sql\",\n    ext: [\"cql\"]\n  }, {\n    name: \"D\",\n    mime: \"text/x-d\",\n    mode: \"d\",\n    ext: [\"d\"]\n  }, {\n    name: \"Dart\",\n    mimes: [\"application/dart\", \"text/x-dart\"],\n    mode: \"dart\",\n    ext: [\"dart\"]\n  }, {\n    name: \"diff\",\n    mime: \"text/x-diff\",\n    mode: \"diff\",\n    ext: [\"diff\", \"patch\"]\n  }, {\n    name: \"Django\",\n    mime: \"text/x-django\",\n    mode: \"django\"\n  }, {\n    name: \"Dockerfile\",\n    mime: \"text/x-dockerfile\",\n    mode: \"dockerfile\",\n    file: /^Dockerfile$/\n  }, {\n    name: \"DTD\",\n    mime: \"application/xml-dtd\",\n    mode: \"dtd\",\n    ext: [\"dtd\"]\n  }, {\n    name: \"Dylan\",\n    mime: \"text/x-dylan\",\n    mode: \"dylan\",\n    ext: [\"dylan\", \"dyl\", \"intr\"]\n  }, {\n    name: \"EBNF\",\n    mime: \"text/x-ebnf\",\n    mode: \"ebnf\"\n  }, {\n    name: \"ECL\",\n    mime: \"text/x-ecl\",\n    mode: \"ecl\",\n    ext: [\"ecl\"]\n  }, {\n    name: \"edn\",\n    mime: \"application/edn\",\n    mode: \"clojure\",\n    ext: [\"edn\"]\n  }, {\n    name: \"Eiffel\",\n    mime: \"text/x-eiffel\",\n    mode: \"eiffel\",\n    ext: [\"e\"]\n  }, {\n    name: \"Elm\",\n    mime: \"text/x-elm\",\n    mode: \"elm\",\n    ext: [\"elm\"]\n  }, {\n    name: \"Embedded Javascript\",\n    mime: \"application/x-ejs\",\n    mode: \"htmlembedded\",\n    ext: [\"ejs\"]\n  }, {\n    name: \"Embedded Ruby\",\n    mime: \"application/x-erb\",\n    mode: \"htmlembedded\",\n    ext: [\"erb\"]\n  }, {\n    name: \"Erlang\",\n    mime: \"text/x-erlang\",\n    mode: \"erlang\",\n    ext: [\"erl\"]\n  }, {\n    name: \"Esper\",\n    mime: \"text/x-esper\",\n    mode: \"sql\"\n  }, {\n    name: \"Factor\",\n    mime: \"text/x-factor\",\n    mode: \"factor\",\n    ext: [\"factor\"]\n  }, {\n    name: \"FCL\",\n    mime: \"text/x-fcl\",\n    mode: \"fcl\"\n  }, {\n    name: \"Forth\",\n    mime: \"text/x-forth\",\n    mode: \"forth\",\n    ext: [\"forth\", \"fth\", \"4th\"]\n  }, {\n    name: \"Fortran\",\n    mime: \"text/x-fortran\",\n    mode: \"fortran\",\n    ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]\n  }, {\n    name: \"F#\",\n    mime: \"text/x-fsharp\",\n    mode: \"mllike\",\n    ext: [\"fs\"],\n    alias: [\"fsharp\"]\n  }, {\n    name: \"Gas\",\n    mime: \"text/x-gas\",\n    mode: \"gas\",\n    ext: [\"s\"]\n  }, {\n    name: \"Gherkin\",\n    mime: \"text/x-feature\",\n    mode: \"gherkin\",\n    ext: [\"feature\"]\n  }, {\n    name: \"GitHub Flavored Markdown\",\n    mime: \"text/x-gfm\",\n    mode: \"gfm\",\n    file: /^(readme|contributing|history).md$/i\n  }, {\n    name: \"Go\",\n    mime: \"text/x-go\",\n    mode: \"go\",\n    ext: [\"go\"]\n  }, {\n    name: \"Groovy\",\n    mime: \"text/x-groovy\",\n    mode: \"groovy\",\n    ext: [\"groovy\", \"gradle\"],\n    file: /^Jenkinsfile$/\n  }, {\n    name: \"HAML\",\n    mime: \"text/x-haml\",\n    mode: \"haml\",\n    ext: [\"haml\"]\n  }, {\n    name: \"Haskell\",\n    mime: \"text/x-haskell\",\n    mode: \"haskell\",\n    ext: [\"hs\"]\n  }, {\n    name: \"Haskell (Literate)\",\n    mime: \"text/x-literate-haskell\",\n    mode: \"haskell-literate\",\n    ext: [\"lhs\"]\n  }, {\n    name: \"Haxe\",\n    mime: \"text/x-haxe\",\n    mode: \"haxe\",\n    ext: [\"hx\"]\n  }, {\n    name: \"HXML\",\n    mime: \"text/x-hxml\",\n    mode: \"haxe\",\n    ext: [\"hxml\"]\n  }, {\n    name: \"ASP.NET\",\n    mime: \"application/x-aspx\",\n    mode: \"htmlembedded\",\n    ext: [\"aspx\"],\n    alias: [\"asp\", \"aspx\"]\n  }, {\n    name: \"HTML\",\n    mime: \"text/html\",\n    mode: \"htmlmixed\",\n    ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"],\n    alias: [\"xhtml\"]\n  }, {\n    name: \"HTTP\",\n    mime: \"message/http\",\n    mode: \"http\"\n  }, {\n    name: \"IDL\",\n    mime: \"text/x-idl\",\n    mode: \"idl\",\n    ext: [\"pro\"]\n  }, {\n    name: \"Pug\",\n    mime: \"text/x-pug\",\n    mode: \"pug\",\n    ext: [\"jade\", \"pug\"],\n    alias: [\"jade\"]\n  }, {\n    name: \"Java\",\n    mime: \"text/x-java\",\n    mode: \"clike\",\n    ext: [\"java\"]\n  }, {\n    name: \"Java Server Pages\",\n    mime: \"application/x-jsp\",\n    mode: \"htmlembedded\",\n    ext: [\"jsp\"],\n    alias: [\"jsp\"]\n  }, {\n    name: \"JavaScript\",\n    mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n    mode: \"javascript\",\n    ext: [\"js\"],\n    alias: [\"ecmascript\", \"js\", \"node\"]\n  }, {\n    name: \"JSON\",\n    mimes: [\"application/json\", \"application/x-json\"],\n    mode: \"javascript\",\n    ext: [\"json\", \"map\"],\n    alias: [\"json5\"]\n  }, {\n    name: \"JSON-LD\",\n    mime: \"application/ld+json\",\n    mode: \"javascript\",\n    ext: [\"jsonld\"],\n    alias: [\"jsonld\"]\n  }, {\n    name: \"JSX\",\n    mime: \"text/jsx\",\n    mode: \"jsx\",\n    ext: [\"jsx\"]\n  }, {\n    name: \"Jinja2\",\n    mime: \"text/jinja2\",\n    mode: \"jinja2\",\n    ext: [\"j2\", \"jinja\", \"jinja2\"]\n  }, {\n    name: \"Julia\",\n    mime: \"text/x-julia\",\n    mode: \"julia\",\n    ext: [\"jl\"]\n  }, {\n    name: \"Kotlin\",\n    mime: \"text/x-kotlin\",\n    mode: \"clike\",\n    ext: [\"kt\"]\n  }, {\n    name: \"LESS\",\n    mime: \"text/x-less\",\n    mode: \"css\",\n    ext: [\"less\"]\n  }, {\n    name: \"LiveScript\",\n    mime: \"text/x-livescript\",\n    mode: \"livescript\",\n    ext: [\"ls\"],\n    alias: [\"ls\"]\n  }, {\n    name: \"Lua\",\n    mime: \"text/x-lua\",\n    mode: \"lua\",\n    ext: [\"lua\"]\n  }, {\n    name: \"Markdown\",\n    mime: \"text/x-markdown\",\n    mode: \"markdown\",\n    ext: [\"markdown\", \"md\", \"mkd\"]\n  }, {\n    name: \"mIRC\",\n    mime: \"text/mirc\",\n    mode: \"mirc\"\n  }, {\n    name: \"MariaDB SQL\",\n    mime: \"text/x-mariadb\",\n    mode: \"sql\"\n  }, {\n    name: \"Mathematica\",\n    mime: \"text/x-mathematica\",\n    mode: \"mathematica\",\n    ext: [\"m\", \"nb\", \"wl\", \"wls\"]\n  }, {\n    name: \"Modelica\",\n    mime: \"text/x-modelica\",\n    mode: \"modelica\",\n    ext: [\"mo\"]\n  }, {\n    name: \"MUMPS\",\n    mime: \"text/x-mumps\",\n    mode: \"mumps\",\n    ext: [\"mps\"]\n  }, {\n    name: \"MS SQL\",\n    mime: \"text/x-mssql\",\n    mode: \"sql\"\n  }, {\n    name: \"mbox\",\n    mime: \"application/mbox\",\n    mode: \"mbox\",\n    ext: [\"mbox\"]\n  }, {\n    name: \"MySQL\",\n    mime: \"text/x-mysql\",\n    mode: \"sql\"\n  }, {\n    name: \"Nginx\",\n    mime: \"text/x-nginx-conf\",\n    mode: \"nginx\",\n    file: /nginx.*\\.conf$/i\n  }, {\n    name: \"NSIS\",\n    mime: \"text/x-nsis\",\n    mode: \"nsis\",\n    ext: [\"nsh\", \"nsi\"]\n  }, {\n    name: \"NTriples\",\n    mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n    mode: \"ntriples\",\n    ext: [\"nt\", \"nq\"]\n  }, {\n    name: \"Objective-C\",\n    mime: \"text/x-objectivec\",\n    mode: \"clike\",\n    ext: [\"m\"],\n    alias: [\"objective-c\", \"objc\"]\n  }, {\n    name: \"Objective-C++\",\n    mime: \"text/x-objectivec++\",\n    mode: \"clike\",\n    ext: [\"mm\"],\n    alias: [\"objective-c++\", \"objc++\"]\n  }, {\n    name: \"OCaml\",\n    mime: \"text/x-ocaml\",\n    mode: \"mllike\",\n    ext: [\"ml\", \"mli\", \"mll\", \"mly\"]\n  }, {\n    name: \"Octave\",\n    mime: \"text/x-octave\",\n    mode: \"octave\",\n    ext: [\"m\"]\n  }, {\n    name: \"Oz\",\n    mime: \"text/x-oz\",\n    mode: \"oz\",\n    ext: [\"oz\"]\n  }, {\n    name: \"Pascal\",\n    mime: \"text/x-pascal\",\n    mode: \"pascal\",\n    ext: [\"p\", \"pas\"]\n  }, {\n    name: \"PEG.js\",\n    mime: \"null\",\n    mode: \"pegjs\",\n    ext: [\"jsonld\"]\n  }, {\n    name: \"Perl\",\n    mime: \"text/x-perl\",\n    mode: \"perl\",\n    ext: [\"pl\", \"pm\"]\n  }, {\n    name: \"PHP\",\n    mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"],\n    mode: \"php\",\n    ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]\n  }, {\n    name: \"Pig\",\n    mime: \"text/x-pig\",\n    mode: \"pig\",\n    ext: [\"pig\"]\n  }, {\n    name: \"Plain Text\",\n    mime: \"text/plain\",\n    mode: \"null\",\n    ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]\n  }, {\n    name: \"PLSQL\",\n    mime: \"text/x-plsql\",\n    mode: \"sql\",\n    ext: [\"pls\"]\n  }, {\n    name: \"PostgreSQL\",\n    mime: \"text/x-pgsql\",\n    mode: \"sql\"\n  }, {\n    name: \"PowerShell\",\n    mime: \"application/x-powershell\",\n    mode: \"powershell\",\n    ext: [\"ps1\", \"psd1\", \"psm1\"]\n  }, {\n    name: \"Properties files\",\n    mime: \"text/x-properties\",\n    mode: \"properties\",\n    ext: [\"properties\", \"ini\", \"in\"],\n    alias: [\"ini\", \"properties\"]\n  }, {\n    name: \"ProtoBuf\",\n    mime: \"text/x-protobuf\",\n    mode: \"protobuf\",\n    ext: [\"proto\"]\n  }, {\n    name: \"Python\",\n    mime: \"text/x-python\",\n    mode: \"python\",\n    ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"],\n    file: /^(BUCK|BUILD)$/\n  }, {\n    name: \"Puppet\",\n    mime: \"text/x-puppet\",\n    mode: \"puppet\",\n    ext: [\"pp\"]\n  }, {\n    name: \"Q\",\n    mime: \"text/x-q\",\n    mode: \"q\",\n    ext: [\"q\"]\n  }, {\n    name: \"R\",\n    mime: \"text/x-rsrc\",\n    mode: \"r\",\n    ext: [\"r\", \"R\"],\n    alias: [\"rscript\"]\n  }, {\n    name: \"reStructuredText\",\n    mime: \"text/x-rst\",\n    mode: \"rst\",\n    ext: [\"rst\"],\n    alias: [\"rst\"]\n  }, {\n    name: \"RPM Changes\",\n    mime: \"text/x-rpm-changes\",\n    mode: \"rpm\"\n  }, {\n    name: \"RPM Spec\",\n    mime: \"text/x-rpm-spec\",\n    mode: \"rpm\",\n    ext: [\"spec\"]\n  }, {\n    name: \"Ruby\",\n    mime: \"text/x-ruby\",\n    mode: \"ruby\",\n    ext: [\"rb\"],\n    alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]\n  }, {\n    name: \"Rust\",\n    mime: \"text/x-rustsrc\",\n    mode: \"rust\",\n    ext: [\"rs\"]\n  }, {\n    name: \"SAS\",\n    mime: \"text/x-sas\",\n    mode: \"sas\",\n    ext: [\"sas\"]\n  }, {\n    name: \"Sass\",\n    mime: \"text/x-sass\",\n    mode: \"sass\",\n    ext: [\"sass\"]\n  }, {\n    name: \"Scala\",\n    mime: \"text/x-scala\",\n    mode: \"clike\",\n    ext: [\"scala\"]\n  }, {\n    name: \"Scheme\",\n    mime: \"text/x-scheme\",\n    mode: \"scheme\",\n    ext: [\"scm\", \"ss\"]\n  }, {\n    name: \"SCSS\",\n    mime: \"text/x-scss\",\n    mode: \"css\",\n    ext: [\"scss\"]\n  }, {\n    name: \"Shell\",\n    mimes: [\"text/x-sh\", \"application/x-sh\"],\n    mode: \"shell\",\n    ext: [\"sh\", \"ksh\", \"bash\"],\n    alias: [\"bash\", \"sh\", \"zsh\"],\n    file: /^PKGBUILD$/\n  }, {\n    name: \"Sieve\",\n    mime: \"application/sieve\",\n    mode: \"sieve\",\n    ext: [\"siv\", \"sieve\"]\n  }, {\n    name: \"Slim\",\n    mimes: [\"text/x-slim\", \"application/x-slim\"],\n    mode: \"slim\",\n    ext: [\"slim\"]\n  }, {\n    name: \"Smalltalk\",\n    mime: \"text/x-stsrc\",\n    mode: \"smalltalk\",\n    ext: [\"st\"]\n  }, {\n    name: \"Smarty\",\n    mime: \"text/x-smarty\",\n    mode: \"smarty\",\n    ext: [\"tpl\"]\n  }, {\n    name: \"Solr\",\n    mime: \"text/x-solr\",\n    mode: \"solr\"\n  }, {\n    name: \"SML\",\n    mime: \"text/x-sml\",\n    mode: \"mllike\",\n    ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]\n  }, {\n    name: \"Soy\",\n    mime: \"text/x-soy\",\n    mode: \"soy\",\n    ext: [\"soy\"],\n    alias: [\"closure template\"]\n  }, {\n    name: \"SPARQL\",\n    mime: \"application/sparql-query\",\n    mode: \"sparql\",\n    ext: [\"rq\", \"sparql\"],\n    alias: [\"sparul\"]\n  }, {\n    name: \"Spreadsheet\",\n    mime: \"text/x-spreadsheet\",\n    mode: \"spreadsheet\",\n    alias: [\"excel\", \"formula\"]\n  }, {\n    name: \"SQL\",\n    mime: \"text/x-sql\",\n    mode: \"sql\",\n    ext: [\"sql\"]\n  }, {\n    name: \"SQLite\",\n    mime: \"text/x-sqlite\",\n    mode: \"sql\"\n  }, {\n    name: \"Squirrel\",\n    mime: \"text/x-squirrel\",\n    mode: \"clike\",\n    ext: [\"nut\"]\n  }, {\n    name: \"Stylus\",\n    mime: \"text/x-styl\",\n    mode: \"stylus\",\n    ext: [\"styl\"]\n  }, {\n    name: \"Swift\",\n    mime: \"text/x-swift\",\n    mode: \"swift\",\n    ext: [\"swift\"]\n  }, {\n    name: \"sTeX\",\n    mime: \"text/x-stex\",\n    mode: \"stex\"\n  }, {\n    name: \"LaTeX\",\n    mime: \"text/x-latex\",\n    mode: \"stex\",\n    ext: [\"text\", \"ltx\", \"tex\"],\n    alias: [\"tex\"]\n  }, {\n    name: \"SystemVerilog\",\n    mime: \"text/x-systemverilog\",\n    mode: \"verilog\",\n    ext: [\"v\", \"sv\", \"svh\"]\n  }, {\n    name: \"Tcl\",\n    mime: \"text/x-tcl\",\n    mode: \"tcl\",\n    ext: [\"tcl\"]\n  }, {\n    name: \"Textile\",\n    mime: \"text/x-textile\",\n    mode: \"textile\",\n    ext: [\"textile\"]\n  }, {\n    name: \"TiddlyWiki \",\n    mime: \"text/x-tiddlywiki\",\n    mode: \"tiddlywiki\"\n  }, {\n    name: \"Tiki wiki\",\n    mime: \"text/tiki\",\n    mode: \"tiki\"\n  }, {\n    name: \"TOML\",\n    mime: \"text/x-toml\",\n    mode: \"toml\",\n    ext: [\"toml\"]\n  }, {\n    name: \"Tornado\",\n    mime: \"text/x-tornado\",\n    mode: \"tornado\"\n  }, {\n    name: \"troff\",\n    mime: \"text/troff\",\n    mode: \"troff\",\n    ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n  }, {\n    name: \"TTCN\",\n    mime: \"text/x-ttcn\",\n    mode: \"ttcn\",\n    ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]\n  }, {\n    name: \"TTCN_CFG\",\n    mime: \"text/x-ttcn-cfg\",\n    mode: \"ttcn-cfg\",\n    ext: [\"cfg\"]\n  }, {\n    name: \"Turtle\",\n    mime: \"text/turtle\",\n    mode: \"turtle\",\n    ext: [\"ttl\"]\n  }, {\n    name: \"TypeScript\",\n    mime: \"application/typescript\",\n    mode: \"javascript\",\n    ext: [\"ts\"],\n    alias: [\"ts\"]\n  }, {\n    name: \"TypeScript-JSX\",\n    mime: \"text/typescript-jsx\",\n    mode: \"jsx\",\n    ext: [\"tsx\"],\n    alias: [\"tsx\"]\n  }, {\n    name: \"Twig\",\n    mime: \"text/x-twig\",\n    mode: \"twig\"\n  }, {\n    name: \"Web IDL\",\n    mime: \"text/x-webidl\",\n    mode: \"webidl\",\n    ext: [\"webidl\"]\n  }, {\n    name: \"VB.NET\",\n    mime: \"text/x-vb\",\n    mode: \"vb\",\n    ext: [\"vb\"]\n  }, {\n    name: \"VBScript\",\n    mime: \"text/vbscript\",\n    mode: \"vbscript\",\n    ext: [\"vbs\"]\n  }, {\n    name: \"Velocity\",\n    mime: \"text/velocity\",\n    mode: \"velocity\",\n    ext: [\"vtl\"]\n  }, {\n    name: \"Verilog\",\n    mime: \"text/x-verilog\",\n    mode: \"verilog\",\n    ext: [\"v\"]\n  }, {\n    name: \"VHDL\",\n    mime: \"text/x-vhdl\",\n    mode: \"vhdl\",\n    ext: [\"vhd\", \"vhdl\"]\n  }, {\n    name: \"Vue.js Component\",\n    mimes: [\"script/x-vue\", \"text/x-vue\"],\n    mode: \"vue\",\n    ext: [\"vue\"]\n  }, {\n    name: \"XML\",\n    mimes: [\"application/xml\", \"text/xml\"],\n    mode: \"xml\",\n    ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"],\n    alias: [\"rss\", \"wsdl\", \"xsd\"]\n  }, {\n    name: \"XQuery\",\n    mime: \"application/xquery\",\n    mode: \"xquery\",\n    ext: [\"xy\", \"xquery\"]\n  }, {\n    name: \"Yacas\",\n    mime: \"text/x-yacas\",\n    mode: \"yacas\",\n    ext: [\"ys\"]\n  }, {\n    name: \"YAML\",\n    mimes: [\"text/x-yaml\", \"text/yaml\"],\n    mode: \"yaml\",\n    ext: [\"yaml\", \"yml\"],\n    alias: [\"yml\"]\n  }, {\n    name: \"Z80\",\n    mime: \"text/x-z80\",\n    mode: \"z80\",\n    ext: [\"z80\"]\n  }, {\n    name: \"mscgen\",\n    mime: \"text/x-mscgen\",\n    mode: \"mscgen\",\n    ext: [\"mscgen\", \"mscin\", \"msc\"]\n  }, {\n    name: \"xu\",\n    mime: \"text/x-xu\",\n    mode: \"mscgen\",\n    ext: [\"xu\"]\n  }, {\n    name: \"msgenny\",\n    mime: \"text/x-msgenny\",\n    mode: \"mscgen\",\n    ext: [\"msgenny\"]\n  }]; // Ensure all modes have a mime property for backwards compatibility\n\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function (mime) {\n    mime = mime.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++) {\n        if (info.mimes[j] == mime) return info;\n      }\n    }\n\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\");\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\");\n  };\n\n  CodeMirror.findModeByExtension = function (ext) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++) {\n        if (info.ext[j] == ext) return info;\n      }\n    }\n  };\n\n  CodeMirror.findModeByFileName = function (filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function (name) {\n    name = name.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++) {\n        if (info.alias[j].toLowerCase() == name) return info;\n      }\n    }\n  };\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\");\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder);\n    elt.appendChild(placeHolder);\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(),\n        empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n    if (empty) setPlaceholder(cm);else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return cm.lineCount() === 1 && cm.getLine(0) === \"\";\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"styleSelectedText\", false, function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle = typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection) cm.operation(function () {\n      update(cm);\n    });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length) cm.operation(function () {\n      clear(cm);\n    });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) == 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n\n    for (var line = from.line;;) {\n      var start = line == from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE,\n          atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, {\n        className: cls\n      });\n      if (addAt == null) array.push(mark);else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n\n    for (var i = 0; i < array.length; ++i) {\n      array[i].clear();\n    }\n\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n\n    for (var i = 0; i < ranges.length; i++) {\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n    }\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n    var from = cm.getCursor(\"start\"),\n        to = cm.getCursor(\"end\");\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n    var coverStart = array[0].find(),\n        coverEnd = array[array.length - 1].find();\n    if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE || cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0) return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags;\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\") + (regexp.global ? \"g\" : \"\") + (regexp.multiline ? \"m\" : \"\");\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp),\n        target = current;\n\n    for (var i = 0; i < flags.length; i++) {\n      if (target.indexOf(flags.charAt(i)) == -1) target += flags.charAt(i);\n    }\n\n    return current == target ? regexp : new RegExp(regexp.source, target);\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source);\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch;\n      var string = doc.getLine(line),\n          match = regexp.exec(string);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start);\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunk = 1;\n\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break;\n        var curLine = doc.getLine(line++);\n        string = string == null ? curLine : string + \"\\n\" + curLine;\n      }\n\n      chunk = chunk * 2;\n      regexp.lastIndex = start.ch;\n      var match = regexp.exec(string);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = start.line + before.length - 1,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp) {\n    var cutOff = 0,\n        match;\n\n    for (;;) {\n      regexp.lastIndex = cutOff;\n      var newMatch = regexp.exec(string);\n      if (!newMatch) return match;\n      match = newMatch;\n      cutOff = match.index + (match[0].length || 1);\n      if (cutOff == string.length) return match;\n    }\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line);\n      if (ch > -1) string = string.slice(0, ch);\n      var match = lastMatchIn(string, regexp);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunk = 1;\n\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunk; i++) {\n        var curLine = doc.getLine(line--);\n        string = string == null ? curLine.slice(0, start.ch) : curLine + \"\\n\" + string;\n      }\n\n      chunk *= 2;\n      var match = lastMatchIn(string, regexp);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = line + before.length,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  var doFold, noFold;\n\n  if (String.prototype.normalize) {\n    doFold = function doFold(str) {\n      return str.normalize(\"NFD\").toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str.normalize(\"NFD\");\n    };\n  } else {\n    doFold = function doFold(str) {\n      return str.toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str;\n    };\n  } // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n\n\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos;\n\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min;\n      var mid = min + max >> 1;\n      var len = foldFunc(orig.slice(0, mid)).length;\n      if (len == pos) return mid;else if (len > pos) max = mid;else min = mid + 1;\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch),\n          string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0]);\n        if (found == -1) continue search;\n        var start = adjustPos(orig, string, found, fold) + ch;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)\n        };\n      } else {\n        var cutFrom = string.length - lines[0].length;\n        if (string.slice(cutFrom) != lines[0]) continue search;\n\n        for (var i = 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search;\n        }\n\n        var end = doc.getLine(line + lines.length - 1),\n            endString = fold(end),\n            lastLine = lines[lines.length - 1];\n        if (endString.slice(0, lastLine.length) != lastLine) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n          to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line);\n      if (ch > -1) orig = orig.slice(0, ch);\n      var string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0]);\n        if (found == -1) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold)),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))\n        };\n      } else {\n        var lastLine = lines[lines.length - 1];\n        if (string.slice(0, lastLine.length) != lastLine) continue search;\n\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search;\n        }\n\n        var top = doc.getLine(line + 1 - lines.length),\n            topString = fold(top);\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search;\n        return {\n          from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n          to: Pos(line, adjustPos(orig, string, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false;\n    this.doc = doc;\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {\n      from: pos,\n      to: pos\n    };\n    var caseFold;\n\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold;\n    } else {\n      // Backwards compat for when caseFold was the 4th argument\n      caseFold = options;\n      options = null;\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false;\n\n      this.matches = function (reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold);\n      };\n    } else {\n      query = ensureFlags(query, \"gm\");\n      if (!options || options.multiline !== false) this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos);\n      };else this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos);\n      };\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function findNext() {\n      return this.find(false);\n    },\n    findPrevious: function findPrevious() {\n      return this.find(true);\n    },\n    find: function find(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to)); // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatiblity with the vim code (unfortunately)\n\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1);else if (result.from.line == this.doc.firstLine()) result = null;else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)));\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1);else if (result.to.line == this.doc.lastLine()) result = null;else result = this.matches(reverse, Pos(result.to.line + 1, 0));\n        }\n      }\n\n      if (result) {\n        this.pos = result;\n        this.atOccurrence = true;\n        return this.pos.match || true;\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);\n        this.pos = {\n          from: end,\n          to: end\n        };\n        return this.atOccurrence = false;\n      }\n    },\n    from: function from() {\n      if (this.atOccurrence) return this.pos.from;\n    },\n    to: function to() {\n      if (this.atOccurrence) return this.pos.to;\n    },\n    replace: function replace(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n  CodeMirror.defineExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n  CodeMirror.defineExtension(\"selectMatches\", function (query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({\n        anchor: cur.from(),\n        head: cur.to()\n      });\n    }\n\n    if (ranges.length) this.setSelections(ranges, 0);\n  });\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../markdown/markdown\", \"../../addon/mode/overlay\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i;\n  CodeMirror.defineMode(\"gfm\", function (config, modeConfig) {\n    var codeDepth = 0;\n\n    function blankLine(state) {\n      state.code = false;\n      return null;\n    }\n\n    var gfmOverlay = {\n      startState: function startState() {\n        return {\n          code: false,\n          codeBlock: false,\n          ateSpace: false\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          code: s.code,\n          codeBlock: s.codeBlock,\n          ateSpace: s.ateSpace\n        };\n      },\n      token: function token(stream, state) {\n        state.combineTokens = null; // Hack to prevent formatting override inside code blocks (block and inline)\n\n        if (state.codeBlock) {\n          if (stream.match(/^```+/)) {\n            state.codeBlock = false;\n            return null;\n          }\n\n          stream.skipToEnd();\n          return null;\n        }\n\n        if (stream.sol()) {\n          state.code = false;\n        }\n\n        if (stream.sol() && stream.match(/^```+/)) {\n          stream.skipToEnd();\n          state.codeBlock = true;\n          return null;\n        } // If this block is changed, it may need to be updated in Markdown mode\n\n\n        if (stream.peek() === '`') {\n          stream.next();\n          var before = stream.pos;\n          stream.eatWhile('`');\n          var difference = 1 + stream.pos - before;\n\n          if (!state.code) {\n            codeDepth = difference;\n            state.code = true;\n          } else {\n            if (difference === codeDepth) {\n              // Must be exact\n              state.code = false;\n            }\n          }\n\n          return null;\n        } else if (state.code) {\n          stream.next();\n          return null;\n        } // Check if space. If so, links can be formatted later on\n\n\n        if (stream.eatSpace()) {\n          state.ateSpace = true;\n          return null;\n        }\n\n        if (stream.sol() || state.ateSpace) {\n          state.ateSpace = false;\n\n          if (modeConfig.gitHubSpice !== false) {\n            if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n              // User/Project@SHA\n              // User@SHA\n              // SHA\n              state.combineTokens = true;\n              return \"link\";\n            } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n              // User/Project#Num\n              // User#Num\n              // #Num\n              state.combineTokens = true;\n              return \"link\";\n            }\n          }\n        }\n\n        if (stream.match(urlRE) && stream.string.slice(stream.start - 2, stream.start) != \"](\" && (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n          // URLs\n          // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n          // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n          // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n          state.combineTokens = true;\n          return \"link\";\n        }\n\n        stream.next();\n        return null;\n      },\n      blankLine: blankLine\n    };\n    var markdownConfig = {\n      taskLists: true,\n      strikethrough: true,\n      emoji: true\n    };\n\n    for (var attr in modeConfig) {\n      markdownConfig[attr] = modeConfig[attr];\n    }\n\n    markdownConfig.name = \"markdown\";\n    return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n  }, \"markdown\");\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});","// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\"; // Requires\n\nvar Typo = require(\"typo-js\"); // Create function\n\n\nfunction CodeMirrorSpellChecker(options) {\n  // Initialize\n  options = options || {}; // Verify\n\n  if (typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n    console.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n    return;\n  } // Because some browsers don't support this functionality yet\n\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function () {\n      \"use strict\";\n\n      return String.prototype.indexOf.apply(this, arguments) !== -1;\n    };\n  } // Define the new mode\n\n\n  options.codeMirrorInstance.defineMode(\"spell-checker\", function (config) {\n    // Load AFF/DIC data\n    if (!CodeMirrorSpellChecker.aff_loading) {\n      CodeMirrorSpellChecker.aff_loading = true;\n      var xhr_aff = new XMLHttpRequest();\n      xhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\n      xhr_aff.onload = function () {\n        if (xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n          CodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_aff.send(null);\n    }\n\n    if (!CodeMirrorSpellChecker.dic_loading) {\n      CodeMirrorSpellChecker.dic_loading = true;\n      var xhr_dic = new XMLHttpRequest();\n      xhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\n      xhr_dic.onload = function () {\n        if (xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n          CodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_dic.send(null);\n    } // Define what separates a word\n\n\n    var rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \"; // Create the overlay and such\n\n    var overlay = {\n      token: function token(stream) {\n        var ch = stream.peek();\n        var word = \"\";\n\n        if (rx_word.includes(ch)) {\n          stream.next();\n          return null;\n        }\n\n        while ((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n          word += ch;\n          stream.next();\n        }\n\n        if (CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word)) return \"spell-error\"; // CSS class: cm-spell-error\n\n        return null;\n      }\n    };\n    var mode = options.codeMirrorInstance.getMode(config, config.backdrop || \"text/plain\");\n    return options.codeMirrorInstance.overlayMode(mode, overlay, true);\n  });\n} // Initialize data globally to reduce memory consumption\n\n\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo; // Export\n\nmodule.exports = CodeMirrorSpellChecker;","/* globals chrome: false */\n\n/* globals __dirname: false */\n\n/* globals require: false */\n\n/* globals Buffer: false */\n\n/* globals module: false */\n\n/**\n * Typo is a JavaScript implementation of a spellchecker using hunspell-style \n * dictionaries.\n */\nvar Typo;\n\n(function () {\n  \"use strict\";\n  /**\n   * Typo constructor.\n   *\n   * @param {String} [dictionary] The locale code of the dictionary being used. e.g.,\n   *                              \"en_US\". This is only used to auto-load dictionaries.\n   * @param {String} [affData]    The data from the dictionary's .aff file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .aff\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].aff\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].aff\n   * @param {String} [wordsData]  The data from the dictionary's .dic file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .dic\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].dic\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].dic\n   * @param {Object} [settings]   Constructor settings. Available properties are:\n   *                              {String} [dictionaryPath]: path to load dictionary from in non-chrome\n   *                              environment.\n   *                              {Object} [flags]: flag information.\n   *                              {Boolean} [asyncLoad]: If true, affData and wordsData will be loaded\n   *                              asynchronously.\n   *                              {Function} [loadedCallback]: Called when both affData and wordsData\n   *                              have been loaded. Only used if asyncLoad is set to true. The parameter\n   *                              is the instantiated Typo object.\n   *\n   * @returns {Typo} A Typo object.\n   */\n\n  Typo = function Typo(dictionary, affData, wordsData, settings) {\n    settings = settings || {};\n    this.dictionary = null;\n    this.rules = {};\n    this.dictionaryTable = {};\n    this.compoundRules = [];\n    this.compoundRuleCodes = {};\n    this.replacementTable = [];\n    this.flags = settings.flags || {};\n    this.memoized = {};\n    this.loaded = false;\n    var self = this;\n    var path; // Loop-control variables.\n\n    var i, j, _len, _jlen;\n\n    if (dictionary) {\n      self.dictionary = dictionary; // If the data is preloaded, just setup the Typo object.\n\n      if (affData && wordsData) {\n        setup();\n      } // Loading data for Chrome extentions.\n      else if (typeof window !== 'undefined' && 'chrome' in window && 'extension' in window.chrome && 'getURL' in window.chrome.extension) {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else {\n            path = \"typo/dictionaries\";\n          }\n\n          if (!affData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\"), setAffData);\n          if (!wordsData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\"), setWordsData);\n        } else {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else if (typeof __dirname !== 'undefined') {\n            path = __dirname + '/dictionaries';\n          } else {\n            path = './dictionaries';\n          }\n\n          if (!affData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\", setAffData);\n          if (!wordsData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\", setWordsData);\n        }\n    }\n\n    function readDataFile(url, setFunc) {\n      var response = self._readFile(url, null, settings.asyncLoad);\n\n      if (settings.asyncLoad) {\n        response.then(function (data) {\n          setFunc(data);\n        });\n      } else {\n        setFunc(response);\n      }\n    }\n\n    function setAffData(data) {\n      affData = data;\n\n      if (wordsData) {\n        setup();\n      }\n    }\n\n    function setWordsData(data) {\n      wordsData = data;\n\n      if (affData) {\n        setup();\n      }\n    }\n\n    function setup() {\n      self.rules = self._parseAFF(affData); // Save the rule codes that are used in compound rules.\n\n      self.compoundRuleCodes = {};\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var rule = self.compoundRules[i];\n\n        for (j = 0, _jlen = rule.length; j < _jlen; j++) {\n          self.compoundRuleCodes[rule[j]] = [];\n        }\n      } // If we add this ONLYINCOMPOUND flag to self.compoundRuleCodes, then _parseDIC\n      // will do the work of saving the list of words that are compound-only.\n\n\n      if (\"ONLYINCOMPOUND\" in self.flags) {\n        self.compoundRuleCodes[self.flags.ONLYINCOMPOUND] = [];\n      }\n\n      self.dictionaryTable = self._parseDIC(wordsData); // Get rid of any codes from the compound rule codes that are never used \n      // (or that were special regex characters).  Not especially necessary... \n\n      for (i in self.compoundRuleCodes) {\n        if (self.compoundRuleCodes[i].length === 0) {\n          delete self.compoundRuleCodes[i];\n        }\n      } // Build the full regular expressions for each compound rule.\n      // I have a feeling (but no confirmation yet) that this method of \n      // testing for compound words is probably slow.\n\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var ruleText = self.compoundRules[i];\n        var expressionText = \"\";\n\n        for (j = 0, _jlen = ruleText.length; j < _jlen; j++) {\n          var character = ruleText[j];\n\n          if (character in self.compoundRuleCodes) {\n            expressionText += \"(\" + self.compoundRuleCodes[character].join(\"|\") + \")\";\n          } else {\n            expressionText += character;\n          }\n        }\n\n        self.compoundRules[i] = new RegExp(expressionText, \"i\");\n      }\n\n      self.loaded = true;\n\n      if (settings.asyncLoad && settings.loadedCallback) {\n        settings.loadedCallback(self);\n      }\n    }\n\n    return this;\n  };\n\n  Typo.prototype = {\n    /**\n     * Loads a Typo instance from a hash of all of the Typo properties.\n     *\n     * @param object obj A hash of Typo properties, probably gotten from a JSON.parse(JSON.stringify(typo_instance)).\n     */\n    load: function load(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          this[i] = obj[i];\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Read the contents of a file.\n     * \n     * @param {String} path The path (relative) to the file.\n     * @param {String} [charset=\"ISO8859-1\"] The expected charset of the file\n     * @param {Boolean} async If true, the file will be read asynchronously. For node.js this does nothing, all\n     *        files are read synchronously.\n     * @returns {String} The file data if async is false, otherwise a promise object. If running node.js, the data is\n     *          always returned.\n     */\n    _readFile: function _readFile(path, charset, async) {\n      charset = charset || \"utf8\";\n\n      if (typeof XMLHttpRequest !== 'undefined') {\n        var promise;\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", path, async);\n\n        if (async) {\n          promise = new Promise(function (resolve, reject) {\n            req.onload = function () {\n              if (req.status === 200) {\n                resolve(req.responseText);\n              } else {\n                reject(req.statusText);\n              }\n            };\n\n            req.onerror = function () {\n              reject(req.statusText);\n            };\n          });\n        }\n\n        if (req.overrideMimeType) req.overrideMimeType(\"text/plain; charset=\" + charset);\n        req.send(null);\n        return async ? promise : req.responseText;\n      } else if (typeof require !== 'undefined') {\n        // Node.js\n        var fs = require(\"fs\");\n\n        try {\n          if (fs.existsSync(path)) {\n            var stats = fs.statSync(path);\n            var fileDescriptor = fs.openSync(path, 'r');\n            var buffer = new Buffer(stats.size);\n            fs.readSync(fileDescriptor, buffer, 0, buffer.length, null);\n            return buffer.toString(charset, 0, buffer.length);\n          } else {\n            console.log(\"Path \" + path + \" does not exist.\");\n          }\n        } catch (e) {\n          console.log(e);\n          return '';\n        }\n      }\n    },\n\n    /**\n     * Parse the rules out from a .aff file.\n     *\n     * @param {String} data The contents of the affix file.\n     * @returns object The rules from the file.\n     */\n    _parseAFF: function _parseAFF(data) {\n      var rules = {};\n      var line, subline, numEntries, lineParts;\n\n      var i, j, _len, _jlen; // Remove comment lines\n\n\n      data = this._removeAffixComments(data);\n      var lines = data.split(\"\\n\");\n\n      for (i = 0, _len = lines.length; i < _len; i++) {\n        line = lines[i];\n        var definitionParts = line.split(/\\s+/);\n        var ruleType = definitionParts[0];\n\n        if (ruleType == \"PFX\" || ruleType == \"SFX\") {\n          var ruleCode = definitionParts[1];\n          var combineable = definitionParts[2];\n          numEntries = parseInt(definitionParts[3], 10);\n          var entries = [];\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            subline = lines[j];\n            lineParts = subline.split(/\\s+/);\n            var charactersToRemove = lineParts[2];\n            var additionParts = lineParts[3].split(\"/\");\n            var charactersToAdd = additionParts[0];\n            if (charactersToAdd === \"0\") charactersToAdd = \"\";\n            var continuationClasses = this.parseRuleCodes(additionParts[1]);\n            var regexToMatch = lineParts[4];\n            var entry = {};\n            entry.add = charactersToAdd;\n            if (continuationClasses.length > 0) entry.continuationClasses = continuationClasses;\n\n            if (regexToMatch !== \".\") {\n              if (ruleType === \"SFX\") {\n                entry.match = new RegExp(regexToMatch + \"$\");\n              } else {\n                entry.match = new RegExp(\"^\" + regexToMatch);\n              }\n            }\n\n            if (charactersToRemove != \"0\") {\n              if (ruleType === \"SFX\") {\n                entry.remove = new RegExp(charactersToRemove + \"$\");\n              } else {\n                entry.remove = charactersToRemove;\n              }\n            }\n\n            entries.push(entry);\n          }\n\n          rules[ruleCode] = {\n            \"type\": ruleType,\n            \"combineable\": combineable == \"Y\",\n            \"entries\": entries\n          };\n          i += numEntries;\n        } else if (ruleType === \"COMPOUNDRULE\") {\n          numEntries = parseInt(definitionParts[1], 10);\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            line = lines[j];\n            lineParts = line.split(/\\s+/);\n            this.compoundRules.push(lineParts[1]);\n          }\n\n          i += numEntries;\n        } else if (ruleType === \"REP\") {\n          lineParts = line.split(/\\s+/);\n\n          if (lineParts.length === 3) {\n            this.replacementTable.push([lineParts[1], lineParts[2]]);\n          }\n        } else {\n          // ONLYINCOMPOUND\n          // COMPOUNDMIN\n          // FLAG\n          // KEEPCASE\n          // NEEDAFFIX\n          this.flags[ruleType] = definitionParts[1];\n        }\n      }\n\n      return rules;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from an affix file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeAffixComments: function _removeAffixComments(data) {\n      // Remove comments\n      // This used to remove any string starting with '#' up to the end of the line,\n      // but some COMPOUNDRULE definitions include '#' as part of the rule.\n      // I haven't seen any affix files that use comments on the same line as real data,\n      // so I don't think this will break anything.\n      data = data.replace(/^\\s*#.*$/mg, \"\"); // Trim each line\n\n      data = data.replace(/^\\s\\s*/m, '').replace(/\\s\\s*$/m, ''); // Remove blank lines.\n\n      data = data.replace(/\\n{2,}/g, \"\\n\"); // Trim the entire string\n\n      data = data.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      return data;\n    },\n\n    /**\n     * Parses the words out from the .dic file.\n     *\n     * @param {String} data The data from the dictionary file.\n     * @returns object The lookup table containing all of the words and\n     *                 word forms from the dictionary.\n     */\n    _parseDIC: function _parseDIC(data) {\n      data = this._removeDicComments(data);\n      var lines = data.split(\"\\n\");\n      var dictionaryTable = {};\n\n      function addWord(word, rules) {\n        // Some dictionaries will list the same word multiple times with different rule sets.\n        if (!dictionaryTable.hasOwnProperty(word)) {\n          dictionaryTable[word] = null;\n        }\n\n        if (rules.length > 0) {\n          if (dictionaryTable[word] === null) {\n            dictionaryTable[word] = [];\n          }\n\n          dictionaryTable[word].push(rules);\n        }\n      } // The first line is the number of words in the dictionary.\n\n\n      for (var i = 1, _len = lines.length; i < _len; i++) {\n        var line = lines[i];\n        var parts = line.split(\"/\", 2);\n        var word = parts[0]; // Now for each affix rule, generate that form of the word.\n\n        if (parts.length > 1) {\n          var ruleCodesArray = this.parseRuleCodes(parts[1]); // Save the ruleCodes for compound word situations.\n\n          if (!(\"NEEDAFFIX\" in this.flags) || ruleCodesArray.indexOf(this.flags.NEEDAFFIX) == -1) {\n            addWord(word, ruleCodesArray);\n          }\n\n          for (var j = 0, _jlen = ruleCodesArray.length; j < _jlen; j++) {\n            var code = ruleCodesArray[j];\n            var rule = this.rules[code];\n\n            if (rule) {\n              var newWords = this._applyRule(word, rule);\n\n              for (var ii = 0, _iilen = newWords.length; ii < _iilen; ii++) {\n                var newWord = newWords[ii];\n                addWord(newWord, []);\n\n                if (rule.combineable) {\n                  for (var k = j + 1; k < _jlen; k++) {\n                    var combineCode = ruleCodesArray[k];\n                    var combineRule = this.rules[combineCode];\n\n                    if (combineRule) {\n                      if (combineRule.combineable && rule.type != combineRule.type) {\n                        var otherNewWords = this._applyRule(newWord, combineRule);\n\n                        for (var iii = 0, _iiilen = otherNewWords.length; iii < _iiilen; iii++) {\n                          var otherNewWord = otherNewWords[iii];\n                          addWord(otherNewWord, []);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            if (code in this.compoundRuleCodes) {\n              this.compoundRuleCodes[code].push(word);\n            }\n          }\n        } else {\n          addWord(word.trim(), []);\n        }\n      }\n\n      return dictionaryTable;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from a .dic file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeDicComments: function _removeDicComments(data) {\n      // I can't find any official documentation on it, but at least the de_DE\n      // dictionary uses tab-indented lines as comments.\n      // Remove comments\n      data = data.replace(/^\\t.*$/mg, \"\");\n      return data;\n    },\n    parseRuleCodes: function parseRuleCodes(textCodes) {\n      if (!textCodes) {\n        return [];\n      } else if (!(\"FLAG\" in this.flags)) {\n        return textCodes.split(\"\");\n      } else if (this.flags.FLAG === \"long\") {\n        var flags = [];\n\n        for (var i = 0, _len = textCodes.length; i < _len; i += 2) {\n          flags.push(textCodes.substr(i, 2));\n        }\n\n        return flags;\n      } else if (this.flags.FLAG === \"num\") {\n        return textCodes.split(\",\");\n      }\n    },\n\n    /**\n     * Applies an affix rule to a word.\n     *\n     * @param {String} word The base word.\n     * @param {Object} rule The affix rule.\n     * @returns {String[]} The new words generated by the rule.\n     */\n    _applyRule: function _applyRule(word, rule) {\n      var entries = rule.entries;\n      var newWords = [];\n\n      for (var i = 0, _len = entries.length; i < _len; i++) {\n        var entry = entries[i];\n\n        if (!entry.match || word.match(entry.match)) {\n          var newWord = word;\n\n          if (entry.remove) {\n            newWord = newWord.replace(entry.remove, \"\");\n          }\n\n          if (rule.type === \"SFX\") {\n            newWord = newWord + entry.add;\n          } else {\n            newWord = entry.add + newWord;\n          }\n\n          newWords.push(newWord);\n\n          if (\"continuationClasses\" in entry) {\n            for (var j = 0, _jlen = entry.continuationClasses.length; j < _jlen; j++) {\n              var continuationRule = this.rules[entry.continuationClasses[j]];\n\n              if (continuationRule) {\n                newWords = newWords.concat(this._applyRule(newWord, continuationRule));\n              }\n              /*\n              else {\n              \t// This shouldn't happen, but it does, at least in the de_DE dictionary.\n              \t// I think the author mistakenly supplied lower-case rule codes instead \n              \t// of upper-case.\n              }\n              */\n\n            }\n          }\n        }\n      }\n\n      return newWords;\n    },\n\n    /**\n     * Checks whether a word or a capitalization variant exists in the current dictionary.\n     * The word is trimmed and several variations of capitalizations are checked.\n     * If you want to check a word without any changes made to it, call checkExact()\n     *\n     * @see http://blog.stevenlevithan.com/archives/faster-trim-javascript re:trimming function\n     *\n     * @param {String} aWord The word to check.\n     * @returns {Boolean}\n     */\n    check: function check(aWord) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      } // Remove leading and trailing whitespace\n\n\n      var trimmedWord = aWord.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n      if (this.checkExact(trimmedWord)) {\n        return true;\n      } // The exact word is not in the dictionary.\n\n\n      if (trimmedWord.toUpperCase() === trimmedWord) {\n        // The word was supplied in all uppercase.\n        // Check for a capitalized form of the word.\n        var capitalizedWord = trimmedWord[0] + trimmedWord.substring(1).toLowerCase();\n\n        if (this.hasFlag(capitalizedWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        }\n\n        if (this.checkExact(capitalizedWord)) {\n          return true;\n        }\n      }\n\n      var lowercaseWord = trimmedWord.toLowerCase();\n\n      if (lowercaseWord !== trimmedWord) {\n        if (this.hasFlag(lowercaseWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        } // Check for a lowercase form\n\n\n        if (this.checkExact(lowercaseWord)) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Checks whether a word exists in the current dictionary.\n     *\n     * @param {String} word The word to check.\n     * @returns {Boolean}\n     */\n    checkExact: function checkExact(word) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      var ruleCodes = this.dictionaryTable[word];\n\n      var i, _len;\n\n      if (typeof ruleCodes === 'undefined') {\n        // Check if this might be a compound word.\n        if (\"COMPOUNDMIN\" in this.flags && word.length >= this.flags.COMPOUNDMIN) {\n          for (i = 0, _len = this.compoundRules.length; i < _len; i++) {\n            if (word.match(this.compoundRules[i])) {\n              return true;\n            }\n          }\n        }\n      } else if (ruleCodes === null) {\n        // a null (but not undefined) value for an entry in the dictionary table\n        // means that the word is in the dictionary but has no flags.\n        return true;\n      } else if (typeof ruleCodes === 'object') {\n        // this.dictionary['hasOwnProperty'] will be a function.\n        for (i = 0, _len = ruleCodes.length; i < _len; i++) {\n          if (!this.hasFlag(word, \"ONLYINCOMPOUND\", ruleCodes[i])) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Looks up whether a given word is flagged with a given flag.\n     *\n     * @param {String} word The word in question.\n     * @param {String} flag The flag in question.\n     * @return {Boolean}\n     */\n    hasFlag: function hasFlag(word, flag, wordFlags) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      if (flag in this.flags) {\n        if (typeof wordFlags === 'undefined') {\n          wordFlags = Array.prototype.concat.apply([], this.dictionaryTable[word]);\n        }\n\n        if (wordFlags && wordFlags.indexOf(this.flags[flag]) !== -1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Returns a list of suggestions for a misspelled word.\n     *\n     * @see http://www.norvig.com/spell-correct.html for the basis of this suggestor.\n     * This suggestor is primitive, but it works.\n     *\n     * @param {String} word The misspelling.\n     * @param {Number} [limit=5] The maximum number of suggestions to return.\n     * @returns {String[]} The array of suggestions.\n     */\n    alphabet: \"\",\n    suggest: function suggest(word, limit) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      limit = limit || 5;\n\n      if (this.memoized.hasOwnProperty(word)) {\n        var memoizedLimit = this.memoized[word]['limit']; // Only return the cached list if it's big enough or if there weren't enough suggestions\n        // to fill a smaller limit.\n\n        if (limit <= memoizedLimit || this.memoized[word]['suggestions'].length < memoizedLimit) {\n          return this.memoized[word]['suggestions'].slice(0, limit);\n        }\n      }\n\n      if (this.check(word)) return []; // Check the replacement table.\n\n      for (var i = 0, _len = this.replacementTable.length; i < _len; i++) {\n        var replacementEntry = this.replacementTable[i];\n\n        if (word.indexOf(replacementEntry[0]) !== -1) {\n          var correctedWord = word.replace(replacementEntry[0], replacementEntry[1]);\n\n          if (this.check(correctedWord)) {\n            return [correctedWord];\n          }\n        }\n      }\n\n      var self = this;\n      self.alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n      /*\n      if (!self.alphabet) {\n      \t// Use the alphabet as implicitly defined by the words in the dictionary.\n      \tvar alphaHash = {};\n      \t\n      \tfor (var i in self.dictionaryTable) {\n      \t\tfor (var j = 0, _len = i.length; j < _len; j++) {\n      \t\t\talphaHash[i[j]] = true;\n      \t\t}\n      \t}\n      \t\n      \tfor (var i in alphaHash) {\n      \t\tself.alphabet += i;\n      \t}\n      \t\n      \tvar alphaArray = self.alphabet.split(\"\");\n      \talphaArray.sort();\n      \tself.alphabet = alphaArray.join(\"\");\n      }\n      */\n\n      function edits1(words) {\n        var rv = [];\n\n        var ii, i, j, _iilen, _len, _jlen;\n\n        for (ii = 0, _iilen = words.length; ii < _iilen; ii++) {\n          var word = words[ii];\n\n          for (i = 0, _len = word.length + 1; i < _len; i++) {\n            var s = [word.substring(0, i), word.substring(i)];\n\n            if (s[1]) {\n              rv.push(s[0] + s[1].substring(1));\n            } // Eliminate transpositions of identical letters\n\n\n            if (s[1].length > 1 && s[1][1] !== s[1][0]) {\n              rv.push(s[0] + s[1][1] + s[1][0] + s[1].substring(2));\n            }\n\n            if (s[1]) {\n              for (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n                // Eliminate replacement of a letter by itself\n                if (self.alphabet[j] != s[1].substring(0, 1)) {\n                  rv.push(s[0] + self.alphabet[j] + s[1].substring(1));\n                }\n              }\n            }\n\n            if (s[1]) {\n              for (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n                rv.push(s[0] + self.alphabet[j] + s[1]);\n              }\n            }\n          }\n        }\n\n        return rv;\n      }\n\n      function known(words) {\n        var rv = [];\n\n        for (var i = 0, _len = words.length; i < _len; i++) {\n          if (self.check(words[i])) {\n            rv.push(words[i]);\n          }\n        }\n\n        return rv;\n      }\n\n      function correct(word) {\n        // Get the edit-distance-1 and edit-distance-2 forms of this word.\n        var ed1 = edits1([word]);\n        var ed2 = edits1(ed1);\n        var corrections = known(ed1.concat(ed2));\n\n        var i, _len; // Sort the edits based on how many different ways they were created.\n\n\n        var weighted_corrections = {};\n\n        for (i = 0, _len = corrections.length; i < _len; i++) {\n          if (!(corrections[i] in weighted_corrections)) {\n            weighted_corrections[corrections[i]] = 1;\n          } else {\n            weighted_corrections[corrections[i]] += 1;\n          }\n        }\n\n        var sorted_corrections = [];\n\n        for (i in weighted_corrections) {\n          if (weighted_corrections.hasOwnProperty(i)) {\n            sorted_corrections.push([i, weighted_corrections[i]]);\n          }\n        }\n\n        function sorter(a, b) {\n          if (a[1] < b[1]) {\n            return -1;\n          }\n\n          return 1;\n        }\n\n        sorted_corrections.sort(sorter).reverse();\n        var rv = [];\n        var capitalization_scheme = \"lowercase\";\n\n        if (word.toUpperCase() === word) {\n          capitalization_scheme = \"uppercase\";\n        } else if (word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase() === word) {\n          capitalization_scheme = \"capitalized\";\n        }\n\n        for (i = 0, _len = Math.min(limit, sorted_corrections.length); i < _len; i++) {\n          if (\"uppercase\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].toUpperCase();\n          } else if (\"capitalized\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].substr(0, 1).toUpperCase() + sorted_corrections[i][0].substr(1);\n          }\n\n          if (!self.hasFlag(sorted_corrections[i][0], \"NOSUGGEST\")) {\n            rv.push(sorted_corrections[i][0]);\n          }\n        }\n\n        return rv;\n      }\n\n      this.memoized[word] = {\n        'suggestions': correct(word),\n        'limit': limit\n      };\n      return this.memoized[word]['suggestions'];\n    }\n  };\n})(); // Support for use as a node.js module.\n\n\nif (typeof module !== 'undefined') {\n  module.exports = Typo;\n}","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n;\n\n(function (root) {\n  'use strict';\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^\\n+/,\n    code: /^( {4}[^\\n]+\\n*)+/,\n    fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noop,\n    table: noop,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\n  block.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\n  block.item = edit(block.item, 'gm').replace(/bull/g, block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} +').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n    table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n  });\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n    fences: noop,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Block Lexer\n   */\n\n  function Lexer(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || marked.defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      this.rules = block.gfm;\n    }\n  }\n  /**\n   * Expose Block Rules\n   */\n\n\n  Lexer.rules = block;\n  /**\n   * Static Lex Method\n   */\n\n  Lexer.lex = function (src, options) {\n    var lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n  /**\n   * Preprocessing\n   */\n\n\n  Lexer.prototype.lex = function (src) {\n    src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ').replace(/\\u00a0/g, ' ').replace(/\\u2424/g, '\\n');\n    return this.token(src, true);\n  };\n  /**\n   * Lexing\n   */\n\n\n  Lexer.prototype.token = function (src, top) {\n    src = src.replace(/^ +$/gm, '');\n    var next, loose, cap, bull, b, item, listStart, listItems, t, space, i, tag, l, isordered, istask, ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        var lastToken = this.tokens[this.tokens.length - 1];\n        src = src.substring(cap[0].length); // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          lastToken.text += '\\n' + cap[0].trimRight();\n        } else {\n          cap = cap[0].replace(/^ {4}/gm, '');\n          this.tokens.push({\n            type: 'code',\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic ? rtrim(cap, '\\n') : cap\n          });\n        }\n\n        continue;\n      } // fences\n\n\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      } // heading\n\n\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      } // table no leading pipe (gfm)\n\n\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // hr\n\n\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      } // blockquote\n\n\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n        cap = cap[0].replace(/^ *> ?/gm, ''); // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n\n        this.token(cap, top);\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n        continue;\n      } // list\n\n\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n        this.tokens.push(listStart); // Get each top-level item.\n\n        cap = cap[0].match(this.rules.item);\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i]; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n          listItems.push(t);\n          this.tokens.push(t); // Recurse.\n\n          this.token(item, false);\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n        continue;\n      } // html\n\n\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        });\n        continue;\n      } // def\n\n\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n\n        continue;\n      } // table (gfm)\n\n\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // lheading\n\n\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      } // top-level paragraph\n\n\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        });\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n  /**\n   * Inline-Level Grammar\n   */\n\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noop,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n    em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noop,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n  }; // list of punctuation marks from common mark spec\n  // without ` and ] to workaround Rule 17 (inline code blocks/links)\n\n  inline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\n  inline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', block._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  /**\n   * Inline Lexer & Compiler\n   */\n\n  function InlineLexer(links, options) {\n    this.options = options || marked.defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.renderer = this.options.renderer || new Renderer();\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n  /**\n   * Expose Inline Rules\n   */\n\n\n  InlineLexer.rules = inline;\n  /**\n   * Static Lexing/Compiling Method\n   */\n\n  InlineLexer.output = function (src, links, options) {\n    var inline = new InlineLexer(links, options);\n    return inline.output(src);\n  };\n  /**\n   * Lexing/Compiling\n   */\n\n\n  InlineLexer.prototype.output = function (src) {\n    var out = '',\n        link,\n        text,\n        href,\n        title,\n        cap,\n        prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      } // tag\n\n\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        continue;\n      } // link\n\n\n      if (cap = this.rules.link.exec(src)) {\n        var lastParenIndex = findClosingBracket(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var linkLen = 4 + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      } // reflink, nolink\n\n\n      if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      } // strong\n\n\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // em\n\n\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      } // br\n\n\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      } // del (gfm)\n\n\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      } // autolink\n\n\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // url (gfm)\n\n\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (this.inRawBlock) {\n          out += this.renderer.text(this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  };\n\n  InlineLexer.escapes = function (text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  };\n  /**\n   * Compile Link\n   */\n\n\n  InlineLexer.prototype.outputLink = function (cap, link) {\n    var href = link.href,\n        title = link.title ? escape(link.title) : null;\n    return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, escape(cap[1]));\n  };\n  /**\n   * Smartypants Transformations\n   */\n\n\n  InlineLexer.prototype.smartypants = function (text) {\n    if (!this.options.smartypants) return text;\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  };\n  /**\n   * Mangle Links\n   */\n\n\n  InlineLexer.prototype.mangle = function (text) {\n    if (!this.options.mangle) return text;\n    var out = '',\n        l = text.length,\n        i = 0,\n        ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  };\n  /**\n   * Renderer\n   */\n\n\n  function Renderer(options) {\n    this.options = options || marked.defaults;\n  }\n\n  Renderer.prototype.code = function (code, infostring, escaped) {\n    var lang = (infostring || '').match(/\\S*/)[0];\n\n    if (this.options.highlight) {\n      var out = this.options.highlight(code, lang);\n\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>' + (escaped ? code : escape(code, true)) + '</code></pre>';\n    }\n\n    return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? code : escape(code, true)) + '</code></pre>\\n';\n  };\n\n  Renderer.prototype.blockquote = function (quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  Renderer.prototype.html = function (html) {\n    return html;\n  };\n\n  Renderer.prototype.heading = function (text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n    } // ignore IDs\n\n\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  Renderer.prototype.hr = function () {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  Renderer.prototype.list = function (body, ordered, start) {\n    var type = ordered ? 'ol' : 'ul',\n        startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  Renderer.prototype.listitem = function (text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  Renderer.prototype.checkbox = function (checked) {\n    return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n  };\n\n  Renderer.prototype.paragraph = function (text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  Renderer.prototype.table = function (header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n    return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n  };\n\n  Renderer.prototype.tablerow = function (content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  Renderer.prototype.tablecell = function (content, flags) {\n    var type = flags.header ? 'th' : 'td';\n    var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }; // span level renderer\n\n\n  Renderer.prototype.strong = function (text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  Renderer.prototype.em = function (text) {\n    return '<em>' + text + '</em>';\n  };\n\n  Renderer.prototype.codespan = function (text) {\n    return '<code>' + text + '</code>';\n  };\n\n  Renderer.prototype.br = function () {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  Renderer.prototype.del = function (text) {\n    return '<del>' + text + '</del>';\n  };\n\n  Renderer.prototype.link = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<a href=\"' + escape(href) + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  Renderer.prototype.image = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  Renderer.prototype.text = function (text) {\n    return text;\n  };\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n\n\n  function TextRenderer() {} // no need for block level renderers\n\n\n  TextRenderer.prototype.strong = TextRenderer.prototype.em = TextRenderer.prototype.codespan = TextRenderer.prototype.del = TextRenderer.prototype.text = function (text) {\n    return text;\n  };\n\n  TextRenderer.prototype.link = TextRenderer.prototype.image = function (href, title, text) {\n    return '' + text;\n  };\n\n  TextRenderer.prototype.br = function () {\n    return '';\n  };\n  /**\n   * Parsing & Compiling\n   */\n\n\n  function Parser(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || marked.defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n  /**\n   * Static Parse Method\n   */\n\n\n  Parser.parse = function (src, options) {\n    var parser = new Parser(options);\n    return parser.parse(src);\n  };\n  /**\n   * Parse Loop\n   */\n\n\n  Parser.prototype.parse = function (src) {\n    this.inline = new InlineLexer(src.links, this.options); // use an InlineLexer with a TextRenderer to extract pure text\n\n    this.inlineText = new InlineLexer(src.links, merge({}, this.options, {\n      renderer: new TextRenderer()\n    }));\n    this.tokens = src.reverse();\n    var out = '';\n\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n  /**\n   * Next Token\n   */\n\n\n  Parser.prototype.next = function () {\n    this.token = this.tokens.pop();\n    return this.token;\n  };\n  /**\n   * Preview Next Token\n   */\n\n\n  Parser.prototype.peek = function () {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n  /**\n   * Parse Text Tokens\n   */\n\n\n  Parser.prototype.parseText = function () {\n    var body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n  /**\n   * Parse Current Token\n   */\n\n\n  Parser.prototype.tok = function () {\n    switch (this.token.type) {\n      case 'space':\n        {\n          return '';\n        }\n\n      case 'hr':\n        {\n          return this.renderer.hr();\n        }\n\n      case 'heading':\n        {\n          return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, unescape(this.inlineText.output(this.token.text)), this.slugger);\n        }\n\n      case 'code':\n        {\n          return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);\n        }\n\n      case 'table':\n        {\n          var header = '',\n              body = '',\n              i,\n              row,\n              cell,\n              j; // header\n\n          cell = '';\n\n          for (i = 0; i < this.token.header.length; i++) {\n            cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), {\n              header: true,\n              align: this.token.align[i]\n            });\n          }\n\n          header += this.renderer.tablerow(cell);\n\n          for (i = 0; i < this.token.cells.length; i++) {\n            row = this.token.cells[i];\n            cell = '';\n\n            for (j = 0; j < row.length; j++) {\n              cell += this.renderer.tablecell(this.inline.output(row[j]), {\n                header: false,\n                align: this.token.align[j]\n              });\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n\n          return this.renderer.table(header, body);\n        }\n\n      case 'blockquote_start':\n        {\n          body = '';\n\n          while (this.next().type !== 'blockquote_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.blockquote(body);\n        }\n\n      case 'list_start':\n        {\n          body = '';\n          var ordered = this.token.ordered,\n              start = this.token.start;\n\n          while (this.next().type !== 'list_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.list(body, ordered, start);\n        }\n\n      case 'list_item_start':\n        {\n          body = '';\n          var loose = this.token.loose;\n          var checked = this.token.checked;\n          var task = this.token.task;\n\n          if (this.token.task) {\n            body += this.renderer.checkbox(checked);\n          }\n\n          while (this.next().type !== 'list_item_end') {\n            body += !loose && this.token.type === 'text' ? this.parseText() : this.tok();\n          }\n\n          return this.renderer.listitem(body, task, checked);\n        }\n\n      case 'html':\n        {\n          // TODO parse inline content if parameter markdown=1\n          return this.renderer.html(this.token.text);\n        }\n\n      case 'paragraph':\n        {\n          return this.renderer.paragraph(this.inline.output(this.token.text));\n        }\n\n      case 'text':\n        {\n          return this.renderer.paragraph(this.parseText());\n        }\n\n      default:\n        {\n          var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n\n          if (this.options.silent) {\n            console.log(errMsg);\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n    }\n  };\n  /**\n   * Slugger generates header id\n   */\n\n\n  function Slugger() {\n    this.seen = {};\n  }\n  /**\n   * Convert string to unique id\n   */\n\n\n  Slugger.prototype.slug = function (value) {\n    var slug = value.toLowerCase().trim().replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      var originalSlug = slug;\n\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n\n    this.seen[slug] = 0;\n    return slug;\n  };\n  /**\n   * Helpers\n   */\n\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escape.escapeTest.test(html)) {\n        return html.replace(escape.escapeReplace, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    } else {\n      if (escape.escapeTestNoEncode.test(html)) {\n        return html.replace(escape.escapeReplaceNoEncode, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    }\n\n    return html;\n  }\n\n  escape.escapeTest = /[&<>\"']/;\n  escape.escapeReplace = /[&<>\"']/g;\n  escape.replacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n  escape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  escape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    return {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(/(^|[^\\[])\\^/g, '$1');\n        regex = regex.replace(name, val);\n        return this;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n  }\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      try {\n        var prot = decodeURIComponent(unescape(href)).replace(/[^\\w:]/g, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n\n    if (href.slice(0, 2) === '//') {\n      return base.replace(/:[\\s\\S]*/, ':') + href;\n    } else if (href.charAt(0) === '/') {\n      return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var baseUrls = {};\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function noop() {}\n\n  noop.exec = noop;\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/),\n        i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    if (str.length === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < str.length) {\n      var currChar = str.charAt(str.length - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, str.length - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var level = 0;\n\n    for (var i = 0; i < str.length; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  }\n  /**\n   * Marked\n   */\n\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (callback || typeof opt === 'function') {\n      if (!callback) {\n        callback = opt;\n        opt = null;\n      }\n\n      opt = merge({}, marked.defaults, opt || {});\n      checkSanitizeDeprecation(opt);\n      var highlight = opt.highlight,\n          tokens,\n          pending,\n          i = 0;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      pending = tokens.length;\n\n      var done = function done(err) {\n        if (err) {\n          opt.highlight = highlight;\n          return callback(err);\n        }\n\n        var out;\n\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!pending) return done();\n\n      for (; i < tokens.length; i++) {\n        (function (token) {\n          if (token.type !== 'code') {\n            return --pending || done();\n          }\n\n          return highlight(token.text, token.lang, function (err, code) {\n            if (err) return done(err);\n\n            if (code == null || code === token.text) {\n              return --pending || done();\n            }\n\n            token.text = code;\n            token.escaped = true;\n            --pending || done();\n          });\n        })(tokens[i]);\n      }\n\n      return;\n    }\n\n    try {\n      if (opt) opt = merge({}, marked.defaults, opt);\n      checkSanitizeDeprecation(opt);\n      return Parser.parse(Lexer.lex(src, opt), opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if ((opt || marked.defaults).silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    return marked;\n  };\n\n  marked.getDefaults = function () {\n    return {\n      baseUrl: null,\n      breaks: false,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: new Renderer(),\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      xhtml: false\n    };\n  };\n\n  marked.defaults = marked.getDefaults();\n  /**\n   * Expose\n   */\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.InlineLexer = InlineLexer;\n  marked.inlineLexer = InlineLexer.output;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n\n  if (typeof module !== 'undefined' && typeof exports === 'object') {\n    module.exports = marked;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return marked;\n    });\n  } else {\n    root.marked = marked;\n  }\n})(this || (typeof window !== 'undefined' ? window : global));","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import PropTypes from 'prop-types'; // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.4/js/src/modal.js#L436-L443\n\nexport function getScrollbarWidth() {\n  var scrollDiv = document.createElement('div'); // .modal-scrollbar-measure styles // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.4/scss/_modal.scss#L106-L113\n\n  scrollDiv.style.position = 'absolute';\n  scrollDiv.style.top = '-9999px';\n  scrollDiv.style.width = '50px';\n  scrollDiv.style.height = '50px';\n  scrollDiv.style.overflow = 'scroll';\n  document.body.appendChild(scrollDiv);\n  var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return scrollbarWidth;\n}\nexport function setScrollbarWidth(padding) {\n  document.body.style.paddingRight = padding > 0 ? padding + \"px\" : null;\n}\nexport function isBodyOverflowing() {\n  return document.body.clientWidth < window.innerWidth;\n}\nexport function getOriginalBodyPadding() {\n  var style = window.getComputedStyle(document.body, null);\n  return parseInt(style && style.getPropertyValue('padding-right') || 0, 10);\n}\nexport function conditionallyUpdateScrollbar() {\n  var scrollbarWidth = getScrollbarWidth(); // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.6/js/src/modal.js#L433\n\n  var fixedContent = document.querySelectorAll('.fixed-top, .fixed-bottom, .is-fixed, .sticky-top')[0];\n  var bodyPadding = fixedContent ? parseInt(fixedContent.style.paddingRight || 0, 10) : 0;\n\n  if (isBodyOverflowing()) {\n    setScrollbarWidth(bodyPadding + scrollbarWidth);\n  }\n}\nvar globalCssModule;\nexport function setGlobalCssModule(cssModule) {\n  globalCssModule = cssModule;\n}\nexport function mapToCssModules(className, cssModule) {\n  if (className === void 0) {\n    className = '';\n  }\n\n  if (cssModule === void 0) {\n    cssModule = globalCssModule;\n  }\n\n  if (!cssModule) return className;\n  return className.split(' ').map(function (c) {\n    return cssModule[c] || c;\n  }).join(' ');\n}\n/**\n * Returns a new object with the key/value pairs from `obj` that are not in the array `omitKeys`.\n */\n\nexport function omit(obj, omitKeys) {\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (omitKeys.indexOf(key) === -1) {\n      result[key] = obj[key];\n    }\n  });\n  return result;\n}\n/**\n * Returns a filtered copy of an object with only the specified keys.\n */\n\nexport function pick(obj, keys) {\n  var pickKeys = Array.isArray(keys) ? keys : [keys];\n  var length = pickKeys.length;\n  var key;\n  var result = {};\n\n  while (length > 0) {\n    length -= 1;\n    key = pickKeys[length];\n    result[key] = obj[key];\n  }\n\n  return result;\n}\nvar warned = {};\nexport function warnOnce(message) {\n  if (!warned[message]) {\n    /* istanbul ignore else */\n    if (typeof console !== 'undefined') {\n      console.error(message); // eslint-disable-line no-console\n    }\n\n    warned[message] = true;\n  }\n}\nexport function deprecated(propType, explanation) {\n  return function validate(props, propName, componentName) {\n    if (props[propName] !== null && typeof props[propName] !== 'undefined') {\n      warnOnce(\"\\\"\" + propName + \"\\\" property of \\\"\" + componentName + \"\\\" has been deprecated.\\n\" + explanation);\n    }\n\n    for (var _len = arguments.length, rest = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n      rest[_key - 3] = arguments[_key];\n    }\n\n    return propType.apply(void 0, [props, propName, componentName].concat(rest));\n  };\n} // Shim Element if needed (e.g. in Node environment)\n\nvar Element = typeof window === 'object' && window.Element || function () {};\n\nexport function DOMElement(props, propName, componentName) {\n  if (!(props[propName] instanceof Element)) {\n    return new Error('Invalid prop `' + propName + '` supplied to `' + componentName + '`. Expected prop to be an instance of Element. Validation failed.');\n  }\n}\nexport var targetPropType = PropTypes.oneOfType([PropTypes.string, PropTypes.func, DOMElement, PropTypes.shape({\n  current: PropTypes.any\n})]);\nexport var tagPropType = PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.shape({\n  $$typeof: PropTypes.symbol,\n  render: PropTypes.func\n}), PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.shape({\n  $$typeof: PropTypes.symbol,\n  render: PropTypes.func\n})]))]);\n/* eslint key-spacing: [\"error\", { afterColon: true, align: \"value\" }] */\n// These are all setup to match what is in the bootstrap _variables.scss\n// https://github.com/twbs/bootstrap/blob/v4-dev/scss/_variables.scss\n\nexport var TransitionTimeouts = {\n  Fade: 150,\n  // $transition-fade\n  Collapse: 350,\n  // $transition-collapse\n  Modal: 300,\n  // $modal-transition\n  Carousel: 600 // $carousel-transition\n\n}; // Duplicated Transition.propType keys to ensure that Reactstrap builds\n// for distribution properly exclude these keys for nested child HTML attributes\n// since `react-transition-group` removes propTypes in production builds.\n\nexport var TransitionPropTypeKeys = ['in', 'mountOnEnter', 'unmountOnExit', 'appear', 'enter', 'exit', 'timeout', 'onEnter', 'onEntering', 'onEntered', 'onExit', 'onExiting', 'onExited'];\nexport var TransitionStatuses = {\n  ENTERING: 'entering',\n  ENTERED: 'entered',\n  EXITING: 'exiting',\n  EXITED: 'exited'\n};\nexport var keyCodes = {\n  esc: 27,\n  space: 32,\n  enter: 13,\n  tab: 9,\n  up: 38,\n  down: 40,\n  home: 36,\n  end: 35,\n  n: 78,\n  p: 80\n};\nexport var PopperPlacements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\nexport var canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nexport function isReactRefObj(target) {\n  if (target && typeof target === 'object') {\n    return 'current' in target;\n  }\n\n  return false;\n}\n\nfunction getTag(value) {\n  if (value == null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n\n  return Object.prototype.toString.call(value);\n}\n\nexport function toNumber(value) {\n  var type = typeof value;\n  var NAN = 0 / 0;\n\n  if (type === 'number') {\n    return value;\n  }\n\n  if (type === 'symbol' || type === 'object' && getTag(value) === '[object Symbol]') {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf === 'function' ? value.valueOf() : value;\n    value = isObject(other) ? \"\" + other : other;\n  }\n\n  if (type !== 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(/^\\s+|\\s+$/g, '');\n  var isBinary = /^0b[01]+$/i.test(value);\n  return isBinary || /^0o[0-7]+$/i.test(value) ? parseInt(value.slice(2), isBinary ? 2 : 8) : /^[-+]0x[0-9a-f]+$/i.test(value) ? NAN : +value;\n}\nexport function isObject(value) {\n  var type = typeof value;\n  return value != null && (type === 'object' || type === 'function');\n}\nexport function isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  var tag = getTag(value);\n  return tag === '[object Function]' || tag === '[object AsyncFunction]' || tag === '[object GeneratorFunction]' || tag === '[object Proxy]';\n}\nexport function findDOMElements(target) {\n  if (isReactRefObj(target)) {\n    return target.current;\n  }\n\n  if (isFunction(target)) {\n    return target();\n  }\n\n  if (typeof target === 'string' && canUseDOM) {\n    var selection = document.querySelectorAll(target);\n\n    if (!selection.length) {\n      selection = document.querySelectorAll(\"#\" + target);\n    }\n\n    if (!selection.length) {\n      throw new Error(\"The target '\" + target + \"' could not be identified in the dom, tip: check spelling\");\n    }\n\n    return selection;\n  }\n\n  return target;\n}\nexport function isArrayOrNodeList(els) {\n  if (els === null) {\n    return false;\n  }\n\n  return Array.isArray(els) || canUseDOM && typeof els.length === 'number';\n}\nexport function getTarget(target, allElements) {\n  var els = findDOMElements(target);\n\n  if (isArrayOrNodeList(els) && !allElements) {\n    return els[0];\n  }\n\n  return els;\n}\nexport var defaultToggleEvents = ['touchstart', 'click'];\nexport function addMultipleEventListeners(_els, handler, _events, useCapture) {\n  var els = _els;\n\n  if (!isArrayOrNodeList(els)) {\n    els = [els];\n  }\n\n  var events = _events;\n\n  if (typeof events === 'string') {\n    events = events.split(/\\s+/);\n  }\n\n  if (!isArrayOrNodeList(els) || typeof handler !== 'function' || !Array.isArray(events)) {\n    throw new Error(\"\\n      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.\\n      The second must be a function.\\n      The third is a string or an array of strings that represents DOM events\\n    \");\n  }\n\n  Array.prototype.forEach.call(events, function (event) {\n    Array.prototype.forEach.call(els, function (el) {\n      el.addEventListener(event, handler, useCapture);\n    });\n  });\n  return function removeEvents() {\n    Array.prototype.forEach.call(events, function (event) {\n      Array.prototype.forEach.call(els, function (el) {\n        el.removeEventListener(event, handler, useCapture);\n      });\n    });\n  };\n}\nexport var focusableElements = ['a[href]', 'area[href]', 'input:not([disabled]):not([type=hidden])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'object', 'embed', '[tabindex]:not(.modal)', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])'];","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  listTag: tagPropType,\n  className: PropTypes.string,\n  listClassName: PropTypes.string,\n  cssModule: PropTypes.object,\n  children: PropTypes.node,\n  'aria-label': PropTypes.string\n};\nvar defaultProps = {\n  tag: 'nav',\n  listTag: 'ol',\n  'aria-label': 'breadcrumb'\n};\n\nvar Breadcrumb = function Breadcrumb(props) {\n  var className = props.className,\n      listClassName = props.listClassName,\n      cssModule = props.cssModule,\n      children = props.children,\n      Tag = props.tag,\n      ListTag = props.listTag,\n      label = props['aria-label'],\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"listClassName\", \"cssModule\", \"children\", \"tag\", \"listTag\", \"aria-label\"]);\n\n  var classes = mapToCssModules(classNames(className), cssModule);\n  var listClasses = mapToCssModules(classNames('breadcrumb', listClassName), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    \"aria-label\": label\n  }), React.createElement(ListTag, {\n    className: listClasses\n  }, children));\n};\n\nBreadcrumb.propTypes = propTypes;\nBreadcrumb.defaultProps = defaultProps;\nexport default Breadcrumb;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'li'\n};\n\nvar BreadcrumbItem = function BreadcrumbItem(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      active = props.active,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"active\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, active ? 'active' : false, 'breadcrumb-item'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    \"aria-current\": active ? 'page' : undefined\n  }));\n};\n\nBreadcrumbItem.propTypes = propTypes;\nBreadcrumbItem.defaultProps = defaultProps;\nexport default BreadcrumbItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  noGutters: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  form: PropTypes.bool\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar Row = function Row(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      noGutters = props.noGutters,\n      Tag = props.tag,\n      form = props.form,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"noGutters\", \"tag\", \"form\"]);\n\n  var classes = mapToCssModules(classNames(className, noGutters ? 'no-gutters' : null, form ? 'form-row' : 'row'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nRow.propTypes = propTypes;\nRow.defaultProps = defaultProps;\nexport default Row;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType, isObject } from './utils';\nvar colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nvar stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\nvar columnProps = PropTypes.oneOfType([PropTypes.bool, PropTypes.number, PropTypes.string, PropTypes.shape({\n  size: PropTypes.oneOfType([PropTypes.bool, PropTypes.number, PropTypes.string]),\n  order: stringOrNumberProp,\n  offset: stringOrNumberProp\n})]);\nvar propTypes = {\n  tag: tagPropType,\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  widths: PropTypes.array\n};\nvar defaultProps = {\n  tag: 'div',\n  widths: colWidths\n};\n\nvar getColumnSizeClass = function getColumnSizeClass(isXs, colWidth, colSize) {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : \"col-\" + colWidth;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : \"col-\" + colWidth + \"-auto\";\n  }\n\n  return isXs ? \"col-\" + colSize : \"col-\" + colWidth + \"-\" + colSize;\n};\n\nvar Col = function Col(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      widths = props.widths,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"widths\", \"tag\"]);\n\n  var colClasses = [];\n  widths.forEach(function (colWidth, i) {\n    var columnProp = props[colWidth];\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    var isXs = !i;\n\n    if (isObject(columnProp)) {\n      var _classNames;\n\n      var colSizeInterfix = isXs ? '-' : \"-\" + colWidth + \"-\";\n      var colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n      colClasses.push(mapToCssModules(classNames((_classNames = {}, _classNames[colClass] = columnProp.size || columnProp.size === '', _classNames[\"order\" + colSizeInterfix + columnProp.order] = columnProp.order || columnProp.order === 0, _classNames[\"offset\" + colSizeInterfix + columnProp.offset] = columnProp.offset || columnProp.offset === 0, _classNames)), cssModule));\n    } else {\n      var _colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n\n      colClasses.push(_colClass);\n    }\n  });\n\n  if (!colClasses.length) {\n    colClasses.push('col');\n  }\n\n  var classes = mapToCssModules(classNames(className, colClasses), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCol.propTypes = propTypes;\nCol.defaultProps = defaultProps;\nexport default Col;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  inverse: PropTypes.bool,\n  color: PropTypes.string,\n  body: PropTypes.bool,\n  outline: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar Card = function Card(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      color = props.color,\n      body = props.body,\n      inverse = props.inverse,\n      outline = props.outline,\n      Tag = props.tag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"color\", \"body\", \"inverse\", \"outline\", \"tag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card', inverse ? 'text-white' : false, body ? 'card-body' : false, color ? (outline ? 'border' : 'bg') + \"-\" + color : false), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    ref: innerRef\n  }));\n};\n\nCard.propTypes = propTypes;\nCard.defaultProps = defaultProps;\nexport default Card;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardBody = function CardBody(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      innerRef = props.innerRef,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"innerRef\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-body'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    ref: innerRef\n  }));\n};\n\nCardBody.propTypes = propTypes;\nCardBody.defaultProps = defaultProps;\nexport default CardBody;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.CodeMirror = factory();\n})(this, function () {\n  'use strict'; // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent); // This is woefully incomplete. Suggestions for alternative methods welcome.\n\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n\n  if (presto_version) {\n    presto_version = Number(presto_version[1]);\n  }\n\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  } // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n\n\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || ie && ie_version >= 9;\n\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n\n  var rmClass = function rmClass(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count) {\n      e.removeChild(e.firstChild);\n    }\n\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n\n    if (className) {\n      e.className = className;\n    }\n\n    if (style) {\n      e.style.cssText = style;\n    }\n\n    if (typeof content == \"string\") {\n      e.appendChild(document.createTextNode(content));\n    } else if (content) {\n      for (var i = 0; i < content.length; ++i) {\n        e.appendChild(content[i]);\n      }\n    }\n\n    return e;\n  } // wrapper for elt, which removes the elt from the accessibility tree\n\n\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e;\n  }\n\n  var range;\n\n  if (document.createRange) {\n    range = function range(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  } else {\n    range = function range(node, start, end) {\n      var r = document.body.createTextRange();\n\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      {\n        child = child.parentNode;\n      }\n\n    if (parent.contains) {\n      return parent.contains(child);\n    }\n\n    do {\n      if (child.nodeType == 11) {\n        child = child.host;\n      }\n\n      if (child == parent) {\n        return true;\n      }\n    } while (child = child.parentNode);\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n\n    try {\n      activeElement = document.activeElement;\n    } catch (e) {\n      activeElement = document.body || null;\n    }\n\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    }\n\n    return activeElement;\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n\n    if (!classTest(cls).test(current)) {\n      node.className += (current ? \" \" : \"\") + cls;\n    }\n  }\n\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n\n    for (var i = 0; i < as.length; i++) {\n      if (as[i] && !classTest(as[i]).test(b)) {\n        b += \" \" + as[i];\n      }\n    }\n\n    return b;\n  }\n\n  var selectInput = function selectInput(node) {\n    node.select();\n  };\n\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    {\n      selectInput = function selectInput(node) {\n        node.selectionStart = 0;\n        node.selectionEnd = node.value.length;\n      };\n    } else if (ie) // Suppress mysterious IE10 errors\n    {\n      selectInput = function selectInput(node) {\n        try {\n          node.select();\n        } catch (_e) {}\n      };\n    }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      return f.apply(null, args);\n    };\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) {\n      target = {};\n    }\n\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n        target[prop] = obj[prop];\n      }\n    }\n\n    return target;\n  } // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n\n\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n\n      if (end == -1) {\n        end = string.length;\n      }\n    }\n\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n\n      if (nextTab < 0 || nextTab >= end) {\n        return n + (end - i);\n      }\n\n      n += nextTab - i;\n      n += tabSize - n % tabSize;\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function Delayed() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n\n    if (self.time <= +new Date()) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date());\n    }\n  };\n\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date() + ms;\n\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i) {\n      if (array[i] == elt) {\n        return i;\n      }\n    }\n\n    return -1;\n  } // Number of pixels added to scroller and sizer to hide scrollbar\n\n\n  var scrollerGap = 30; // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n\n  var Pass = {\n    toString: function toString() {\n      return \"CodeMirror.Pass\";\n    }\n  }; // Reused option objects for setSelection & friends\n\n  var sel_dontScroll = {\n    scroll: false\n  },\n      sel_mouse = {\n    origin: \"*mouse\"\n  },\n      sel_move = {\n    origin: \"+move\"\n  }; // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n\n      if (nextTab == -1) {\n        nextTab = string.length;\n      }\n\n      var skipped = nextTab - pos;\n\n      if (nextTab == string.length || col + skipped >= goal) {\n        return pos + Math.min(skipped, goal - col);\n      }\n\n      col += nextTab - pos;\n      col += tabSize - col % tabSize;\n      pos = nextTab + 1;\n\n      if (col >= goal) {\n        return pos;\n      }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n\n  function spaceStr(n) {\n    while (spaceStrs.length <= n) {\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    }\n\n    return spaceStrs[n];\n  }\n\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n\n  function map(array, f) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = f(array[i], i);\n    }\n\n    return out;\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0,\n        priority = score(value);\n\n    while (pos < array.length && score(array[pos]) <= priority) {\n      pos++;\n    }\n\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n\n    if (props) {\n      copyObj(props, inst);\n    }\n\n    return inst;\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  }\n\n  function isWordChar(ch, helper) {\n    if (!helper) {\n      return isWordCharBasic(ch);\n    }\n\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n      return true;\n    }\n\n    return helper.test(ch);\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) {\n      if (obj.hasOwnProperty(n) && obj[n]) {\n        return false;\n      }\n    }\n\n    return true;\n  } // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n\n\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  } // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n\n\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n      pos += dir;\n    }\n\n    return pos;\n  } // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n\n\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n\n    for (;;) {\n      if (from == to) {\n        return from;\n      }\n\n      var midF = (from + to) / 2,\n          mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n\n      if (mid == from) {\n        return pred(mid) ? from : to;\n      }\n\n      if (pred(mid)) {\n        to = mid;\n      } else {\n        from = mid + dir;\n      }\n    }\n  } // BIDI HELPERS\n\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) {\n      return f(from, to, \"ltr\", 0);\n    }\n\n    var found = false;\n\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n\n    if (!found) {\n      f(from, to, \"ltr\");\n    }\n  }\n\n  var bidiOther = null;\n\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n\n      if (cur.from < ch && cur.to > ch) {\n        return i;\n      }\n\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n    }\n\n    return found != null ? found : bidiOther;\n  } // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n\n\n  var bidiOrdering = function () {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"; // Character types for codepoints 0x600 to 0x6f9\n\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n\n    function charType(code) {\n      if (code <= 0xf7) {\n        return lowTypes.charAt(code);\n      } else if (0x590 <= code && code <= 0x5f4) {\n        return \"R\";\n      } else if (0x600 <= code && code <= 0x6f9) {\n        return arabicTypes.charAt(code - 0x600);\n      } else if (0x6ee <= code && code <= 0x8ac) {\n        return \"r\";\n      } else if (0x2000 <= code && code <= 0x200b) {\n        return \"w\";\n      } else if (code == 0x200c) {\n        return \"b\";\n      } else {\n        return \"L\";\n      }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n\n    return function (str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n        return false;\n      }\n\n      var len = str.length,\n          types = [];\n\n      for (var i = 0; i < len; ++i) {\n        types.push(charType(str.charCodeAt(i)));\n      } // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n\n\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n\n        if (type == \"m\") {\n          types[i$1] = prev;\n        } else {\n          prev = type;\n        }\n      } // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n\n\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n\n        if (type$1 == \"1\" && cur == \"r\") {\n          types[i$2] = \"n\";\n        } else if (isStrong.test(type$1)) {\n          cur = type$1;\n\n          if (type$1 == \"r\") {\n            types[i$2] = \"R\";\n          }\n        }\n      } // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n\n\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n          types[i$3] = \"1\";\n        } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n          types[i$3] = prev$1;\n        }\n\n        prev$1 = type$2;\n      } // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n\n\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n\n        if (type$3 == \",\") {\n          types[i$4] = \"N\";\n        } else if (type$3 == \"%\") {\n          var end = void 0;\n\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n\n          var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n\n          for (var j = i$4; j < end; ++j) {\n            types[j] = replace;\n          }\n\n          i$4 = end - 1;\n        }\n      } // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n\n\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n\n        if (cur$1 == \"L\" && type$4 == \"1\") {\n          types[i$5] = \"L\";\n        } else if (isStrong.test(type$4)) {\n          cur$1 = type$4;\n        }\n      } // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n\n\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = void 0;\n\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n\n          var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n            types[j$1] = replace$1;\n          }\n\n          i$6 = end$1 - 1;\n        }\n      } // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n\n\n      var order = [],\n          m;\n\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7,\n              at = order.length;\n\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) {\n                order.splice(at, 0, new BidiSpan(1, pos, j$2));\n              }\n\n              var nstart = j$2;\n\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              pos = j$2;\n            } else {\n              ++j$2;\n            }\n          }\n\n          if (pos < i$7) {\n            order.splice(at, 0, new BidiSpan(1, pos, i$7));\n          }\n        }\n      }\n\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order;\n    };\n  }(); // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n\n\n  function getOrder(line, direction) {\n    var order = line.order;\n\n    if (order == null) {\n      order = line.order = bidiOrdering(line.text, direction);\n    }\n\n    return order;\n  } // EVENT HANDLING\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n\n  var noHandlers = [];\n\n  var on = function on(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers || (emitter._handlers = {});\n      map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers;\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers,\n          arr = map$$1 && map$$1[type];\n\n      if (arr) {\n        var index = indexOf(arr, f);\n\n        if (index > -1) {\n          map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n        }\n      }\n    }\n  }\n\n  function signal(emitter, type\n  /*, values...*/\n  ) {\n    var handlers = getHandlers(emitter, type);\n\n    if (!handlers.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2);\n\n    for (var i = 0; i < handlers.length; ++i) {\n      handlers[i].apply(null, args);\n    }\n  } // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n\n\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\") {\n      e = {\n        type: e,\n        preventDefault: function preventDefault() {\n          this.defaultPrevented = true;\n        }\n      };\n    }\n\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n\n    if (!arr) {\n      return;\n    }\n\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n\n    for (var i = 0; i < arr.length; ++i) {\n      if (indexOf(set, arr[i]) == -1) {\n        set.push(arr[i]);\n      }\n    }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  } // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n\n\n  function eventMixin(ctor) {\n    ctor.prototype.on = function (type, f) {\n      on(this, type, f);\n    };\n\n    ctor.prototype.off = function (type, f) {\n      off(this, type, f);\n    };\n  } // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      e.cancelBubble = true;\n    }\n  }\n\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n\n  function e_stop(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  }\n\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n\n  function e_button(e) {\n    var b = e.which;\n\n    if (b == null) {\n      if (e.button & 1) {\n        b = 1;\n      } else if (e.button & 2) {\n        b = 3;\n      } else if (e.button & 4) {\n        b = 2;\n      }\n    }\n\n    if (mac && e.ctrlKey && b == 1) {\n      b = 3;\n    }\n\n    return b;\n  } // Detect drag-and-drop\n\n\n  var dragAndDrop = function () {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) {\n      return false;\n    }\n\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  var zwspSupported;\n\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200B\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n\n      if (measure.firstChild.offsetHeight != 0) {\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n      }\n    }\n\n    var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  } // Feature-detect IE's crummy client rect reporting for bidi text\n\n\n  var badBidiRects;\n\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) {\n      return badBidiRects;\n    }\n\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n\n    if (!r0 || r0.left == r0.right) {\n      return false;\n    } // Safari returns null in some cases (#2780)\n\n\n    return badBidiRects = r1.right - r0.right < 3;\n  } // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n\n\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n\n      if (nl == -1) {\n        nl = string.length;\n      }\n\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n\n    return result;\n  } : function (string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function (te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function (te) {\n    var range$$1;\n\n    try {\n      range$$1 = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n\n    if (!range$$1 || range$$1.parentElement() != te) {\n      return false;\n    }\n\n    return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0;\n  };\n\n  var hasCopyEvent = function () {\n    var e = elt(\"div\");\n\n    if (\"oncopy\" in e) {\n      return true;\n    }\n\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  }();\n\n  var badZoomedRects = null;\n\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) {\n      return badZoomedRects;\n    }\n\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  } // Known modes, by name and by MIME\n\n\n  var modes = {},\n      mimeModes = {}; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  function defineMode(name, mode) {\n    if (arguments.length > 2) {\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    }\n\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  } // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n\n\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n\n      if (typeof found == \"string\") {\n        found = {\n          name: found\n        };\n      }\n\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\");\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\");\n    }\n\n    if (typeof spec == \"string\") {\n      return {\n        name: spec\n      };\n    } else {\n      return spec || {\n        name: \"null\"\n      };\n    }\n  } // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n\n\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n\n    if (!mfactory) {\n      return getMode(options, \"text/plain\");\n    }\n\n    var modeObj = mfactory(options, spec);\n\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) {\n          continue;\n        }\n\n        if (modeObj.hasOwnProperty(prop)) {\n          modeObj[\"_\" + prop] = modeObj[prop];\n        }\n\n        modeObj[prop] = exts[prop];\n      }\n    }\n\n    modeObj.name = spec.name;\n\n    if (spec.helperType) {\n      modeObj.helperType = spec.helperType;\n    }\n\n    if (spec.modeProps) {\n      for (var prop$1 in spec.modeProps) {\n        modeObj[prop$1] = spec.modeProps[prop$1];\n      }\n    }\n\n    return modeObj;\n  } // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n\n\n  var modeExtensions = {};\n\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) {\n      return state;\n    }\n\n    if (mode.copyState) {\n      return mode.copyState(state);\n    }\n\n    var nstate = {};\n\n    for (var n in state) {\n      var val = state[n];\n\n      if (val instanceof Array) {\n        val = val.concat([]);\n      }\n\n      nstate[n] = val;\n    }\n\n    return nstate;\n  } // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n\n\n  function innerMode(mode, state) {\n    var info;\n\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n\n      if (!info || info.mode == mode) {\n        break;\n      }\n\n      state = info.state;\n      mode = info.mode;\n    }\n\n    return info || {\n      mode: mode,\n      state: state\n    };\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  } // STRING STREAM\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n\n  var StringStream = function StringStream(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {\n    return this.pos >= this.string.length;\n  };\n\n  StringStream.prototype.sol = function () {\n    return this.pos == this.lineStart;\n  };\n\n  StringStream.prototype.peek = function () {\n    return this.string.charAt(this.pos) || undefined;\n  };\n\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length) {\n      return this.string.charAt(this.pos++);\n    }\n  };\n\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n\n    if (typeof match == \"string\") {\n      ok = ch == match;\n    } else {\n      ok = ch && (match.test ? match.test(ch) : match(ch));\n    }\n\n    if (ok) {\n      ++this.pos;\n      return ch;\n    }\n  };\n\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n\n    while (this.eat(match)) {}\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.eatSpace = function () {\n    var this$1 = this;\n    var start = this.pos;\n\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n      ++this$1.pos;\n    }\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.skipToEnd = function () {\n    this.pos = this.string.length;\n  };\n\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n\n    if (found > -1) {\n      this.pos = found;\n      return true;\n    }\n  };\n\n  StringStream.prototype.backUp = function (n) {\n    this.pos -= n;\n  };\n\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function cased(str) {\n        return caseInsensitive ? str.toLowerCase() : str;\n      };\n\n      var substr = this.string.substr(this.pos, pattern.length);\n\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) {\n          this.pos += pattern.length;\n        }\n\n        return true;\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n\n      if (match && match.index > 0) {\n        return null;\n      }\n\n      if (match && consume !== false) {\n        this.pos += match[0].length;\n      }\n\n      return match;\n    }\n  };\n\n  StringStream.prototype.current = function () {\n    return this.string.slice(this.start, this.pos);\n  };\n\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n\n    try {\n      return inner();\n    } finally {\n      this.lineStart -= n;\n    }\n  };\n\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n);\n  };\n\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos);\n  }; // Find the line object corresponding to the given line number.\n\n\n  function getLine(doc, n) {\n    n -= doc.first;\n\n    if (n < 0 || n >= doc.size) {\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    }\n\n    var chunk = doc;\n\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n\n        n -= sz;\n      }\n    }\n\n    return chunk.lines[n];\n  } // Get the part of a document between two positions, as an array of\n  // strings.\n\n\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n\n      if (n == end.line) {\n        text = text.slice(0, end.ch);\n      }\n\n      if (n == start.line) {\n        text = text.slice(start.ch);\n      }\n\n      out.push(text);\n      ++n;\n    });\n    return out;\n  } // Get the lines between from and to, as array of strings.\n\n\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) {\n      out.push(line.text);\n    }); // iter aborts when callback returns truthy value\n\n    return out;\n  } // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n\n\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n\n    if (diff) {\n      for (var n = line; n; n = n.parent) {\n        n.height += diff;\n      }\n    }\n  } // Given a line object, find its line number by walking up through\n  // its parent links.\n\n\n  function lineNo(line) {\n    if (line.parent == null) {\n      return null;\n    }\n\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) {\n          break;\n        }\n\n        no += chunk.children[i].chunkSize();\n      }\n    }\n\n    return no + cur.first;\n  } // Find the line at the given vertical position, using the height\n  // information in the document tree.\n\n\n  function _lineAtHeight(chunk, h) {\n    var n = chunk.first;\n\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1],\n            ch = child.height;\n\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n\n        h -= ch;\n        n += child.chunkSize();\n      }\n\n      return n;\n    } while (!chunk.lines);\n\n    var i = 0;\n\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n\n      if (h < lh) {\n        break;\n      }\n\n      h -= lh;\n    }\n\n    return n + i;\n  }\n\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  } // A Pos instance represents a position within the text.\n\n\n  function Pos(line, ch, sticky) {\n    if (sticky === void 0) sticky = null;\n\n    if (!(this instanceof Pos)) {\n      return new Pos(line, ch, sticky);\n    }\n\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  } // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n\n\n  function cmp(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  }\n\n  function equalCursorPos(a, b) {\n    return a.sticky == b.sticky && cmp(a, b) == 0;\n  }\n\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  } // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n\n\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n\n  function _clipPos(doc, pos) {\n    if (pos.line < doc.first) {\n      return Pos(doc.first, 0);\n    }\n\n    var last = doc.first + doc.size - 1;\n\n    if (pos.line > last) {\n      return Pos(last, getLine(doc, last).text.length);\n    }\n\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n\n    if (ch == null || ch > linelen) {\n      return Pos(pos.line, linelen);\n    } else if (ch < 0) {\n      return Pos(pos.line, 0);\n    } else {\n      return pos;\n    }\n  }\n\n  function clipPosArray(doc, array) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = _clipPos(doc, array[i]);\n    }\n\n    return out;\n  }\n\n  var SavedContext = function SavedContext(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function Context(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n\n    if (line != null && n > this.maxLookAhead) {\n      this.maxLookAhead = n;\n    }\n\n    return line;\n  };\n\n  Context.prototype.baseToken = function (n) {\n    var this$1 = this;\n\n    if (!this.baseTokens) {\n      return null;\n    }\n\n    while (this.baseTokens[this.baseTokenPos] <= n) {\n      this$1.baseTokenPos += 2;\n    }\n\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {\n      type: type && type.replace(/( |^)overlay .*/, \"\"),\n      size: this.baseTokens[this.baseTokenPos] - n\n    };\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n\n    if (this.maxLookAhead > 0) {\n      this.maxLookAhead--;\n    }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext) {\n      return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n    } else {\n      return new Context(doc, copyState(doc.mode, saved), line);\n    }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n  }; // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n\n\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen],\n        lineClasses = {}; // Compute the base array of styles\n\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n      return st.push(end, style);\n    }, lineClasses, forceToEnd);\n    var state = context.state; // Run overlays, adjust style array.\n\n    var loop = function loop(o) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i; // Ensure there's a token end at the current position, and that i points at it\n\n        while (at < end) {\n          var i_end = st[i];\n\n          if (i_end > end) {\n            st.splice(i, 1, end, st[i + 1], i_end);\n          }\n\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n\n        if (!style) {\n          return;\n        }\n\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      loop(o);\n    }\n\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n\n      if (resetState) {\n        context.state = resetState;\n      }\n\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n\n      if (result.classes) {\n        line.styleClasses = result.classes;\n      } else if (line.styleClasses) {\n        line.styleClasses = null;\n      }\n\n      if (updateFrontier === cm.doc.highlightFrontier) {\n        cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n      }\n    }\n\n    return line.styles;\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n\n    if (!doc.mode.startState) {\n      return new Context(doc, true, n);\n    }\n\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n\n    if (precise) {\n      doc.modeFrontier = context.line;\n    }\n\n    return context;\n  } // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n\n\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n\n    if (text == \"\") {\n      callBlankLine(mode, context.state);\n    }\n\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) {\n      return mode.blankLine(state);\n    }\n\n    if (!mode.innerMode) {\n      return;\n    }\n\n    var inner = innerMode(mode, state);\n\n    if (inner.mode.blankLine) {\n      return inner.mode.blankLine(inner.state);\n    }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) {\n        inner[0] = innerMode(mode, state).mode;\n      }\n\n      var style = mode.token(stream, state);\n\n      if (stream.pos > stream.start) {\n        return style;\n      }\n    }\n\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n\n  var Token = function Token(stream, type, state) {\n    this.start = stream.start;\n    this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  }; // Utility for getTokenAt and getLineTokens\n\n\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = _clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context),\n        tokens;\n\n    if (asArray) {\n      tokens = [];\n    }\n\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n\n      if (asArray) {\n        tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n      }\n    }\n\n    return asArray ? tokens : new Token(stream, style, context.state);\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) {\n      for (;;) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n\n        if (!lineClass) {\n          break;\n        }\n\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n\n        if (output[prop] == null) {\n          output[prop] = lineClass[2];\n        } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n          output[prop] += \" \" + lineClass[2];\n        }\n      }\n    }\n\n    return type;\n  } // Run the given mode's parser over a line, calling f for each token.\n\n\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n\n    if (flattenSpans == null) {\n      flattenSpans = cm.options.flattenSpans;\n    }\n\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context),\n        style;\n    var inner = cm.options.addModeClass && [null];\n\n    if (text == \"\") {\n      extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n    }\n\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n\n        if (forceToEnd) {\n          processLine(cm, text, context, stream.pos);\n        }\n\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n\n      if (inner) {\n        var mName = inner[0].name;\n\n        if (mName) {\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n        }\n      }\n\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n\n        curStyle = style;\n      }\n\n      stream.start = stream.pos;\n    }\n\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  } // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n\n\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) {\n        return doc.first;\n      }\n\n      var line = getLine(doc, search - 1),\n          after = line.stateAfter;\n\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n        return search;\n      }\n\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n\n    return minline;\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n\n    if (doc.highlightFrontier < n - 10) {\n      return;\n    }\n\n    var start = doc.first;\n\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter; // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break;\n      }\n    }\n\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  } // Optimize some code when these features are not used.\n\n\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  } // TEXTMARKER SPANS\n\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  } // Search an array of spans for a span matching the given marker.\n\n\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) {\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n\n        if (span.marker == marker) {\n          return span;\n        }\n      }\n    }\n  } // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n\n\n  function removeMarkedSpan(spans, span) {\n    var r;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i] != span) {\n        (r || (r = [])).push(spans[i]);\n      }\n    }\n\n    return r;\n  } // Add a span to a line.\n\n\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  } // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n\n\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    }\n\n    return nw;\n  }\n\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    }\n\n    return nw;\n  } // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n\n\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) {\n      return null;\n    }\n\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n\n    if (!oldFirst && !oldLast) {\n      return null;\n    }\n\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0; // Get the spans that 'stick out' on both sides\n\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert); // Next, merge those two ends\n\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n\n          if (!found) {\n            span.to = startCh;\n          } else if (sameLine) {\n            span.to = found.to == null ? null : found.to + offset;\n          }\n        }\n      }\n    }\n\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n\n        if (span$1.to != null) {\n          span$1.to += offset;\n        }\n\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n\n          if (!found$1) {\n            span$1.from = offset;\n\n            if (sameLine) {\n              (first || (first = [])).push(span$1);\n            }\n          }\n        } else {\n          span$1.from += offset;\n\n          if (sameLine) {\n            (first || (first = [])).push(span$1);\n          }\n        }\n      }\n    } // Make sure we didn't create any zero-length spans\n\n\n    if (first) {\n      first = clearEmptySpans(first);\n    }\n\n    if (last && last != first) {\n      last = clearEmptySpans(last);\n    }\n\n    var newMarkers = [first];\n\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2,\n          gapMarkers;\n\n      if (gap > 0 && first) {\n        for (var i$2 = 0; i$2 < first.length; ++i$2) {\n          if (first[i$2].to == null) {\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n          }\n        }\n      }\n\n      for (var i$3 = 0; i$3 < gap; ++i$3) {\n        newMarkers.push(gapMarkers);\n      }\n\n      newMarkers.push(last);\n    }\n\n    return newMarkers;\n  } // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n\n\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n        spans.splice(i--, 1);\n      }\n    }\n\n    if (!spans.length) {\n      return null;\n    }\n\n    return spans;\n  } // Used to 'clip' out readOnly ranges when making a change.\n\n\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n            (markers || (markers = [])).push(mark);\n          }\n        }\n      }\n    });\n\n    if (!markers) {\n      return null;\n    }\n\n    var parts = [{\n      from: from,\n      to: to\n    }];\n\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n          continue;\n        }\n\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        }\n\n        if (dto > 0 || !mk.inclusiveRight && !dto) {\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        }\n\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n\n    return parts;\n  } // Connect or disconnect spans from a line.\n\n\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.detachLine(line);\n    }\n\n    line.markedSpans = null;\n  }\n\n  function attachMarkedSpans(line, spans) {\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.attachLine(line);\n    }\n\n    line.markedSpans = spans;\n  } // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n\n\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  } // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n\n\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n\n    if (lenDiff != 0) {\n      return lenDiff;\n    }\n\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n\n    if (fromCmp) {\n      return -fromCmp;\n    }\n\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n\n    if (toCmp) {\n      return toCmp;\n    }\n\n    return b.id - a.id;\n  } // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n\n\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  } // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n\n\n  function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n    var line = getLine(doc, lineNo$$1);\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n          continue;\n        }\n\n        if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n          return true;\n        }\n      }\n    }\n  } // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n\n\n  function visualLine(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtStart(line)) {\n      line = merged.find(-1, true).line;\n    }\n\n    return line;\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return line;\n  } // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n\n\n  function visualLineContinued(line) {\n    var merged, lines;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n\n    return lines;\n  } // Get the line number of the start of the visual line that the\n  // given line number is part of.\n\n\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n\n    if (line == vis) {\n      return lineN;\n    }\n\n    return lineNo(vis);\n  } // Get the line number of the start of the next visual line after\n  // the given line.\n\n\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) {\n      return lineN;\n    }\n\n    var line = getLine(doc, lineN),\n        merged;\n\n    if (!lineIsHidden(doc, line)) {\n      return lineN;\n    }\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return lineNo(line) + 1;\n  } // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n\n\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        if (sp.from == null) {\n          return true;\n        }\n\n        if (sp.marker.widgetNode) {\n          continue;\n        }\n\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n\n    if (span.marker.inclusiveRight && span.to == line.text.length) {\n      return true;\n    }\n\n    for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n        return true;\n      }\n    }\n  } // Find the height above the given line.\n\n\n  function _heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n\n      if (line == lineObj) {\n        break;\n      } else {\n        h += line.height;\n      }\n    }\n\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n\n        if (cur == chunk) {\n          break;\n        } else {\n          h += cur.height;\n        }\n      }\n    }\n\n    return h;\n  } // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n\n\n  function lineLength(line) {\n    if (line.height == 0) {\n      return 0;\n    }\n\n    var len = line.text.length,\n        merged,\n        cur = line;\n\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n\n    cur = line;\n\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n\n    return len;\n  } // Find the longest line in the document.\n\n\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  } // LINE DATA STRUCTURE\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n\n\n  var Line = function Line(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () {\n    return lineNo(this);\n  };\n\n  eventMixin(Line); // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    if (line.styles) {\n      line.styles = null;\n    }\n\n    if (line.order != null) {\n      line.order = null;\n    }\n\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n\n    if (estHeight != line.height) {\n      updateLineHeight(line, estHeight);\n    }\n  } // Detach a line from the document tree and its markers.\n\n\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  } // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n\n\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) {\n      return null;\n    }\n\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  } // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n\n\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: eltP(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      trailingSpace: false,\n      splitSpaces: cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {}; // Iterate over the logical lines that make up this visual line.\n\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order = void 0;\n      builder.pos = 0;\n      builder.addToken = buildToken; // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      }\n\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass) {\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        }\n\n        if (line.styleClasses.textClass) {\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n        }\n      } // Ensure at least a single node is present, for measuring.\n\n\n      if (builder.map.length == 0) {\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      } // Store the map and a cache object for the current logical line\n\n\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    } // See issue #2901\n\n\n    if (webkit) {\n      var last = builder.content.lastChild;\n\n      if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n        builder.content.className = \"cm-tab-wrap-hack\";\n      }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n\n    if (builder.pre.className) {\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    }\n\n    return builder;\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  } // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n\n\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) {\n      return;\n    }\n\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    var content;\n\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n\n      if (ie && ie_version < 9) {\n        mustWrap = true;\n      }\n\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt]));\n          } else {\n            content.appendChild(txt);\n          }\n\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n\n        if (!m) {\n          break;\n        }\n\n        pos += skipped + 1;\n        var txt$1 = void 0;\n\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt$1]));\n          } else {\n            content.appendChild(txt$1);\n          }\n\n          builder.col += 1;\n        }\n\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n\n      if (startStyle) {\n        fullStyle += startStyle;\n      }\n\n      if (endStyle) {\n        fullStyle += endStyle;\n      }\n\n      var token = elt(\"span\", [content], fullStyle, css);\n\n      if (attributes) {\n        for (var attr in attributes) {\n          if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\") {\n            token.setAttribute(attr, attributes[attr]);\n          }\n        }\n      }\n\n      return builder.content.appendChild(token);\n    }\n\n    builder.content.appendChild(content);\n  } // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n\n\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) {\n      return text;\n    }\n\n    var spaceBefore = trailingBefore,\n        result = \"\";\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n        ch = \"\\xA0\";\n      }\n\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n\n    return result;\n  } // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n\n\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = void 0;\n\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n\n          if (part.to > start && part.from <= start) {\n            break;\n          }\n        }\n\n        if (part.to >= end) {\n          return inner(builder, text, style, startStyle, endStyle, css, attributes);\n        }\n\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n\n    if (widget) {\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    }\n\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget) {\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      }\n\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n\n    builder.pos += size;\n    builder.trailingSpace = false;\n  } // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n\n\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n        builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n      }\n\n      return;\n    }\n\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        collapsed,\n        attributes;\n\n    for (;;) {\n      if (nextChange == pos) {\n        // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [],\n            endStyles = void 0;\n\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n\n            if (m.className) {\n              spanStyle += \" \" + m.className;\n            }\n\n            if (m.css) {\n              css = (css ? css + \";\" : \"\") + m.css;\n            }\n\n            if (m.startStyle && sp.from == pos) {\n              spanStartStyle += \" \" + m.startStyle;\n            }\n\n            if (m.endStyle && sp.to == nextChange) {\n              (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n            } // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n\n\n            if (m.title) {\n              (attributes || (attributes = {})).title = m.title;\n            }\n\n            if (m.attributes) {\n              for (var attr in m.attributes) {\n                (attributes || (attributes = {}))[attr] = m.attributes[attr];\n              }\n            }\n\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n              collapsed = sp;\n            }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n\n        if (endStyles) {\n          for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n            if (endStyles[j$1 + 1] == nextChange) {\n              spanEndStyle += \" \" + endStyles[j$1];\n            }\n          }\n        }\n\n        if (!collapsed || collapsed.from == pos) {\n          for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n            buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n          }\n        }\n\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n\n          if (collapsed.to == null) {\n            return;\n          }\n\n          if (collapsed.to == pos) {\n            collapsed = false;\n          }\n        }\n      }\n\n      if (pos >= len) {\n        break;\n      }\n\n      var upto = Math.min(len, nextChange);\n\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n\n          pos = end;\n          spanStartStyle = \"\";\n        }\n\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  } // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n\n\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line; // Continuing lines, if any\n\n    this.rest = visualLineContinued(line); // Number of logical lines in this visual line\n\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  } // Create a range of LineView objects for the given lines.\n\n\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n\n    return array;\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n\n    do {\n      for (; i < callbacks.length; i++) {\n        callbacks[i].call(null);\n      }\n\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n\n        if (op.cursorActivityHandlers) {\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n          }\n        }\n      }\n    } while (i < callbacks.length);\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n\n    if (!group) {\n      return;\n    }\n\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null; // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n\n  function signalLater(emitter, type\n  /*, values...*/\n  ) {\n    var arr = getHandlers(emitter, type);\n\n    if (!arr.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n\n    var loop = function loop(i) {\n      list.push(function () {\n        return arr[i].apply(null, args);\n      });\n    };\n\n    for (var i = 0; i < arr.length; ++i) {\n      loop(i);\n    }\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n\n    for (var i = 0; i < delayed.length; ++i) {\n      delayed[i]();\n    }\n  } // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n\n\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n\n      if (type == \"text\") {\n        updateLineText(cm, lineView);\n      } else if (type == \"gutter\") {\n        updateLineGutter(cm, lineView, lineN, dims);\n      } else if (type == \"class\") {\n        updateLineClasses(cm, lineView);\n      } else if (type == \"widget\") {\n        updateLineWidgets(cm, lineView, dims);\n      }\n    }\n\n    lineView.changes = null;\n  } // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n\n\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n\n      if (lineView.text.parentNode) {\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      }\n\n      lineView.node.appendChild(lineView.text);\n\n      if (ie && ie_version < 8) {\n        lineView.node.style.zIndex = 2;\n      }\n    }\n\n    return lineView.node;\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n\n    if (cls) {\n      cls += \" CodeMirror-linebackground\";\n    }\n\n    if (lineView.background) {\n      if (cls) {\n        lineView.background.className = cls;\n      } else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  } // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n\n\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n\n    return buildLineContent(cm, lineView);\n  } // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n\n\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n\n    if (lineView.text == lineView.node) {\n      lineView.node = built.pre;\n    }\n\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n\n    if (lineView.line.wrapClass) {\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    } else if (lineView.node != lineView.text) {\n      lineView.node.className = \"\";\n    }\n\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n\n    var markers = lineView.line.gutterMarkers;\n\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n\n      if (lineView.line.gutterClass) {\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      }\n\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      }\n\n      if (markers) {\n        for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n          var id = cm.display.gutterSpecs[k].className,\n              found = markers.hasOwnProperty(id) && markers[id];\n\n          if (found) {\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n          }\n        }\n      }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) {\n      lineView.alignable = null;\n    }\n\n    for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n      next = node.nextSibling;\n\n      if (node.className == \"CodeMirror-linewidget\") {\n        lineView.node.removeChild(node);\n      }\n    }\n\n    insertLineWidgets(cm, lineView, dims);\n  } // Build a line's DOM representation from scratch\n\n\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n\n    if (built.bgClass) {\n      lineView.bgClass = built.bgClass;\n    }\n\n    if (built.textClass) {\n      lineView.textClass = built.textClass;\n    }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  } // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n\n\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++) {\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n      }\n    }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) {\n      return;\n    }\n\n    var wrap = ensureLineWrapped(lineView);\n\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n\n      if (!widget.handleMouseEvents) {\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n\n      if (allowAbove && widget.above) {\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      } else {\n        wrap.appendChild(node);\n      }\n\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n\n      node.style.width = width + \"px\";\n    }\n\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n\n      if (!widget.noHScroll) {\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n      }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) {\n      return widget.height;\n    }\n\n    var cm = widget.doc.cm;\n\n    if (!cm) {\n      return 0;\n    }\n\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n\n      if (widget.coverGutter) {\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      }\n\n      if (widget.noHScroll) {\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      }\n\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n\n    return widget.height = widget.node.parentNode.offsetHeight;\n  } // Return true when the given mouse event happened in a widget\n\n\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n        return true;\n      }\n    }\n  } // POSITION MEASUREMENT\n\n\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n\n  function paddingH(display) {\n    if (display.cachedPaddingH) {\n      return display.cachedPaddingH;\n    }\n\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n\n    if (!isNaN(data.left) && !isNaN(data.right)) {\n      display.cachedPaddingH = data;\n    }\n\n    return data;\n  }\n\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  } // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n\n\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n\n          if (Math.abs(cur.bottom - next.bottom) > 2) {\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n          }\n        }\n      }\n\n      heights.push(rect.bottom - rect.top);\n    }\n  } // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n\n\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line) {\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    }\n\n    for (var i = 0; i < lineView.rest.length; i++) {\n      if (lineView.rest[i] == line) {\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n      }\n    }\n\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n      if (lineNo(lineView.rest[i$1]) > lineN) {\n        return {\n          map: lineView.measure.maps[i$1],\n          cache: lineView.measure.caches[i$1],\n          before: true\n        };\n      }\n    }\n  } // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n\n\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  } // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n\n\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  } // Find a line view that corresponds to the given line number.\n\n\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n      return cm.display.view[findViewIndex(cm, lineN)];\n    }\n\n    var ext = cm.display.externalMeasured;\n\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n      return ext;\n    }\n  } // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n\n\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n\n    if (!view) {\n      view = updateExternalMeasurement(cm, line);\n    }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  } // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n\n\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) {\n      ch = -1;\n    }\n\n    var key = ch + (bias || \"\"),\n        found;\n\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect) {\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      }\n\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n\n      found = measureCharInner(cm, prepared, ch, bias);\n\n      if (!found.bogus) {\n        prepared.cache[key] = found;\n      }\n    }\n\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n\n  function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd; // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n\n    for (var i = 0; i < map$$1.length; i += 3) {\n      mStart = map$$1[i];\n      mEnd = map$$1[i + 1];\n\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n\n        if (ch >= mEnd) {\n          collapse = \"right\";\n        }\n      }\n\n      if (start != null) {\n        node = map$$1[i + 2];\n\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n          collapse = bias;\n        }\n\n        if (bias == \"left\" && start == 0) {\n          while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n            node = map$$1[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        }\n\n        if (bias == \"right\" && start == mEnd - mStart) {\n          while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n            node = map$$1[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        }\n\n        break;\n      }\n    }\n\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n\n    if (bias == \"left\") {\n      for (var i = 0; i < rects.length; i++) {\n        if ((rect = rects[i]).left != rect.right) {\n          break;\n        }\n      }\n    } else {\n      for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n        if ((rect = rects[i$1]).left != rect.right) {\n          break;\n        }\n      }\n    }\n\n    return rect;\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n\n    if (node.nodeType == 3) {\n      // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) {\n        // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n          --start;\n        }\n\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n          ++end;\n        }\n\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else {\n          rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n        }\n\n        if (rect.left || rect.right || start == 0) {\n          break;\n        }\n\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n\n      if (ie && ie_version < 11) {\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n      }\n    } else {\n      // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) {\n        collapse = bias = \"right\";\n      }\n\n      var rects;\n\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      } else {\n        rect = node.getBoundingClientRect();\n      }\n    }\n\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n\n      if (rSpan) {\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      } else {\n        rect = nullRect;\n      }\n    }\n\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n\n    for (; i < heights.length - 1; i++) {\n      if (mid < heights[i]) {\n        break;\n      }\n    }\n\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n\n    if (!rect.left && !rect.right) {\n      result.bogus = true;\n    }\n\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n\n    return result;\n  } // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n\n\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n      return rect;\n    }\n\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n\n      if (lineView.rest) {\n        for (var i = 0; i < lineView.rest.length; i++) {\n          lineView.measure.caches[i] = {};\n        }\n      }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n    }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n\n    if (!cm.options.lineWrapping) {\n      cm.display.maxLineChanged = true;\n    }\n\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n    }\n\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n\n  function pageScrollY() {\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n    }\n\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n\n    if (lineObj.widgets) {\n      for (var i = 0; i < lineObj.widgets.length; ++i) {\n        if (lineObj.widgets[i].above) {\n          height += widgetHeight(lineObj.widgets[i]);\n        }\n      }\n    }\n\n    return height;\n  } // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n\n\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height;\n      rect.bottom += height;\n    }\n\n    if (context == \"line\") {\n      return rect;\n    }\n\n    if (!context) {\n      context = \"local\";\n    }\n\n    var yOff = _heightAtLine(lineObj);\n\n    if (context == \"local\") {\n      yOff += paddingTop(cm.display);\n    } else {\n      yOff -= cm.display.viewOffset;\n    }\n\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  } // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n\n\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") {\n      return coords;\n    }\n\n    var left = coords.left,\n        top = coords.top; // First move into \"page\" coordinate system\n\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n\n  function _charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) {\n      lineObj = getLine(cm.doc, pos.line);\n    }\n\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  } // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n\n\n  function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n\n      if (right) {\n        m.left = m.right;\n      } else {\n        m.right = m.left;\n      }\n\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n\n    var order = getOrder(lineObj, cm.doc.direction),\n        ch = pos.ch,\n        sticky = pos.sticky;\n\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n\n    if (!order) {\n      return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n    }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos],\n          right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert);\n    }\n\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n\n    if (other != null) {\n      val.other = getBidi(ch, other, sticky != \"before\");\n    }\n\n    return val;\n  } // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n\n\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = _clipPos(cm.doc, pos);\n\n    if (!cm.options.lineWrapping) {\n      left = charWidth(cm.display) * pos.ch;\n    }\n\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  } // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n\n\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n\n    if (outside) {\n      pos.outside = outside;\n    }\n\n    return pos;\n  } // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n\n\n  function _coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n\n    if (y < 0) {\n      return PosWithInfo(doc.first, 0, null, -1, -1);\n    }\n\n    var lineN = _lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n\n    if (lineN > last) {\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);\n    }\n\n    if (x < 0) {\n      x = 0;\n    }\n\n    var lineObj = getLine(doc, lineN);\n\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n\n      if (!collapsed) {\n        return found;\n      }\n\n      var rangeEnd = collapsed.find(1);\n\n      if (rangeEnd.line == lineN) {\n        return rangeEnd;\n      }\n\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;\n    }, end, 0);\n    end = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch).top > y;\n    }, begin, end);\n    return {\n      begin: begin,\n      end: end\n    };\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n  } // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n\n\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n    // Move y into line-local coordinate space\n    y -= _heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj); // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n\n    var widgetHeight$$1 = widgetTopHeight(lineObj);\n    var begin = 0,\n        end = lineObj.text.length,\n        ltr = true;\n    var order = getOrder(lineObj, cm.doc.direction); // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\n      ltr = part.level != 1; // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    } // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n\n\n    var chAround = null,\n        boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight$$1;\n      box.bottom += widgetHeight$$1;\n\n      if (!boxIsAfter(box, x, y, false)) {\n        return false;\n      }\n\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n\n      return true;\n    }, begin, end);\n    var baseX,\n        sticky,\n        outside = false; // If a box around the coordinates was found, use that\n\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x,\n          atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) {\n        ch++;\n      } // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n\n\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y == ltr ? \"after\" : \"before\"; // Now get accurate coordinates for this place, in order to get a\n      // base X position\n\n      var coords = _cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \"line\", lineObj, preparedMeasure);\n\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX);\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i],\n          ltr = part.level != 1;\n      return boxIsAfter(_cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"), \"line\", lineObj, preparedMeasure), x, y, true);\n    }, 0, order.length - 1);\n    var part = order[index]; // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n\n    if (index > 0) {\n      var ltr = part.level != 1;\n\n      var start = _cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"), \"line\", lineObj, preparedMeasure);\n\n      if (boxIsAfter(start, x, y, true) && start.top > y) {\n        part = order[index - 1];\n      }\n    }\n\n    return part;\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) {\n      end--;\n    }\n\n    var part = null,\n        closestDist = null;\n\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n\n      if (p.from >= end || p.to <= begin) {\n        continue;\n      }\n\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right; // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n\n    if (!part) {\n      part = order[order.length - 1];\n    } // Clip the part to the wrapped line.\n\n\n    if (part.from < begin) {\n      part = {\n        from: begin,\n        to: part.to,\n        level: part.level\n      };\n    }\n\n    if (part.to > end) {\n      part = {\n        from: part.from,\n        to: end,\n        level: part.level\n      };\n    }\n\n    return part;\n  }\n\n  var measureText; // Compute the default text height.\n\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) {\n      return display.cachedTextHeight;\n    }\n\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\"); // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n\n    if (height > 3) {\n      display.cachedTextHeight = height;\n    }\n\n    removeChildren(display.measure);\n    return height || 1;\n  } // Compute the default character width.\n\n\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) {\n      return display.cachedCharWidth;\n    }\n\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n\n    if (width > 2) {\n      display.cachedCharWidth = width;\n    }\n\n    return width || 10;\n  } // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n\n\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  } // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n\n\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  } // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n\n\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) {\n        return 0;\n      }\n\n      var widgetsHeight = 0;\n\n      if (line.widgets) {\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height) {\n            widgetsHeight += line.widgets[i].height;\n          }\n        }\n      }\n\n      if (wrapping) {\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      } else {\n        return widgetsHeight + th;\n      }\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n\n      if (estHeight != line.height) {\n        updateLineHeight(line, estHeight);\n      }\n    });\n  } // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n\n\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n      return null;\n    }\n\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect(); // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e) {\n      return null;\n    }\n\n    var coords = _coordsChar(cm, x, y),\n        line;\n\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n\n    return coords;\n  } // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n\n\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) {\n      return null;\n    }\n\n    n -= cm.display.viewFrom;\n\n    if (n < 0) {\n      return null;\n    }\n\n    var view = cm.display.view;\n\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n\n      if (n < 0) {\n        return i;\n      }\n    }\n  } // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n\n\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) {\n      from = cm.doc.first;\n    }\n\n    if (to == null) {\n      to = cm.doc.first + cm.doc.size;\n    }\n\n    if (!lendiff) {\n      lendiff = 0;\n    }\n\n    var display = cm.display;\n\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n      display.updateLineNumbers = from;\n    }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) {\n      // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n        resetView(cm);\n      }\n    } else if (to <= display.viewFrom) {\n      // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n\n    if (ext) {\n      if (to < ext.lineN) {\n        ext.lineN += lendiff;\n      } else if (from < ext.lineN + ext.size) {\n        display.externalMeasured = null;\n      }\n    }\n  } // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n\n\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n      display.externalMeasured = null;\n    }\n\n    if (line < display.viewFrom || line >= display.viewTo) {\n      return;\n    }\n\n    var lineView = display.view[findViewIndex(cm, line)];\n\n    if (lineView.node == null) {\n      return;\n    }\n\n    var arr = lineView.changes || (lineView.changes = []);\n\n    if (indexOf(arr, type) == -1) {\n      arr.push(type);\n    }\n  } // Clear the view.\n\n\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n      return {\n        index: index,\n        lineN: newN\n      };\n    }\n\n    var n = cm.display.viewFrom;\n\n    for (var i = 0; i < index; i++) {\n      n += view[i].size;\n    }\n\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) {\n          return null;\n        }\n\n        diff = n + view[index].size - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n\n      oldN += diff;\n      newN += diff;\n    }\n\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) {\n        return null;\n      }\n\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n\n    return {\n      index: index,\n      lineN: newN\n    };\n  } // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n\n\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from) {\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      } else if (display.viewFrom < from) {\n        display.view = display.view.slice(findViewIndex(cm, from));\n      }\n\n      display.viewFrom = from;\n\n      if (display.viewTo < to) {\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      } else if (display.viewTo > to) {\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n      }\n    }\n\n    display.viewTo = to;\n  } // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n\n\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n        ++dirty;\n      }\n    }\n\n    return dirty;\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if (primary === void 0) primary = true;\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) {\n        continue;\n      }\n\n      var range$$1 = doc.sel.ranges[i];\n\n      if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) {\n        continue;\n      }\n\n      var collapsed = range$$1.empty();\n\n      if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range$$1.head, curFragment);\n      }\n\n      if (!collapsed) {\n        drawSelectionRange(cm, range$$1, selFragment);\n      }\n    }\n\n    return result;\n  } // Draws a cursor for the given range\n\n\n  function drawSelectionCursor(cm, head, output) {\n    var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) {\n    return a.top - b.top || a.left - b.left;\n  } // Draws the given range as a highlighted selection\n\n\n  function drawSelectionRange(cm, range$$1, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) {\n        top = 0;\n      }\n\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n\n      function coords(ch, bias) {\n        return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = dir == \"ltr\" == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop];\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n        var openStart = fromArg == null && from == 0,\n            openEnd = toArg == null && to == lineLen;\n        var first = i == 0,\n            last = !order || i == order.length - 1;\n\n        if (toPos.top - fromPos.top <= 3) {\n          // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else {\n          // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n\n          if (fromPos.bottom < toPos.top) {\n            add(leftSide, fromPos.bottom, null, toPos.top);\n          }\n\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) {\n          start = fromPos;\n        }\n\n        if (cmpCoords(toPos, start) < 0) {\n          start = toPos;\n        }\n\n        if (!end || cmpCoords(fromPos, end) < 0) {\n          end = fromPos;\n        }\n\n        if (cmpCoords(toPos, end) < 0) {\n          end = toPos;\n        }\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n\n    var sFrom = range$$1.from(),\n        sTo = range$$1.to();\n\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n\n      if (leftEnd.bottom < rightStart.top) {\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n      }\n    }\n\n    output.appendChild(fragment);\n  } // Cursor-blinking\n\n\n  function restartBlink(cm) {\n    if (!cm.state.focused) {\n      return;\n    }\n\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n\n    if (cm.options.cursorBlinkRate > 0) {\n      display.blinker = setInterval(function () {\n        return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    } else if (cm.options.cursorBlinkRate < 0) {\n      display.cursorDiv.style.visibility = \"hidden\";\n    }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) {\n      cm.display.input.focus();\n      onFocus(cm);\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n    }\n\n    if (cm.options.readOnly == \"nocursor\") {\n      return;\n    }\n\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\"); // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n\n        if (webkit) {\n          setTimeout(function () {\n            return cm.display.input.reset(true);\n          }, 20);\n        } // Issue #1730\n\n      }\n\n      cm.display.input.receivedFocus();\n    }\n\n    restartBlink(cm);\n  }\n\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      return;\n    }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n\n    clearInterval(cm.display.blinker);\n    setTimeout(function () {\n      if (!cm.state.focused) {\n        cm.display.shift = false;\n      }\n    }, 150);\n  } // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n\n\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          wrapping = cm.options.lineWrapping;\n      var height = void 0,\n          width = 0;\n\n      if (cur.hidden) {\n        continue;\n      }\n\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top; // Check that lines don't extend past the right of the current\n        // editor width\n\n        if (!wrapping && cur.text.firstChild) {\n          width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;\n        }\n      }\n\n      var diff = cur.line.height - height;\n\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n\n        if (cur.rest) {\n          for (var j = 0; j < cur.rest.length; j++) {\n            updateWidgetHeight(cur.rest[j]);\n          }\n        }\n      }\n\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  } // Read and store the height of line widgets associated with the\n  // given line.\n\n\n  function updateWidgetHeight(line) {\n    if (line.widgets) {\n      for (var i = 0; i < line.widgets.length; ++i) {\n        var w = line.widgets[i],\n            parent = w.node.parentNode;\n\n        if (parent) {\n          w.height = parent.offsetHeight;\n        }\n      }\n    }\n  } // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n\n\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = _lineAtHeight(doc, top),\n        to = _lineAtHeight(doc, bottom); // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n\n\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  } // SCROLLING THINGS INTO VIEW\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n\n\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n      return;\n    }\n\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n\n    if (rect.top + box.top < 0) {\n      doScroll = true;\n    } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n      doScroll = false;\n    }\n\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  } // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n\n\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) {\n      margin = 0;\n    }\n\n    var rect;\n\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n\n      var coords = _cursorCoords(cm, pos);\n\n      var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n      rect = {\n        left: Math.min(coords.left, endCoords.left),\n        top: Math.min(coords.top, endCoords.top) - margin,\n        right: Math.max(coords.left, endCoords.left),\n        bottom: Math.max(coords.bottom, endCoords.bottom) + margin\n      };\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n          changed = true;\n        }\n      }\n\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n          changed = true;\n        }\n      }\n\n      if (!changed) {\n        break;\n      }\n    }\n\n    return rect;\n  } // Scroll a given set of coordinates into view (immediately).\n\n\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n    }\n\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n    }\n  } // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n\n\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n\n    if (rect.top < 0) {\n      rect.top = 0;\n    }\n\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n\n    if (rect.bottom - rect.top > screen) {\n      rect.bottom = rect.top + screen;\n    }\n\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin,\n        atBottom = rect.bottom > docBottom - snapMargin;\n\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n\n      if (newTop != screentop) {\n        result.scrollTop = newTop;\n      }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n\n    if (tooWide) {\n      rect.right = rect.left + screenw;\n    }\n\n    if (rect.left < 10) {\n      result.scrollLeft = 0;\n    } else if (rect.left < screenleft) {\n      result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n    } else if (rect.right > screenw + screenleft - 3) {\n      result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n    }\n\n    return result;\n  } // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n\n\n  function addToScrollTop(cm, top) {\n    if (top == null) {\n      return;\n    }\n\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  } // Make sure that at the end of the operation the current cursor is\n  // shown.\n\n\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {\n      from: cur,\n      to: cur,\n      margin: cm.options.cursorScrollMargin\n    };\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) {\n      resolveScrollToPos(cm);\n    }\n\n    if (x != null) {\n      cm.curOp.scrollLeft = x;\n    }\n\n    if (y != null) {\n      cm.curOp.scrollTop = y;\n    }\n  }\n\n  function scrollToRange(cm, range$$1) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range$$1;\n  } // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n\n\n  function resolveScrollToPos(cm) {\n    var range$$1 = cm.curOp.scrollToPos;\n\n    if (range$$1) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range$$1.from),\n          to = estimateCoords(cm, range$$1.to);\n      scrollToCoordsRange(cm, from, to, range$$1.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  } // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n\n\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) {\n      return;\n    }\n\n    if (!gecko) {\n      updateDisplaySimple(cm, {\n        top: val\n      });\n    }\n\n    setScrollTop(cm, val, true);\n\n    if (gecko) {\n      updateDisplaySimple(cm);\n    }\n\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n\n    if (cm.display.scroller.scrollTop == val && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n\n    if (cm.display.scroller.scrollTop != val) {\n      cm.display.scroller.scrollTop = val;\n    }\n  } // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n\n\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n\n    if (cm.display.scroller.scrollLeft != val) {\n      cm.display.scroller.scrollLeft = val;\n    }\n\n    cm.display.scrollbars.setScrollLeft(val);\n  } // SCROLLBARS\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n\n\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n\n  var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) {\n        scroll(vert.scrollTop, \"vertical\");\n      }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) {\n        scroll(horiz.scrollLeft, \"horizontal\");\n      }\n    });\n    this.checkedZeroWidth = false; // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n\n    if (ie && ie_version < 8) {\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n    }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0); // A bug in IE8 can cause this value to be negative, so guard it.\n\n      this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) {\n        this.zeroWidthHack();\n      }\n\n      this.checkedZeroWidth = true;\n    }\n\n    return {\n      right: needsV ? sWidth : 0,\n      bottom: needsH ? sWidth : 0\n    };\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) {\n      this.horiz.scrollLeft = pos;\n    }\n\n    if (this.disableHoriz) {\n      this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n    }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) {\n      this.vert.scrollTop = pos;\n    }\n\n    if (this.disableVert) {\n      this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n    }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed();\n    this.disableVert = new Delayed();\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n\n      if (elt$$1 != bar) {\n        bar.style.pointerEvents = \"none\";\n      } else {\n        delay.set(1000, maybeDisable);\n      }\n    }\n\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function NullScrollbars() {};\n\n  NullScrollbars.prototype.update = function () {\n    return {\n      bottom: 0,\n      right: 0\n    };\n  };\n\n  NullScrollbars.prototype.setScrollLeft = function () {};\n\n  NullScrollbars.prototype.setScrollTop = function () {};\n\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) {\n      measure = measureForScrollbars(cm);\n    }\n\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n        updateHeightsInViewport(cm);\n      }\n\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  } // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n\n\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else {\n      d.scrollbarFiller.style.display = \"\";\n    }\n\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else {\n      d.gutterFiller.style.display = \"\";\n    }\n  }\n\n  var scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n\n      if (cm.display.scrollbars.addClass) {\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n      }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller); // Prevent clicks in the scrollbars from killing focus\n\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) {\n          setTimeout(function () {\n            return cm.display.input.focus();\n          }, 0);\n        }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") {\n        setScrollLeft(cm, pos);\n      } else {\n        updateScrollTop(cm, pos);\n      }\n    }, cm);\n\n    if (cm.display.scrollbars.addClass) {\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n  } // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n\n  var nextOpId = 0; // Start a new operation.\n\n  function _startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height,\n      // Used to detect need to update scrollbar\n      forceUpdate: false,\n      // Used to force a redraw\n      updateInput: 0,\n      // Whether to reset the input textarea\n      typing: false,\n      // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,\n      // Accumulated changes, for firing change events\n      cursorActivityHandlers: null,\n      // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0,\n      // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false,\n      // Whether the selection needs to be redrawn\n      updateMaxLine: false,\n      // Set when the widest line needs to be determined anew\n      scrollLeft: null,\n      scrollTop: null,\n      // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,\n      // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId // Unique ID\n\n    };\n    pushOperation(cm.curOp);\n  } // Finish an operation, updating the display and signalling delayed events\n\n\n  function _endOperation(cm) {\n    var op = cm.curOp;\n\n    if (op) {\n      finishOperation(op, function (group) {\n        for (var i = 0; i < group.ops.length; i++) {\n          group.ops[i].cm.curOp = null;\n        }\n\n        endOperations(group);\n      });\n    }\n  } // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n\n\n  function endOperations(group) {\n    var ops = group.ops;\n\n    for (var i = 0; i < ops.length; i++) // Read DOM\n    {\n      endOperation_R1(ops[i]);\n    }\n\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    {\n      endOperation_W1(ops[i$1]);\n    }\n\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    {\n      endOperation_R2(ops[i$2]);\n    }\n\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    {\n      endOperation_W2(ops[i$3]);\n    }\n\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    {\n      endOperation_finish(ops[i$4]);\n    }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n\n    if (op.updateMaxLine) {\n      findMaxLine(cm);\n    }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n\n    if (op.updatedDisplay) {\n      updateHeightsInViewport(cm);\n    }\n\n    op.barMeasure = measureForScrollbars(cm); // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged) {\n      op.preparedSelection = display.input.prepareSelection();\n    }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n\n      if (op.maxScrollLeft < cm.doc.scrollLeft) {\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      }\n\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n\n    if (op.preparedSelection) {\n      cm.display.input.showSelection(op.preparedSelection, takeFocus);\n    }\n\n    if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n      updateScrollbars(cm, op.barMeasure);\n    }\n\n    if (op.updatedDisplay) {\n      setDocumentHeight(cm, op.barMeasure);\n    }\n\n    if (op.selectionChanged) {\n      restartBlink(cm);\n    }\n\n    if (cm.state.focused && op.updateInput) {\n      cm.display.input.reset(op.typing);\n    }\n\n    if (takeFocus) {\n      ensureFocus(op.cm);\n    }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n\n    if (op.updatedDisplay) {\n      postUpdateDisplay(cm, op.update);\n    } // Abort mouse wheel delta measurement, when scrolling explicitly\n\n\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n      display.wheelStartX = display.wheelStartY = null;\n    } // Propagate the scroll position to the actual DOM scroller\n\n\n    if (op.scrollTop != null) {\n      setScrollTop(cm, op.scrollTop, op.forceScroll);\n    }\n\n    if (op.scrollLeft != null) {\n      setScrollLeft(cm, op.scrollLeft, true, true);\n    } // If we need to scroll a specific position into view, do so.\n\n\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    } // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n\n\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n\n    if (hidden) {\n      for (var i = 0; i < hidden.length; ++i) {\n        if (!hidden[i].lines.length) {\n          signal(hidden[i], \"hide\");\n        }\n      }\n    }\n\n    if (unhidden) {\n      for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n        if (unhidden[i$1].lines.length) {\n          signal(unhidden[i$1], \"unhide\");\n        }\n      }\n    }\n\n    if (display.wrapper.offsetHeight) {\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    } // Fire change events, and delayed event handlers\n\n\n    if (op.changeObjs) {\n      signal(cm, \"changes\", cm, op.changeObjs);\n    }\n\n    if (op.update) {\n      op.update.finish();\n    }\n  } // Run the given function in an operation\n\n\n  function runInOp(cm, f) {\n    if (cm.curOp) {\n      return f();\n    }\n\n    _startOperation(cm);\n\n    try {\n      return f();\n    } finally {\n      _endOperation(cm);\n    }\n  } // Wraps a function in an operation. Returns the wrapped function.\n\n\n  function operation(cm, f) {\n    return function () {\n      if (cm.curOp) {\n        return f.apply(cm, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n\n\n  function methodOp(f) {\n    return function () {\n      if (this.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(this);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(this);\n      }\n    };\n  }\n\n  function docMethodOp(f) {\n    return function () {\n      var cm = this.cm;\n\n      if (!cm || cm.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // HIGHLIGHT WORKER\n\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo) {\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n    }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n\n    if (doc.highlightFrontier >= cm.display.viewTo) {\n      return;\n    }\n\n    var end = +new Date() + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) {\n        // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n\n        if (resetState) {\n          context.state = resetState;\n        }\n\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n\n        if (newCls) {\n          line.styleClasses = newCls;\n        } else if (oldCls) {\n          line.styleClasses = null;\n        }\n\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n          ischange = oldStyles[i] != line.styles[i];\n        }\n\n        if (ischange) {\n          changedLines.push(context.line);\n        }\n\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength) {\n          processLine(cm, line.text, context);\n        }\n\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n\n      if (+new Date() > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n\n    if (changedLines.length) {\n      runInOp(cm, function () {\n        for (var i = 0; i < changedLines.length; i++) {\n          regLineChange(cm, changedLines[i], \"text\");\n        }\n      });\n    }\n  } // DISPLAY DRAWING\n\n\n  var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport; // Store some values that we'll need later (but don't want to force a relayout for)\n\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type)) {\n      this.events.push(arguments);\n    }\n  };\n\n  DisplayUpdate.prototype.finish = function () {\n    var this$1 = this;\n\n    for (var i = 0; i < this.events.length; i++) {\n      signal.apply(null, this$1.events[i]);\n    }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) {\n      return null;\n    }\n\n    var active = activeElt();\n\n    if (!active || !contains(cm.display.lineDiv, active)) {\n      return null;\n    }\n\n    var result = {\n      activeElt: active\n    };\n\n    if (window.getSelection) {\n      var sel = window.getSelection();\n\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n\n    return result;\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n      return;\n    }\n\n    snapshot.activeElt.focus();\n\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(),\n          range$$1 = document.createRange();\n      range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range$$1.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range$$1);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  } // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n\n\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    } // Bail out if the visible area is already rendered and nothing changed.\n\n\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n      return false;\n    }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    } // Compute a suitable new viewport (from & to)\n\n\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n\n    if (display.viewFrom < from && from - display.viewFrom < 20) {\n      from = Math.max(doc.first, display.viewFrom);\n    }\n\n    if (display.viewTo > to && display.viewTo - to < 20) {\n      to = Math.min(end, display.viewTo);\n    }\n\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom)); // Position the mover div to align with the current scroll position\n\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n      return false;\n    } // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n\n\n    var selSnapshot = selectionSnapshot(cm);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"none\";\n    }\n\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"\";\n    }\n\n    display.renderedView = display.view; // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n\n    restoreSelection(selSnapshot); // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n    return true;\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null) {\n          viewport = {\n            top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)\n          };\n        } // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n\n\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n          break;\n        }\n      }\n\n      if (!updateDisplayIfNeeded(cm, update)) {\n        break;\n      }\n\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  } // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n\n\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling; // Works around a throw-scroll bug in OS X Webkit\n\n      if (webkit && mac && cm.display.currentWheelTarget == node) {\n        node.style.display = \"none\";\n      } else {\n        node.parentNode.removeChild(node);\n      }\n\n      return next;\n    }\n\n    var view = display.view,\n        lineN = display.viewFrom; // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ;else if (!lineView.node || lineView.node.parentNode != container) {\n        // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        // Already drawn\n        while (cur != lineView.node) {\n          cur = rm(cur);\n        }\n\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) {\n            updateNumber = false;\n          }\n\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n\n    while (cur) {\n      cur = rm(cur);\n    }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n  } // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n\n\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n      return;\n    }\n\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n\n    for (var i = 0; i < view.length; i++) {\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter) {\n          if (view[i].gutter) {\n            view[i].gutter.style.left = left;\n          }\n\n          if (view[i].gutterBackground) {\n            view[i].gutterBackground.style.left = left;\n          }\n        }\n\n        var align = view[i].alignable;\n\n        if (align) {\n          for (var j = 0; j < align.length; j++) {\n            align[j].style.left = left;\n          }\n        }\n      }\n    }\n\n    if (cm.options.fixedGutter) {\n      display.gutters.style.left = comp + gutterW + \"px\";\n    }\n  } // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n\n\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) {\n      return false;\n    }\n\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true;\n    }\n\n    return false;\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [],\n        sawLineNumbers = false;\n\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i],\n          style = null;\n\n      if (typeof name != \"string\") {\n        style = name.style;\n        name = name.className;\n      }\n\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) {\n          continue;\n        } else {\n          sawLineNumbers = true;\n        }\n      }\n\n      result.push({\n        className: name,\n        style: style\n      });\n    }\n\n    if (lineNumbers && !sawLineNumbers) {\n      result.push({\n        className: \"CodeMirror-linenumbers\",\n        style: null\n      });\n    }\n\n    return result;\n  } // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n\n\n  function renderGutters(display) {\n    var gutters = display.gutters,\n        specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n\n      if (style) {\n        gElt.style.cssText = style;\n      }\n\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  } // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input; // Covers bottom-right square when both scrollbars are present.\n\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\"); // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\"); // Will contain the actual code, positioned to cover the viewport.\n\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\"); // Elements are added to these to represent selection and cursors.\n\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\"); // A visibility: hidden element used to find the size of things.\n\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\"); // When lines outside of the viewport are measured, they are drawn in this.\n\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\"); // Wraps everything that needs to exist inside the vertically-padded coordinate system\n\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\"); // Moved around its parent to cover visible view.\n\n    d.mover = elt(\"div\", [lines], null, \"position: relative\"); // Set to the height of the document, allowing scrolling.\n\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null; // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\"); // Will contain the gutters, if any.\n\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null; // Actual scrollable element.\n\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\"); // The element in which the editor lives.\n\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\"); // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n\n    if (!webkit && !(gecko && mobile)) {\n      d.scroller.draggable = true;\n    }\n\n    if (place) {\n      if (place.appendChild) {\n        place.appendChild(d.wrapper);\n      } else {\n        place(d.wrapper);\n      }\n    } // Current rendered range (may be bigger than the view window).\n\n\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first; // Information about the rendered lines.\n\n    d.view = [];\n    d.renderedView = null; // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n\n    d.externalMeasured = null; // Empty space (in pixels) above the view\n\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false; // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null; // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null; // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false; // Used for measuring wheel scrolling granularity\n\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null; // True when shift is held down.\n\n    d.shift = false; // Used to track whether anything happened since the context menu\n    // was opened.\n\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n    input.init(d);\n  } // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null; // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n\n  if (ie) {\n    wheelPixelsPerUnit = -.53;\n  } else if (gecko) {\n    wheelPixelsPerUnit = 15;\n  } else if (chrome) {\n    wheelPixelsPerUnit = -.7;\n  } else if (safari) {\n    wheelPixelsPerUnit = -1 / 3;\n  }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n      dx = e.detail;\n    }\n\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n      dy = e.detail;\n    } else if (dy == null) {\n      dy = e.wheelDelta;\n    }\n\n    return {\n      x: dx,\n      y: dy\n    };\n  }\n\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller; // Quit if there's nothing to scroll here\n\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n\n    if (!(dx && canScrollX || dy && canScrollY)) {\n      return;\n    } // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n\n\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    } // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n\n\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY) {\n        updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n      }\n\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit)); // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n\n      if (!dy || dy && canScrollY) {\n        e_preventDefault(e);\n      }\n\n      display.wheelStartX = null; // Abort measurement, if in progress\n\n      return;\n    } // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n\n\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n\n      if (pixels < 0) {\n        top = Math.max(0, top + pixels - 50);\n      } else {\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      }\n\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) {\n            return;\n          }\n\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n          display.wheelStartX = display.wheelStartY = null;\n\n          if (!sample) {\n            return;\n          }\n\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  } // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n\n\n  var Selection = function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () {\n    return this.ranges[this.primIndex];\n  };\n\n  Selection.prototype.equals = function (other) {\n    var this$1 = this;\n\n    if (other == this) {\n      return true;\n    }\n\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n      return false;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this$1.ranges[i],\n          there = other.ranges[i];\n\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var this$1 = this;\n    var out = [];\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head));\n    }\n\n    return new Selection(out, this.primIndex);\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    var this$1 = this;\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      if (!this$1.ranges[i].empty()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    var this$1 = this;\n\n    if (!end) {\n      end = pos;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this$1.ranges[i];\n\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  var Range = function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  };\n\n  Range.prototype.from = function () {\n    return minPos(this.anchor, this.head);\n  };\n\n  Range.prototype.to = function () {\n    return maxPos(this.anchor, this.head);\n  };\n\n  Range.prototype.empty = function () {\n    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n  }; // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n\n\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n\n        if (i <= primIndex) {\n          --primIndex;\n        }\n\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n\n    return new Selection(ranges, primIndex);\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  } // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n\n\n  function changeEnd(change) {\n    if (!change.text) {\n      return change.to;\n    }\n\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  } // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n\n\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) {\n      return pos;\n    }\n\n    if (cmp(pos, change.to) <= 0) {\n      return changeEnd(change);\n    }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n\n    if (pos.line == change.to.line) {\n      ch += changeEnd(change).ch - change.to.ch;\n    }\n\n    return Pos(line, ch);\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex);\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line) {\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    } else {\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n    }\n  } // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n\n\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n\n    return new Selection(out, doc.sel.primIndex);\n  } // Used to get the editor into a consistent state again when options change.\n\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) {\n        line.stateAfter = null;\n      }\n\n      if (line.styles) {\n        line.styles = null;\n      }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n\n    if (cm.curOp) {\n      regChange(cm);\n    }\n  } // DOCUMENT DATA STRUCTURE\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n\n\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  } // Perform a change on the document data structure.\n\n\n  function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight$$1);\n      signalLater(line, \"change\", line, change);\n    }\n\n    function linesFor(start, end) {\n      var result = [];\n\n      for (var i = start; i < end; ++i) {\n        result.push(new Line(text[i], spansFor(i), estimateHeight$$1));\n      }\n\n      return result;\n    }\n\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line; // Adjust the line structure\n\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n\n      if (nlines) {\n        doc.remove(from.line, nlines);\n      }\n\n      if (added.length) {\n        doc.insert(from.line, added);\n      }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n\n      if (nlines > 1) {\n        doc.remove(from.line + 1, nlines - 1);\n      }\n\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  } // Call f for all linked documents.\n\n\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) {\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n\n          if (rel.doc == skip) {\n            continue;\n          }\n\n          var shared = sharedHist && rel.sharedHist;\n\n          if (sharedHistOnly && !shared) {\n            continue;\n          }\n\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n      }\n    }\n\n    propagate(doc, null, true);\n  } // Attach a document to an editor.\n\n\n  function attachDoc(cm, doc) {\n    if (doc.cm) {\n      throw new Error(\"This document is already in use.\");\n    }\n\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n\n    if (!cm.options.lineWrapping) {\n      findMaxLine(cm);\n    }\n\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n    (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = Infinity; // Used to track when changes can be merged into a single undo\n    // event\n\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null; // Used by the isClean() method\n\n    this.generation = this.maxGeneration = startGen || 1;\n  } // Create a history change event from an updateDoc-style change\n  // object.\n\n\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) {\n      return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  } // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n\n\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n\n      if (last.ranges) {\n        array.pop();\n      } else {\n        break;\n      }\n    }\n  } // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n\n\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  } // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n\n\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date(),\n        cur;\n    var last;\n\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n\n      if (!before || !before.ranges) {\n        pushSelectionToHistory(doc.sel, hist.done);\n      }\n\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n\n        if (!hist.done[0].ranges) {\n          hist.done.shift();\n        }\n      }\n    }\n\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) {\n      signal(doc, \"historyAdded\");\n    }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  } // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n\n\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin; // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n\n    if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n      hist.done[hist.done.length - 1] = sel;\n    } else {\n      pushSelectionToHistory(sel, hist.done);\n    }\n\n    hist.lastSelTime = +new Date();\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n\n    if (options && options.clearRedo !== false) {\n      clearSelectionEvents(hist.undone);\n    }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n\n    if (!(top && top.ranges && top.equals(sel))) {\n      dest.push(sel);\n    }\n  } // Used to store marked span information in the history.\n\n\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans) {\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      }\n\n      ++n;\n    });\n  } // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n\n\n  function removeClearedSpans(spans) {\n    if (!spans) {\n      return null;\n    }\n\n    var out;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out) {\n          out = spans.slice(0, i);\n        }\n      } else if (out) {\n        out.push(spans[i]);\n      }\n    }\n\n    return !out ? spans : out.length ? out : null;\n  } // Retrieve and filter the old marked spans stored in a change event.\n\n\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n\n    if (!found) {\n      return null;\n    }\n\n    var nw = [];\n\n    for (var i = 0; i < change.text.length; ++i) {\n      nw.push(removeClearedSpans(found[i]));\n    }\n\n    return nw;\n  } // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n\n\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n\n    if (!old) {\n      return stretched;\n    }\n\n    if (!stretched) {\n      return old;\n    }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n\n          for (var k = 0; k < oldCur.length; ++k) {\n            if (oldCur[k].marker == span.marker) {\n              continue spans;\n            }\n          }\n\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n\n    return old;\n  } // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n\n\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({\n        changes: newChanges\n      });\n\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m = void 0;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n\n        if (newGroup) {\n          for (var prop in change) {\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return copy;\n  } // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n\n\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n\n        if (posBefore != cmp(other, anchor) < 0) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != cmp(head, other) < 0) {\n          head = other;\n        }\n      }\n\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  } // Extend the primary selection range, discard the rest.\n\n\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) {\n      extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    }\n\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  } // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n\n\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n    }\n\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  } // Updates a single range in the selection.\n\n\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  } // Reset the selection to a single range.\n\n\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  } // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n\n\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function update(ranges) {\n        var this$1 = this;\n        this.ranges = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          this$1.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n        }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    }\n\n    if (obj.ranges != sel.ranges) {\n      return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);\n    } else {\n      return sel;\n    }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  } // Set a new selection.\n\n\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n      sel = filterSelectionChange(doc, sel, options);\n    }\n\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm) {\n      ensureCursorVisible(doc.cm);\n    }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) {\n      return;\n    }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n\n    signalLater(doc, \"cursorActivity\", doc);\n  } // Verify that the selection does not partially select any atomic\n  // marked ranges.\n\n\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  } // Return a selection that does not partially select any atomic\n  // ranges.\n\n\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) {\n          out = sel.ranges.slice(0, i);\n        }\n\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n\n    if (line.markedSpans) {\n      for (var i = 0; i < line.markedSpans.length; ++i) {\n        var sp = line.markedSpans[i],\n            m = sp.marker; // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n        // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n        // is with selectLeft/Right\n\n        var preventCursorLeft = \"selectLeft\" in m ? !m.selectLeft : m.inclusiveLeft;\n        var preventCursorRight = \"selectRight\" in m ? !m.selectRight : m.inclusiveRight;\n\n        if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n          if (mayClear) {\n            signal(m, \"beforeCursorEnter\");\n\n            if (m.explicitlyCleared) {\n              if (!line.markedSpans) {\n                break;\n              } else {\n                --i;\n                continue;\n              }\n            }\n          }\n\n          if (!m.atomic) {\n            continue;\n          }\n\n          if (oldPos) {\n            var near = m.find(dir < 0 ? 1 : -1),\n                diff = void 0;\n\n            if (dir < 0 ? preventCursorRight : preventCursorLeft) {\n              near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n            }\n\n            if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n              return skipAtomicInner(doc, near, pos, dir, mayClear);\n            }\n          }\n\n          var far = m.find(dir < 0 ? -1 : 1);\n\n          if (dir < 0 ? preventCursorLeft : preventCursorRight) {\n            far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n          }\n\n          return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n        }\n      }\n    }\n\n    return pos;\n  } // Ensure a given position is not inside an atomic range.\n\n\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0);\n    }\n\n    return found;\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) {\n        return _clipPos(doc, Pos(pos.line - 1));\n      } else {\n        return null;\n      }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) {\n        return Pos(pos.line + 1, 0);\n      } else {\n        return null;\n      }\n    } else {\n      return new Pos(pos.line, pos.ch + dir);\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  } // UPDATING\n  // Allow \"beforeChange\" event handlers to influence a change\n\n\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function cancel() {\n        return obj.canceled = true;\n      }\n    };\n\n    if (update) {\n      obj.update = function (from, to, text, origin) {\n        if (from) {\n          obj.from = _clipPos(doc, from);\n        }\n\n        if (to) {\n          obj.to = _clipPos(doc, to);\n        }\n\n        if (text) {\n          obj.text = text;\n        }\n\n        if (origin !== undefined) {\n          obj.origin = origin;\n        }\n      };\n    }\n\n    signal(doc, \"beforeChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    }\n\n    if (obj.canceled) {\n      if (doc.cm) {\n        doc.cm.curOp.updateInput = 2;\n      }\n\n      return null;\n    }\n\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  } // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n\n\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) {\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      }\n\n      if (doc.cm.state.suppressEdits) {\n        return;\n      }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n\n      if (!change) {\n        return;\n      }\n    } // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n\n\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i) {\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text,\n          origin: change.origin\n        });\n      }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n      return;\n    }\n\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  } // Revert a change stored in a document's history.\n\n\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n\n    if (suppress && !allowSelectionOnly) {\n      return;\n    }\n\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done; // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n\n    var i = 0;\n\n    for (; i < source.length; i++) {\n      event = source[i];\n\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n        break;\n      }\n    }\n\n    if (i == source.length) {\n      return;\n    }\n\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {\n            clearRedo: false\n          });\n          return;\n        }\n\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return;\n      } else {\n        break;\n      }\n    } // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n\n\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function loop(i) {\n      var change = event.changes[i];\n      change.origin = type;\n\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {};\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n\n      if (!i && doc.cm) {\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      }\n\n      var rebased = []; // Propagate to the linked documents\n\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop(i$1);\n      if (returned) return returned.v;\n    }\n  } // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n\n\n  function shiftDoc(doc, distance) {\n    if (distance == 0) {\n      return;\n    }\n\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n        regLineChange(doc.cm, l, \"gutter\");\n      }\n    }\n  } // More lower-level change function, handling only a single document\n  // (not linked ones).\n\n\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n\n    if (change.from.line > doc.lastLine()) {\n      return;\n    } // Clip the change to the size of this doc\n\n\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n\n    var last = doc.lastLine();\n\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) {\n      selAfter = computeSelAfterChange(doc, change);\n    }\n\n    if (doc.cm) {\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    } else {\n      updateDoc(doc, change, spans);\n    }\n\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {\n      doc.cantEdit = false;\n    }\n  } // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n\n\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1) {\n      signalCursorActivity(cm);\n    }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n\n      if (recomputeMaxLength) {\n        cm.curOp.updateMaxLine = true;\n      }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1; // Remember that these lines changed, for updating the display\n\n    if (change.full) {\n      regChange(cm);\n    } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n      regLineChange(cm, from.line, \"text\");\n    } else {\n      regChange(cm, from.line, to.line + 1, lendiff);\n    }\n\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n\n      if (changeHandler) {\n        signalLater(cm, \"change\", cm, obj);\n      }\n\n      if (changesHandler) {\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n      }\n    }\n\n    cm.display.selForContextMenu = null;\n  }\n\n  function _replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) {\n      to = from;\n    }\n\n    if (cmp(to, from) < 0) {\n      assign = [to, from], from = assign[0], to = assign[1];\n    }\n\n    if (typeof code == \"string\") {\n      code = doc.splitLines(code);\n    }\n\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  } // Rebasing/resetting history to deal with externally-sourced changes\n\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  } // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n\n\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n\n        continue;\n      }\n\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  } // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n\n\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n\n    if (typeof handle == \"number\") {\n      line = getLine(doc, clipLine(doc, handle));\n    } else {\n      no = lineNo(handle);\n    }\n\n    if (no == null) {\n      return null;\n    }\n\n    if (op(line, no) && doc.cm) {\n      regLineChange(doc.cm, no, changeType);\n    }\n\n    return line;\n  } // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n\n  function LeafChunk(lines) {\n    var this$1 = this;\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this$1;\n      height += lines[i].height;\n    }\n\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.lines.length;\n    },\n    // Remove the n lines at offset 'at'.\n    removeInner: function removeInner(at, n) {\n      var this$1 = this;\n\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this$1.lines[i];\n        this$1.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n\n      this.lines.splice(at, n);\n    },\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function collapse(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function insertInner(at, lines, height) {\n      var this$1 = this;\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n\n      for (var i = 0; i < lines.length; ++i) {\n        lines[i].parent = this$1;\n      }\n    },\n    // Used to iterate over a part of the tree.\n    iterN: function iterN(at, n, op) {\n      var this$1 = this;\n\n      for (var e = at + n; at < e; ++at) {\n        if (op(this$1.lines[at])) {\n          return true;\n        }\n      }\n    }\n  };\n\n  function BranchChunk(children) {\n    var this$1 = this;\n    this.children = children;\n    var size = 0,\n        height = 0;\n\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this$1;\n    }\n\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.size;\n    },\n    removeInner: function removeInner(at, n) {\n      var this$1 = this;\n      this.size -= n;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this$1.height -= oldHeight - child.height;\n\n          if (sz == rm) {\n            this$1.children.splice(i--, 1);\n            child.parent = null;\n          }\n\n          if ((n -= rm) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      } // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n\n\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function collapse(lines) {\n      var this$1 = this;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        this$1.children[i].collapse(lines);\n      }\n    },\n    insertInner: function insertInner(at, lines, height) {\n      var this$1 = this;\n      this.size += lines.length;\n      this.height += height;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i],\n            sz = child.chunkSize();\n\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this$1.children.splice(++i, 0, leaf);\n              leaf.parent = this$1;\n            }\n\n            child.lines = child.lines.slice(0, remaining);\n            this$1.maybeSpill();\n          }\n\n          break;\n        }\n\n        at -= sz;\n      }\n    },\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function maybeSpill() {\n      if (this.children.length <= 10) {\n        return;\n      }\n\n      var me = this;\n\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n\n        if (!me.parent) {\n          // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n\n      me.parent.maybeSpill();\n    },\n    iterN: function iterN(at, n, op) {\n      var this$1 = this;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this$1.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n\n          if (child.iterN(at, used, op)) {\n            return true;\n          }\n\n          if ((n -= used) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      }\n    }\n  }; // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function LineWidget(doc, node, options) {\n    var this$1 = this;\n\n    if (options) {\n      for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n          this$1[opt] = options[opt];\n        }\n      }\n    }\n\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var this$1 = this;\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n\n    if (no == null || !ws) {\n      return;\n    }\n\n    for (var i = 0; i < ws.length; ++i) {\n      if (ws[i] == this$1) {\n        ws.splice(i--, 1);\n      }\n    }\n\n    if (!ws.length) {\n      line.widgets = null;\n    }\n\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n    var this$1 = this;\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n\n    if (!diff) {\n      return;\n    }\n\n    if (!lineIsHidden(this.doc, line)) {\n      updateLineHeight(line, line.height + diff);\n    }\n\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n      addToScrollTop(cm, diff);\n    }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n\n    if (cm && widget.noHScroll) {\n      cm.display.alignWidgets = true;\n    }\n\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n\n      if (widget.insertAt == null) {\n        widgets.push(widget);\n      } else {\n        widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      }\n\n      widget.line = line;\n\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n\n        if (aboveVisible) {\n          addToScrollTop(cm, widget.height);\n        }\n\n        cm.curOp.forceUpdate = true;\n      }\n\n      return true;\n    });\n\n    if (cm) {\n      signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n    }\n\n    return widget;\n  } // TEXTMARKERS\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n\n\n  var nextMarkerId = 0;\n\n  var TextMarker = function TextMarker(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  }; // Clear the marker.\n\n\n  TextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n\n    if (withOp) {\n      _startOperation(cm);\n    }\n\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n\n      if (found) {\n        signalLater(this, \"clear\", found.from, found.to);\n      }\n    }\n\n    var min = null,\n        max = null;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this$1.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\n\n      if (cm && !this$1.collapsed) {\n        regLineChange(cm, lineNo(line), \"text\");\n      } else if (cm) {\n        if (span.to != null) {\n          max = lineNo(line);\n        }\n\n        if (span.from != null) {\n          min = lineNo(line);\n        }\n      }\n\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n\n      if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm) {\n        updateLineHeight(line, textHeight(cm.display));\n      }\n    }\n\n    if (cm && this.collapsed && !cm.options.lineWrapping) {\n      for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n        var visual = visualLine(this$1.lines[i$1]),\n            len = lineLength(visual);\n\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n\n    if (min != null && cm && this.collapsed) {\n      regChange(cm, min, max + 1);\n    }\n\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n\n      if (cm) {\n        reCheckSelection(cm.doc);\n      }\n    }\n\n    if (cm) {\n      signalLater(cm, \"markerCleared\", cm, this, min, max);\n    }\n\n    if (withOp) {\n      _endOperation(cm);\n    }\n\n    if (this.parent) {\n      this.parent.clear();\n    }\n  }; // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n\n\n  TextMarker.prototype.find = function (side, lineObj) {\n    var this$1 = this;\n\n    if (side == null && this.type == \"bookmark\") {\n      side = 1;\n    }\n\n    var from, to;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this$1.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this$1);\n\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n\n        if (side == -1) {\n          return from;\n        }\n      }\n\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n\n        if (side == 1) {\n          return to;\n        }\n      }\n    }\n\n    return from && {\n      from: from,\n      to: to\n    };\n  }; // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n\n\n  TextMarker.prototype.changed = function () {\n    var this$1 = this;\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n\n    if (!pos || !cm) {\n      return;\n    }\n\n    runInOp(cm, function () {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n\n      cm.curOp.updateMaxLine = true;\n\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n\n        if (dHeight) {\n          updateLineHeight(line, line.height + dHeight);\n        }\n      }\n\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n      }\n    }\n\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  eventMixin(TextMarker); // Create a marker, wire it up to the right lines, and\n\n  function _markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) {\n      return markTextShared(doc, from, to, options, type);\n    } // Ensure we are in an operation.\n\n\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, _markText)(doc, from, to, options, type);\n    }\n\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n\n    if (options) {\n      copyObj(options, marker, false);\n    } // Don't connect empty markers unless clearWhenEmpty is false\n\n\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n      return marker;\n    }\n\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n\n      if (!options.handleMouseEvents) {\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      if (options.insertLeft) {\n        marker.widgetNode.insertLeft = true;\n      }\n    }\n\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      }\n\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory) {\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    }\n\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n        updateMaxLine = true;\n      }\n\n      if (marker.collapsed && curLine != from.line) {\n        updateLineHeight(line, 0);\n      }\n\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n      ++curLine;\n    }); // lineIsHidden depends on the presence of the spans, so needs a second pass\n\n    if (marker.collapsed) {\n      doc.iter(from.line, to.line + 1, function (line) {\n        if (lineIsHidden(doc, line)) {\n          updateLineHeight(line, 0);\n        }\n      });\n    }\n\n    if (marker.clearOnEnter) {\n      on(marker, \"beforeCursorEnter\", function () {\n        return marker.clear();\n      });\n    }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n\n      if (doc.history.done.length || doc.history.undone.length) {\n        doc.clearHistory();\n      }\n    }\n\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) {\n        cm.curOp.updateMaxLine = true;\n      }\n\n      if (marker.collapsed) {\n        regChange(cm, from.line, to.line + 1);\n      } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {\n        for (var i = from.line; i <= to.line; i++) {\n          regLineChange(cm, i, \"text\");\n        }\n      }\n\n      if (marker.atomic) {\n        reCheckSelection(cm.doc);\n      }\n\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n\n    return marker;\n  } // SHARED TEXTMARKERS\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n\n\n  var SharedTextMarker = function SharedTextMarker(markers, primary) {\n    var this$1 = this;\n    this.markers = markers;\n    this.primary = primary;\n\n    for (var i = 0; i < markers.length; ++i) {\n      markers[i].parent = this$1;\n    }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    this.explicitlyCleared = true;\n\n    for (var i = 0; i < this.markers.length; ++i) {\n      this$1.markers[i].clear();\n    }\n\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [_markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) {\n        options.widgetNode = widget.cloneNode(true);\n      }\n\n      markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n\n      for (var i = 0; i < doc.linked.length; ++i) {\n        if (doc.linked[i].isParent) {\n          return;\n        }\n      }\n\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n      return m.parent;\n    });\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n\n      if (cmp(mFrom, mTo)) {\n        var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function loop(i) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) {\n        return linked.push(d);\n      });\n\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) {\n      loop(i);\n    }\n  }\n\n  var nextDocId = 0;\n\n  var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) {\n      return new Doc(text, mode, firstLine, lineSep, direction);\n    }\n\n    if (firstLine == null) {\n      firstLine = 0;\n    }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") {\n      text = this.splitLines(text);\n    }\n\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function iter(from, to, op) {\n      if (op) {\n        this.iterN(from - this.first, to - from, op);\n      } else {\n        this.iterN(this.first, this.first + this.size, from);\n      }\n    },\n    // Non-public interface for adding and removing lines.\n    insert: function insert(at, lines) {\n      var height = 0;\n\n      for (var i = 0; i < lines.length; ++i) {\n        height += lines[i].height;\n      }\n\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function remove(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n    getValue: function getValue(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function (code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n\n      if (this.cm) {\n        scrollToCoords(this.cm, 0, 0);\n      }\n\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function replaceRange(code, from, to, origin) {\n      from = _clipPos(this, from);\n      to = to ? _clipPos(this, to) : from;\n\n      _replaceRange(this, code, from, to, origin);\n    },\n    getRange: function getRange(from, to, lineSep) {\n      var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function getLine(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function getLineHandle(line) {\n      if (isLine(this, line)) {\n        return getLine(this, line);\n      }\n    },\n    getLineNumber: function getLineNumber(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n      if (typeof line == \"number\") {\n        line = getLine(this, line);\n      }\n\n      return visualLine(line);\n    },\n    lineCount: function lineCount() {\n      return this.size;\n    },\n    firstLine: function firstLine() {\n      return this.first;\n    },\n    lastLine: function lastLine() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function clipPos(pos) {\n      return _clipPos(this, pos);\n    },\n    getCursor: function getCursor(start) {\n      var range$$1 = this.sel.primary(),\n          pos;\n\n      if (start == null || start == \"head\") {\n        pos = range$$1.head;\n      } else if (start == \"anchor\") {\n        pos = range$$1.anchor;\n      } else if (start == \"end\" || start == \"to\" || start === false) {\n        pos = range$$1.to();\n      } else {\n        pos = range$$1.from();\n      }\n\n      return pos;\n    },\n    listSelections: function listSelections() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function somethingSelected() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function (line, ch, options) {\n      setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function (anchor, head, options) {\n      setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function (head, other, options) {\n      extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function (heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function (f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function (ranges, primary, options) {\n      var this$1 = this;\n\n      if (!ranges.length) {\n        return;\n      }\n\n      var out = [];\n\n      for (var i = 0; i < ranges.length; i++) {\n        out[i] = new Range(_clipPos(this$1, ranges[i].anchor), _clipPos(this$1, ranges[i].head));\n      }\n\n      if (primary == null) {\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      }\n\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function (anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n    getSelection: function getSelection(lineSep) {\n      var this$1 = this;\n      var ranges = this.sel.ranges,\n          lines;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n\n      if (lineSep === false) {\n        return lines;\n      } else {\n        return lines.join(lineSep || this.lineSeparator());\n      }\n    },\n    getSelections: function getSelections(lineSep) {\n      var this$1 = this;\n      var parts = [],\n          ranges = this.sel.ranges;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n\n        if (lineSep !== false) {\n          sel = sel.join(lineSep || this$1.lineSeparator());\n        }\n\n        parts[i] = sel;\n      }\n\n      return parts;\n    },\n    replaceSelection: function replaceSelection(code, collapse, origin) {\n      var dup = [];\n\n      for (var i = 0; i < this.sel.ranges.length; i++) {\n        dup[i] = code;\n      }\n\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function (code, collapse, origin) {\n      var this$1 = this;\n      var changes = [],\n          sel = this.sel;\n\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range$$1 = sel.ranges[i];\n        changes[i] = {\n          from: range$$1.from(),\n          to: range$$1.to(),\n          text: this$1.splitLines(code[i]),\n          origin: origin\n        };\n      }\n\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n        makeChange(this$1, changes[i$1]);\n      }\n\n      if (newSel) {\n        setSelectionReplaceHistory(this, newSel);\n      } else if (this.cm) {\n        ensureCursorVisible(this.cm);\n      }\n    }),\n    undo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function setExtending(val) {\n      this.extend = val;\n    },\n    getExtending: function getExtending() {\n      return this.extend;\n    },\n    historySize: function historySize() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n\n      for (var i = 0; i < hist.done.length; i++) {\n        if (!hist.done[i].ranges) {\n          ++done;\n        }\n      }\n\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n        if (!hist.undone[i$1].ranges) {\n          ++undone;\n        }\n      }\n\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function clearHistory() {\n      this.history = new History(this.history.maxGeneration);\n    },\n    markClean: function markClean() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function changeGeneration(forceSplit) {\n      if (forceSplit) {\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      }\n\n      return this.history.generation;\n    },\n    isClean: function isClean(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function getHistory() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function setHistory(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    setGutterMarker: docMethodOp(function (line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n\n        if (!value && isEmpty(markers)) {\n          line.gutterMarkers = null;\n        }\n\n        return true;\n      });\n    }),\n    clearGutter: docMethodOp(function (gutterID) {\n      var this$1 = this;\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n\n            if (isEmpty(line.gutterMarkers)) {\n              line.gutterMarkers = null;\n            }\n\n            return true;\n          });\n        }\n      });\n    }),\n    lineInfo: function lineInfo(line) {\n      var n;\n\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) {\n          return null;\n        }\n\n        n = line;\n        line = getLine(this, line);\n\n        if (!line) {\n          return null;\n        }\n      } else {\n        n = lineNo(line);\n\n        if (n == null) {\n          return null;\n        }\n      }\n\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    addLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n\n        if (!line[prop]) {\n          line[prop] = cls;\n        } else if (classTest(cls).test(line[prop])) {\n          return false;\n        } else {\n          line[prop] += \" \" + cls;\n        }\n\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n\n        if (!cur) {\n          return false;\n        } else if (cls == null) {\n          line[prop] = null;\n        } else {\n          var found = cur.match(classTest(cls));\n\n          if (!found) {\n            return false;\n          }\n\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function (handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function removeLineWidget(widget) {\n      widget.clear();\n    },\n    markText: function markText(from, to, options) {\n      return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function setBookmark(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = _clipPos(this, pos);\n      return _markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function findMarksAt(pos) {\n      pos = _clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n\n      if (spans) {\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n            markers.push(span.marker.parent || span.marker);\n          }\n        }\n      }\n\n      return markers;\n    },\n    findMarks: function findMarks(from, to, filter) {\n      from = _clipPos(this, from);\n      to = _clipPos(this, to);\n      var found = [],\n          lineNo$$1 = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n\n        if (spans) {\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n\n            if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to || span.from == null && lineNo$$1 != from.line || span.from != null && lineNo$$1 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n              found.push(span.marker.parent || span.marker);\n            }\n          }\n        }\n\n        ++lineNo$$1;\n      });\n      return found;\n    },\n    getAllMarks: function getAllMarks() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n\n        if (sps) {\n          for (var i = 0; i < sps.length; ++i) {\n            if (sps[i].from != null) {\n              markers.push(sps[i].marker);\n            }\n          }\n        }\n      });\n      return markers;\n    },\n    posFromIndex: function posFromIndex(off) {\n      var ch,\n          lineNo$$1 = this.first,\n          sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n\n        off -= sz;\n        ++lineNo$$1;\n      });\n      return _clipPos(this, Pos(lineNo$$1, ch));\n    },\n    indexFromPos: function indexFromPos(coords) {\n      coords = _clipPos(this, coords);\n      var index = coords.ch;\n\n      if (coords.line < this.first || coords.ch < 0) {\n        return 0;\n      }\n\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) {\n        // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index;\n    },\n    copy: function copy(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n\n      return doc;\n    },\n    linkedDoc: function linkedDoc(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var from = this.first,\n          to = this.first + this.size;\n\n      if (options.from != null && options.from > from) {\n        from = options.from;\n      }\n\n      if (options.to != null && options.to < to) {\n        to = options.to;\n      }\n\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n\n      if (options.sharedHist) {\n        copy.history = this.history;\n      }\n\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function unlinkDoc(other) {\n      var this$1 = this;\n\n      if (other instanceof CodeMirror) {\n        other = other.doc;\n      }\n\n      if (this.linked) {\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this$1.linked[i];\n\n          if (link.doc != other) {\n            continue;\n          }\n\n          this$1.linked.splice(i, 1);\n          other.unlinkDoc(this$1);\n          detachSharedMarkers(findSharedMarkers(this$1));\n          break;\n        }\n      } // If the histories were shared, split them again\n\n\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) {\n          return splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function iterLinkedDocs(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function getMode() {\n      return this.mode;\n    },\n    getEditor: function getEditor() {\n      return this.cm;\n    },\n    splitLines: function splitLines(str) {\n      if (this.lineSep) {\n        return str.split(this.lineSep);\n      }\n\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function lineSeparator() {\n      return this.lineSep || \"\\n\";\n    },\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") {\n        dir = \"ltr\";\n      }\n\n      if (dir == this.direction) {\n        return;\n      }\n\n      this.direction = dir;\n      this.iter(function (line) {\n        return line.order = null;\n      });\n\n      if (this.cm) {\n        directionChanged(this.cm);\n      }\n    })\n  }); // Public alias.\n\n  Doc.prototype.eachLine = Doc.prototype.iter; // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e_preventDefault(e);\n\n    if (ie) {\n      lastDrop = +new Date();\n    }\n\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n\n    if (!pos || cm.isReadOnly()) {\n      return;\n    } // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n\n\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n\n      var loadFile = function loadFile(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          return;\n        }\n\n        var reader = new FileReader();\n        reader.onload = operation(cm, function () {\n          var content = reader.result;\n\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            content = \"\";\n          }\n\n          text[i] = content;\n\n          if (++read == n) {\n            pos = _clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n\n      for (var i = 0; i < n; ++i) {\n        loadFile(files[i], i);\n      }\n    } else {\n      // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e); // Ensure the editor is re-focused\n\n        setTimeout(function () {\n          return cm.display.input.focus();\n        }, 20);\n        return;\n      }\n\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n\n        if (text$1) {\n          var selected;\n\n          if (cm.state.draggingText && !cm.state.draggingText.copy) {\n            selected = cm.listSelections();\n          }\n\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n\n          if (selected) {\n            for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n              _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n            }\n          }\n\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e) {}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\"; // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img); // Force a relayout, or Opera won't use our image for some obscure reason\n\n        img._top = img.offsetTop;\n      }\n\n      e.dataTransfer.setDragImage(img, 0, 0);\n\n      if (presto) {\n        img.parentNode.removeChild(img);\n      }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n\n    if (!pos) {\n      return;\n    }\n\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  } // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) {\n      return;\n    }\n\n    var byClass = document.getElementsByClassName(\"CodeMirror\"),\n        editors = [];\n\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n\n      if (cm) {\n        editors.push(cm);\n      }\n    }\n\n    if (editors.length) {\n      editors[0].operation(function () {\n        for (var i = 0; i < editors.length; i++) {\n          f(editors[i]);\n        }\n      });\n    }\n  }\n\n  var globalsRegistered = false;\n\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) {\n      return;\n    }\n\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) {\n        resizeTimer = setTimeout(function () {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n      }\n    }); // When the window loses focus, we want to show the editor as blurred\n\n    on(window, \"blur\", function () {\n      return forEachCodeMirror(onBlur);\n    });\n  } // Called when the window resizes\n\n\n  function onResize(cm) {\n    var d = cm.display; // Might be a text scaling operation, clear size caches.\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    145: \"ScrollLock\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  }; // Number keys\n\n  for (var i = 0; i < 10; i++) {\n    keyNames[i + 48] = keyNames[i + 96] = String(i);\n  } // Alphabetic keys\n\n\n  for (var i$1 = 65; i$1 <= 90; i$1++) {\n    keyNames[i$1] = String.fromCharCode(i$1);\n  } // Function keys\n\n\n  for (var i$2 = 1; i$2 <= 12; i$2++) {\n    keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n  }\n\n  var keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  }; // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  }; // Very basic readline/emacs-style bindings, which are standard on Mac.\n\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\",\n    \"Alt-B\": \"goWordLeft\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault; // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n\n      if (/^(cmd|meta|m)$/i.test(mod)) {\n        cmd = true;\n      } else if (/^a(lt)?$/i.test(mod)) {\n        alt = true;\n      } else if (/^(c|ctrl|control)$/i.test(mod)) {\n        ctrl = true;\n      } else if (/^s(hift)?$/i.test(mod)) {\n        shift = true;\n      } else {\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n      }\n    }\n\n    if (alt) {\n      name = \"Alt-\" + name;\n    }\n\n    if (ctrl) {\n      name = \"Ctrl-\" + name;\n    }\n\n    if (cmd) {\n      name = \"Cmd-\" + name;\n    }\n\n    if (shift) {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n\n\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n\n    for (var keyname in keymap) {\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n          continue;\n        }\n\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n\n        for (var i = 0; i < keys.length; i++) {\n          var val = void 0,\n              name = void 0;\n\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n\n          var prev = copy[name];\n\n          if (!prev) {\n            copy[name] = val;\n          } else if (prev != val) {\n            throw new Error(\"Inconsistent bindings for \" + name);\n          }\n        }\n\n        delete keymap[keyname];\n      }\n    }\n\n    for (var prop in copy) {\n      keymap[prop] = copy[prop];\n    }\n\n    return keymap;\n  }\n\n  function lookupKey(key, map$$1, handle, context) {\n    map$$1 = getKeyMap(map$$1);\n    var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n\n    if (found === false) {\n      return \"nothing\";\n    }\n\n    if (found === \"...\") {\n      return \"multi\";\n    }\n\n    if (found != null && handle(found)) {\n      return \"handled\";\n    }\n\n    if (map$$1.fallthrough) {\n      if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\") {\n        return lookupKey(key, map$$1.fallthrough, handle, context);\n      }\n\n      for (var i = 0; i < map$$1.fallthrough.length; i++) {\n        var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n\n        if (result) {\n          return result;\n        }\n      }\n    }\n  } // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n\n\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n\n    if (event.altKey && base != \"Alt\") {\n      name = \"Alt-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n      name = \"Ctrl-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n      name = \"Cmd-\" + name;\n    }\n\n    if (!noShift && event.shiftKey && base != \"Shift\") {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // Look up the name of a key as indicated by an event object.\n\n\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) {\n      return false;\n    }\n\n    var name = keyNames[event.keyCode];\n\n    if (name == null || event.altGraphKey) {\n      return false;\n    } // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n\n\n    if (event.keyCode == 3 && event.code) {\n      name = event.code;\n    }\n\n    return addModifierNames(name, event, noShift);\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  } // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n\n\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = []; // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n\n      kill.push(toKill);\n    } // Next, remove those actual ranges.\n\n\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      }\n\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      var order = getOrder(lineObj, cm.doc.direction);\n\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = dir < 0 == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch; // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) {\n            return measureCharPrepared(cm, prep, ch).top == targetTop;\n          }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n\n          if (sticky == \"before\") {\n            ch = moveCharLogically(lineObj, ch, 1);\n          }\n        } else {\n          ch = dir < 0 ? part.to : part.from;\n        }\n\n        return new Pos(lineNo, ch, sticky);\n      }\n    }\n\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n\n    if (!bidi) {\n      return moveLogically(line, start, dir);\n    }\n\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n        part = bidi[partPos];\n\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir);\n    }\n\n    var mv = function mv(pos, dir) {\n      return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n    };\n\n    var prep;\n\n    var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n      if (!cm.options.lineWrapping) {\n        return {\n          begin: 0,\n          end: line.text.length\n        };\n      }\n\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch);\n    };\n\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = part.level == 1 == dir < 0;\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky);\n      }\n    } // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n\n    var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n      var getRes = function getRes(ch, moveInStorageOrder) {\n        return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n      };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = dir > 0 == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n\n        if (part.from <= ch && ch < part.to) {\n          return getRes(ch, moveInStorageOrder);\n        }\n\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n          return getRes(ch, moveInStorageOrder);\n        }\n      }\n    }; // Case 3a: Look for other bidi parts on the same visual line\n\n\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n\n    if (res) {\n      return res;\n    } // Case 3b: Look for other bidi parts on the next visual line\n\n\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n\n      if (res) {\n        return res;\n      }\n    } // Case 4: Nowhere to move\n\n\n    return null;\n  } // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n\n\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function singleSelection(cm) {\n      return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function killLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n\n          if (range.head.ch == len && range.head.line < cm.lastLine()) {\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          } else {\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n          }\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function deleteLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function delLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function delWrappedLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function delWrappedLineRight(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function undo(cm) {\n      return cm.undo();\n    },\n    redo: function redo(cm) {\n      return cm.redo();\n    },\n    undoSelection: function undoSelection(cm) {\n      return cm.undoSelection();\n    },\n    redoSelection: function redoSelection(cm) {\n      return cm.redoSelection();\n    },\n    goDocStart: function goDocStart(cm) {\n      return cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function goDocEnd(cm) {\n      return cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function goLineStart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function goLineStartSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function goLineEnd(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function goLineRight(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function goLineLeft(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function goLineLeftSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n          return lineStartSmart(cm, range.head);\n        }\n\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function goLineUp(cm) {\n      return cm.moveV(-1, \"line\");\n    },\n    goLineDown: function goLineDown(cm) {\n      return cm.moveV(1, \"line\");\n    },\n    goPageUp: function goPageUp(cm) {\n      return cm.moveV(-1, \"page\");\n    },\n    goPageDown: function goPageDown(cm) {\n      return cm.moveV(1, \"page\");\n    },\n    goCharLeft: function goCharLeft(cm) {\n      return cm.moveH(-1, \"char\");\n    },\n    goCharRight: function goCharRight(cm) {\n      return cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function goColumnLeft(cm) {\n      return cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function goColumnRight(cm) {\n      return cm.moveH(1, \"column\");\n    },\n    goWordLeft: function goWordLeft(cm) {\n      return cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function goGroupRight(cm) {\n      return cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function goGroupLeft(cm) {\n      return cm.moveH(-1, \"group\");\n    },\n    goWordRight: function goWordRight(cm) {\n      return cm.moveH(1, \"word\");\n    },\n    delCharBefore: function delCharBefore(cm) {\n      return cm.deleteH(-1, \"char\");\n    },\n    delCharAfter: function delCharAfter(cm) {\n      return cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function delWordBefore(cm) {\n      return cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function delWordAfter(cm) {\n      return cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function delGroupBefore(cm) {\n      return cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function delGroupAfter(cm) {\n      return cm.deleteH(1, \"group\");\n    },\n    indentAuto: function indentAuto(cm) {\n      return cm.indentSelection(\"smart\");\n    },\n    indentMore: function indentMore(cm) {\n      return cm.indentSelection(\"add\");\n    },\n    indentLess: function indentLess(cm) {\n      return cm.indentSelection(\"subtract\");\n    },\n    insertTab: function insertTab(cm) {\n      return cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function insertSoftTab(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function defaultTab(cm) {\n      if (cm.somethingSelected()) {\n        cm.indentSelection(\"add\");\n      } else {\n        cm.execCommand(\"insertTab\");\n      }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function transposeChars(cm) {\n      return runInOp(cm, function () {\n        var ranges = cm.listSelections(),\n            newSel = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          if (!ranges[i].empty()) {\n            continue;\n          }\n\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n\n          if (line) {\n            if (cur.ch == line.length) {\n              cur = new Pos(cur.line, cur.ch - 1);\n            }\n\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n\n              if (prev) {\n                cur = new Pos(cur.line, 1);\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n              }\n            }\n          }\n\n          newSel.push(new Range(cur, cur));\n        }\n\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function newlineAndIndent(cm) {\n      return runInOp(cm, function () {\n        var sels = cm.listSelections();\n\n        for (var i = sels.length - 1; i >= 0; i--) {\n          cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n        }\n\n        sels = cm.listSelections();\n\n        for (var i$1 = 0; i$1 < sels.length; i$1++) {\n          cm.indentLine(sels[i$1].from().line, null, true);\n        }\n\n        ensureCursorVisible(cm);\n      });\n    },\n    openLine: function openLine(cm) {\n      return cm.replaceSelection(\"\\n\", \"start\");\n    },\n    toggleOverwrite: function toggleOverwrite(cm) {\n      return cm.toggleOverwrite();\n    }\n  };\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, visual, lineN, 1);\n  }\n\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, line, lineN, -1);\n  }\n\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n    }\n\n    return start;\n  } // Run a handler that was bound to a key.\n\n\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n\n      if (!bound) {\n        return false;\n      }\n    } // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n\n\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n\n    try {\n      if (cm.isReadOnly()) {\n        cm.state.suppressEdits = true;\n      }\n\n      if (dropShift) {\n        cm.display.shift = false;\n      }\n\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n\n    return done;\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n  } // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n\n  var stopSeq = new Delayed();\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n\n    if (seq) {\n      if (isModifierKey(name)) {\n        return \"handled\";\n      }\n\n      if (/\\'$/.test(name)) {\n        cm.state.keySeq = null;\n      } else {\n        stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        });\n      }\n\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) {\n        return true;\n      }\n    }\n\n    return dispatchKeyInner(cm, name, e, handle);\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\") {\n      cm.state.keySeq = name;\n    }\n\n    if (result == \"handled\") {\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result;\n  } // Handle a key from the keydown event.\n\n\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n\n    if (!name) {\n      return false;\n    }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function (b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n          return doHandleBinding(cm, b);\n        }\n      });\n    } else {\n      return dispatchKey(cm, name, e, function (b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  } // Handle a key from the keypress event\n\n\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n\n  var lastStoppedKey = null;\n\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n\n    if (signalDOMEvent(cm, e)) {\n      return;\n    } // IE does strange things with escape.\n\n\n    if (ie && ie_version < 11 && e.keyCode == 27) {\n      e.returnValue = false;\n    }\n\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n\n    if (presto) {\n      lastStoppedKey = handled ? code : null; // Opera has no cut event... we try to at least catch the key combo\n\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n        cm.replaceSelection(\"\", null, \"cut\");\n      }\n    } // Turn mouse into crosshair when Alt is held on Mac.\n\n\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n      showCrossHair(cm);\n    }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) {\n      this.doc.sel.shift = false;\n    }\n\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n      return;\n    }\n\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n\n    if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n      return;\n    }\n\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode); // Some browsers fire keypress events for backspace\n\n    if (ch == \"\\x08\") {\n      return;\n    }\n\n    if (handleCharBinding(cm, e, ch)) {\n      return;\n    }\n\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function PastClick(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n  };\n\n  var lastClick, lastDoubleClick;\n\n  function clickRepeat(pos, button) {\n    var now = +new Date();\n\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\";\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\";\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\";\n    }\n  } // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n\n\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n      return;\n    }\n\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () {\n          return display.scroller.draggable = true;\n        }, 100);\n      }\n\n      return;\n    }\n\n    if (clickInGutter(cm, e)) {\n      return;\n    }\n\n    var pos = posFromMouse(cm, e),\n        button = e_button(e),\n        repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus(); // #3261: make sure, that we're not starting a second selection\n\n    if (button == 1 && cm.state.selectingText) {\n      cm.state.selectingText(e);\n    }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n      return;\n    }\n\n    if (button == 1) {\n      if (pos) {\n        leftButtonDown(cm, pos, repeat, e);\n      } else if (e_target(e) == display.scroller) {\n        e_preventDefault(e);\n      }\n    } else if (button == 2) {\n      if (pos) {\n        extendSelection(cm.doc, pos);\n      }\n\n      setTimeout(function () {\n        return display.input.focus();\n      }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) {\n        cm.display.input.onContextMenu(e);\n      } else {\n        delayBlurEvent(cm);\n      }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n\n    if (repeat == \"double\") {\n      name = \"Double\" + name;\n    } else if (repeat == \"triple\") {\n      name = \"Triple\" + name;\n    }\n\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n    return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") {\n        bound = commands[bound];\n      }\n\n      if (!bound) {\n        return false;\n      }\n\n      var done = false;\n\n      try {\n        if (cm.isReadOnly()) {\n          cm.state.suppressEdits = true;\n        }\n\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n\n      return done;\n    });\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n\n    if (value.extend == null || cm.doc.extend) {\n      value.extend = cm.doc.extend || event.shiftKey;\n    }\n\n    if (value.addNew == null) {\n      value.addNew = mac ? event.metaKey : event.ctrlKey;\n    }\n\n    if (value.moveOnDrag == null) {\n      value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n    }\n\n    return value;\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) {\n      setTimeout(bind(ensureFocus, cm), 0);\n    } else {\n      cm.curOp.focus = activeElt();\n    }\n\n    var behavior = configureMouse(cm, repeat, event);\n    var sel = cm.doc.sel,\n        contained;\n\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n      leftButtonStartDrag(cm, event, pos, behavior);\n    } else {\n      leftButtonSelect(cm, event, pos, behavior);\n    }\n  } // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n\n\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display,\n        moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) {\n        display.scroller.draggable = false;\n      }\n\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n\n      if (!moved) {\n        e_preventDefault(e);\n\n        if (!behavior.addNew) {\n          extendSelection(cm.doc, pos, null, null, behavior.extend);\n        } // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n\n\n        if (webkit || ie && ie_version == 9) {\n          setTimeout(function () {\n            display.wrapper.ownerDocument.body.focus();\n            display.input.focus();\n          }, 20);\n        } else {\n          display.input.focus();\n        }\n      }\n    });\n\n    var mouseMove = function mouseMove(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n\n    var dragStart = function dragStart() {\n      return moved = true;\n    }; // Let the drag handler handle this.\n\n\n    if (webkit) {\n      display.scroller.draggable = true;\n    }\n\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag; // IE's approach to draggable\n\n    if (display.scroller.dragDrop) {\n      display.scroller.dragDrop();\n    }\n\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n    delayBlurEvent(cm);\n    setTimeout(function () {\n      return display.input.focus();\n    }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") {\n      return new Range(pos, pos);\n    }\n\n    if (unit == \"word\") {\n      return cm.findWordAt(pos);\n    }\n\n    if (unit == \"line\") {\n      return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n    }\n\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to);\n  } // Normal selection, as opposed to text dragging.\n\n\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(event);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n\n      if (ourIndex > -1) {\n        ourRange = ranges[ourIndex];\n      } else {\n        ourRange = new Range(start, start);\n      }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) {\n        ourRange = new Range(start, start);\n      }\n\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range$$1 = rangeForUnit(cm, start, behavior.unit);\n\n      if (behavior.extend) {\n        ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend);\n      } else {\n        ourRange = range$$1;\n      }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) {\n        return;\n      }\n\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n\n          if (left == right) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          } else if (text.length > leftPos) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n          }\n        }\n\n        if (!ranges.length) {\n          ranges.push(new Range(start, start));\n        }\n\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor,\n            head;\n\n        if (cmp(range$$1.anchor, anchor) > 0) {\n          head = range$$1.head;\n          anchor = minPos(oldRange.from(), range$$1.anchor);\n        } else {\n          head = range$$1.anchor;\n          anchor = maxPos(oldRange.to(), range$$1.head);\n        }\n\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(_clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect(); // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n\n      if (!cur) {\n        return;\n      }\n\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n\n        if (cur.line >= visible.to || cur.line < visible.from) {\n          setTimeout(operation(cm, function () {\n            if (counter == curCount) {\n              extend(e);\n            }\n          }), 150);\n        }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n\n        if (outside) {\n          setTimeout(operation(cm, function () {\n            if (counter != curCount) {\n              return;\n            }\n\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n        }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity; // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) {\n        done(e);\n      } else {\n        extend(e);\n      }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  } // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n\n\n  function bidiSimplify(cm, range$$1) {\n    var anchor = range$$1.anchor;\n    var head = range$$1.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {\n      return range$$1;\n    }\n\n    var order = getOrder(anchorLine);\n\n    if (!order) {\n      return range$$1;\n    }\n\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky),\n        part = order[index];\n\n    if (part.from != anchor.ch && part.to != anchor.ch) {\n      return range$$1;\n    }\n\n    var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);\n\n    if (boundary == 0 || boundary == order.length) {\n      return range$$1;\n    } // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n\n\n    var leftSide;\n\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n\n      if (headIndex == boundary - 1 || headIndex == boundary) {\n        leftSide = dir < 0;\n      } else {\n        leftSide = dir > 0;\n      }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to,\n        sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head);\n  } // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n\n\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try {\n        mX = e.clientX;\n        mY = e.clientY;\n      } catch (e) {\n        return false;\n      }\n    }\n\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n      return false;\n    }\n\n    if (prevent) {\n      e_preventDefault(e);\n    }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n      return e_defaultPrevented(e);\n    }\n\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = _lineAtHeight(cm.doc, mY);\n\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true);\n  } // CONTEXT MENU HANDLING\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n\n\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n      return;\n    }\n\n    if (signalDOMEvent(cm, e, \"contextmenu\")) {\n      return;\n    }\n\n    if (!captureRightClick) {\n      cm.display.input.onContextMenu(e);\n    }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) {\n      return false;\n    }\n\n    return gutterEvent(cm, e, \"gutterContextMenu\", false);\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {\n    toString: function toString() {\n      return \"CodeMirror.Init\";\n    }\n  };\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n\n      if (handle) {\n        optionHandlers[name] = notOnInit ? function (cm, val, old) {\n          if (old != Init) {\n            handle(cm, val, old);\n          }\n        } : handle;\n      }\n    }\n\n    CodeMirror.defineOption = option; // Passed to option handlers when there is no old value.\n\n    CodeMirror.Init = Init; // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n\n    option(\"value\", \"\", function (cm, val) {\n      return cm.setValue(val);\n    }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n\n      if (!val) {\n        return;\n      }\n\n      var newBreaks = [],\n          lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n\n          if (found == -1) {\n            break;\n          }\n\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n\n        lineNo++;\n      });\n\n      for (var i = newBreaks.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n      }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n\n      if (old != Init) {\n        cm.refresh();\n      }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) {\n      return cm.getInputField().spellcheck = val;\n    }, true);\n    option(\"autocorrect\", false, function (cm, val) {\n      return cm.getInputField().autocorrect = val;\n    }, true);\n    option(\"autocapitalize\", false, function (cm, val) {\n      return cm.getInputField().autocapitalize = val;\n    }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n\n      if (prev && prev.detach) {\n        prev.detach(cm, next);\n      }\n\n      if (next.attach) {\n        next.attach(cm, prev || null);\n      }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) {\n      return updateScrollbars(cm);\n    }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) {\n      return integer;\n    }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {\n      if (!val) {\n        cm.display.input.reset();\n      }\n    }, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) {\n      return cm.doc.history.undoDepth = val;\n    });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) {\n        cm.display.input.resetPosition();\n      }\n    });\n    option(\"tabindex\", null, function (cm, val) {\n      return cm.display.input.getField().tabIndex = val || \"\";\n    });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) {\n      return cm.doc.setDirection(val);\n    }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () {\n      return updateScrollbars(cm);\n    }, 100);\n  } // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) {\n      return new CodeMirror(place, options);\n    }\n\n    this.options = options = options ? copyObj(options) : {}; // Determine effective options based on given values and defaults.\n\n    copyObj(defaults, options, false);\n    var doc = options.value;\n\n    if (typeof doc == \"string\") {\n      doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n    } else if (options.mode) {\n      doc.modeOption = options.mode;\n    }\n\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n\n    if (options.lineWrapping) {\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    }\n\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      // stores maps added by addKeyMap\n      overlays: [],\n      // highlighting overlays, as added by addOverlay\n      modeGen: 0,\n      // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1,\n      cutIncoming: -1,\n      // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      // stores highlight worker timeout\n      keySeq: null,\n      // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) {\n      display.input.focus();\n    } // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n\n\n    if (ie && ie_version < 11) {\n      setTimeout(function () {\n        return this$1.display.input.reset(true);\n      }, 20);\n    }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    _startOperation(this);\n\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if (options.autofocus && !mobile || this.hasFocus()) {\n      setTimeout(bind(onFocus, this), 20);\n    } else {\n      onBlur(this);\n    }\n\n    for (var opt in optionHandlers) {\n      if (optionHandlers.hasOwnProperty(opt)) {\n        optionHandlers[opt](this$1, options[opt], Init);\n      }\n    }\n\n    maybeUpdateLineNumberWidth(this);\n\n    if (options.finishInit) {\n      options.finishInit(this);\n    }\n\n    for (var i = 0; i < initHooks.length; ++i) {\n      initHooks[i](this$1);\n    }\n\n    _endOperation(this); // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n\n\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n      display.lineDiv.style.textRendering = \"auto\";\n    }\n  } // The default configuration options.\n\n\n  CodeMirror.defaults = defaults; // Functions to run when options are changed.\n\n  CodeMirror.optionHandlers = optionHandlers; // Attach the necessary event handlers when initializing the editor\n\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown)); // Older IE's will not fire a second mousedown for a double click\n\n    if (ie && ie_version < 11) {\n      on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) {\n          return;\n        }\n\n        var pos = posFromMouse(cm, e);\n\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n          return;\n        }\n\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    } else {\n      on(d.scroller, \"dblclick\", function (e) {\n        return signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    } // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n\n\n    on(d.scroller, \"contextmenu\", function (e) {\n      return onContextMenu(cm, e);\n    }); // Used to suppress mouse event handling when a touch happens\n\n    var touchFinished,\n        prevTouch = {\n      end: 0\n    };\n\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () {\n          return d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date();\n      }\n    }\n\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) {\n        return false;\n      }\n\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n\n    function farAway(touch, other) {\n      if (other.left == null) {\n        return true;\n      }\n\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date();\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) {\n        d.activeTouch.moved = true;\n      }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          {\n            range = new Range(pos, pos);\n          } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          {\n            range = cm.findWordAt(pos);\n          } else // Triple tap\n          {\n            range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch); // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    }); // Listen to wheel events in order to try and update the viewport on time.\n\n    on(d.scroller, \"mousewheel\", function (e) {\n      return onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function (e) {\n      return onScrollWheel(cm, e);\n    }); // Prevent wrapper from ever scrolling\n\n    on(d.wrapper, \"scroll\", function () {\n      return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function enter(e) {\n        if (!signalDOMEvent(cm, e)) {\n          e_stop(e);\n        }\n      },\n      over: function over(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function start(e) {\n        return onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function leave(e) {\n        if (!signalDOMEvent(cm, e)) {\n          clearDragCursor(cm);\n        }\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) {\n      return onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) {\n      return onFocus(cm, e);\n    });\n    on(inp, \"blur\", function (e) {\n      return onBlur(cm, e);\n    });\n  }\n\n  var initHooks = [];\n\n  CodeMirror.defineInitHook = function (f) {\n    return initHooks.push(f);\n  }; // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n\n\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n\n    if (how == null) {\n      how = \"add\";\n    }\n\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) {\n        how = \"prev\";\n      } else {\n        state = getContextBefore(cm, n).state;\n      }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) {\n          return;\n        }\n\n        how = \"prev\";\n      }\n    }\n\n    if (how == \"prev\") {\n      if (n > doc.first) {\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      } else {\n        indentation = 0;\n      }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n\n    if (cm.options.indentWithTabs) {\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    }\n\n    if (pos < indentation) {\n      indentString += spaceStr(indentation - pos);\n    }\n\n    if (indentString != curSpaceString) {\n      _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n\n      line.stateAfter = null;\n      return true;\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break;\n        }\n      }\n    }\n  } // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n\n\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n\n    if (!sel) {\n      sel = doc.sel;\n    }\n\n    var recent = +new Date() - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted),\n        multiPaste = null; // When pasting N lines into N selections, insert one line per selection\n\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n\n          for (var i = 0; i < lastCopied.text.length; i++) {\n            multiPaste.push(doc.splitLines(lastCopied.text[i]));\n          }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) {\n          return [l];\n        });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput; // Normal behavior is to insert the new text into every selection\n\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range$$1 = sel.ranges[i$1];\n      var from = range$$1.from(),\n          to = range$$1.to();\n\n      if (range$$1.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          {\n            from = Pos(from.line, from.ch - deleted);\n          } else if (cm.state.overwrite && !paste) // Handle overwrite\n          {\n            to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n          } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n          from = to = Pos(from.line, 0);\n        }\n      }\n\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n\n    if (inserted && !paste) {\n      triggerElectric(cm, inserted);\n    }\n\n    ensureCursorVisible(cm);\n\n    if (cm.curOp.updateInput < 2) {\n      cm.curOp.updateInput = updateInput;\n    }\n\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n\n    if (pasted) {\n      e.preventDefault();\n\n      if (!cm.isReadOnly() && !cm.options.disableInput) {\n        runInOp(cm, function () {\n          return applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      }\n\n      return true;\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) {\n      return;\n    }\n\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range$$1 = sel.ranges[i];\n\n      if (range$$1.head.ch > 100 || i && sel.ranges[i - 1].head.line == range$$1.head.line) {\n        continue;\n      }\n\n      var mode = cm.getModeAt(range$$1.head);\n      var indented = false;\n\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++) {\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range$$1.head.line, \"smart\");\n            break;\n          }\n        }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch))) {\n          indented = indentLine(cm, range$$1.head.line, \"smart\");\n        }\n      }\n\n      if (indented) {\n        signalLater(cm, \"electricInput\", cm, range$$1.head.line);\n      }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\"); // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n\n    if (webkit) {\n      te.style.width = \"1000px\";\n    } else {\n      te.setAttribute(\"wrap\", \"off\");\n    } // If border: 0; -- iOS fails to open keyboard (issue #1287)\n\n\n    if (ios) {\n      te.style.border = \"1px solid black\";\n    }\n\n    disableBrowserMagic(te);\n    return div;\n  } // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n    var helpers = CodeMirror.helpers = {};\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function focus() {\n        window.focus();\n        this.display.input.focus();\n      },\n      setOption: function setOption(option, value) {\n        var options = this.options,\n            old = options[option];\n\n        if (options[option] == value && option != \"mode\") {\n          return;\n        }\n\n        options[option] = value;\n\n        if (optionHandlers.hasOwnProperty(option)) {\n          operation(this, optionHandlers[option])(this, value, old);\n        }\n\n        signal(this, \"optionChange\", this, option);\n      },\n      getOption: function getOption(option) {\n        return this.options[option];\n      },\n      getDoc: function getDoc() {\n        return this.doc;\n      },\n      addKeyMap: function addKeyMap(map$$1, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n      },\n      removeKeyMap: function removeKeyMap(map$$1) {\n        var maps = this.state.keyMaps;\n\n        for (var i = 0; i < maps.length; ++i) {\n          if (maps[i] == map$$1 || maps[i].name == map$$1) {\n            maps.splice(i, 1);\n            return true;\n          }\n        }\n      },\n      addOverlay: methodOp(function (spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n\n        if (mode.startState) {\n          throw new Error(\"Overlays may not be stateful.\");\n        }\n\n        insertSorted(this.state.overlays, {\n          mode: mode,\n          modeSpec: spec,\n          opaque: options && options.opaque,\n          priority: options && options.priority || 0\n        }, function (overlay) {\n          return overlay.priority;\n        });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function (spec) {\n        var this$1 = this;\n        var overlays = this.state.overlays;\n\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this$1.state.modeGen++;\n            regChange(this$1);\n            return;\n          }\n        }\n      }),\n      indentLine: methodOp(function (n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) {\n            dir = this.options.smartIndent ? \"smart\" : \"prev\";\n          } else {\n            dir = dir ? \"add\" : \"subtract\";\n          }\n        }\n\n        if (isLine(this.doc, n)) {\n          indentLine(this, n, dir, aggressive);\n        }\n      }),\n      indentSelection: methodOp(function (how) {\n        var this$1 = this;\n        var ranges = this.doc.sel.ranges,\n            end = -1;\n\n        for (var i = 0; i < ranges.length; i++) {\n          var range$$1 = ranges[i];\n\n          if (!range$$1.empty()) {\n            var from = range$$1.from(),\n                to = range$$1.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n\n            for (var j = start; j < end; ++j) {\n              indentLine(this$1, j, how);\n            }\n\n            var newRanges = this$1.doc.sel.ranges;\n\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n              replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n            }\n          } else if (range$$1.head.line > end) {\n            indentLine(this$1, range$$1.head.line, how, true);\n            end = range$$1.head.line;\n\n            if (i == this$1.doc.sel.primIndex) {\n              ensureCursorVisible(this$1);\n            }\n          }\n        }\n      }),\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function getTokenAt(pos, precise) {\n        return takeToken(this, pos, precise);\n      },\n      getLineTokens: function getLineTokens(line, precise) {\n        return takeToken(this, Pos(line), precise, true);\n      },\n      getTokenTypeAt: function getTokenTypeAt(pos) {\n        pos = _clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0,\n            after = (styles.length - 1) / 2,\n            ch = pos.ch;\n        var type;\n\n        if (ch == 0) {\n          type = styles[2];\n        } else {\n          for (;;) {\n            var mid = before + after >> 1;\n\n            if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n              after = mid;\n            } else if (styles[mid * 2 + 1] < ch) {\n              before = mid + 1;\n            } else {\n              type = styles[mid * 2 + 2];\n              break;\n            }\n          }\n        }\n\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n      },\n      getModeAt: function getModeAt(pos) {\n        var mode = this.doc.mode;\n\n        if (!mode.innerMode) {\n          return mode;\n        }\n\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n      },\n      getHelper: function getHelper(pos, type) {\n        return this.getHelpers(pos, type)[0];\n      },\n      getHelpers: function getHelpers(pos, type) {\n        var this$1 = this;\n        var found = [];\n\n        if (!helpers.hasOwnProperty(type)) {\n          return found;\n        }\n\n        var help = helpers[type],\n            mode = this.getModeAt(pos);\n\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) {\n            found.push(help[mode[type]]);\n          }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n\n            if (val) {\n              found.push(val);\n            }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n\n          if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1) {\n            found.push(cur.val);\n          }\n        }\n\n        return found;\n      },\n      getStateAfter: function getStateAfter(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n        return getContextBefore(this, line + 1, precise).state;\n      },\n      cursorCoords: function cursorCoords(start, mode) {\n        var pos,\n            range$$1 = this.doc.sel.primary();\n\n        if (start == null) {\n          pos = range$$1.head;\n        } else if (typeof start == \"object\") {\n          pos = _clipPos(this.doc, start);\n        } else {\n          pos = start ? range$$1.from() : range$$1.to();\n        }\n\n        return _cursorCoords(this, pos, mode || \"page\");\n      },\n      charCoords: function charCoords(pos, mode) {\n        return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n      },\n      coordsChar: function coordsChar(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return _coordsChar(this, coords.left, coords.top);\n      },\n      lineAtHeight: function lineAtHeight(height, mode) {\n        height = fromCoordSystem(this, {\n          top: height,\n          left: 0\n        }, mode || \"page\").top;\n        return _lineAtHeight(this.doc, height + this.display.viewOffset);\n      },\n      heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n        var end = false,\n            lineObj;\n\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n\n          if (line < this.doc.first) {\n            line = this.doc.first;\n          } else if (line > last) {\n            line = last;\n            end = true;\n          }\n\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n\n        return intoCoordSystem(this, lineObj, {\n          top: 0,\n          left: 0\n        }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n      },\n      defaultTextHeight: function defaultTextHeight() {\n        return textHeight(this.display);\n      },\n      defaultCharWidth: function defaultCharWidth() {\n        return charWidth(this.display);\n      },\n      getViewport: function getViewport() {\n        return {\n          from: this.display.viewFrom,\n          to: this.display.viewTo\n        };\n      },\n      addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = _cursorCoords(this, _clipPos(this.doc, pos));\n        var top = pos.bottom,\n            left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n              hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth); // Default to positioning above (if specified and possible); otherwise default to positioning below\n\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n            top = pos.top - node.offsetHeight;\n          } else if (pos.bottom + node.offsetHeight <= vspace) {\n            top = pos.bottom;\n          }\n\n          if (left + node.offsetWidth > hspace) {\n            left = hspace - node.offsetWidth;\n          }\n        }\n\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") {\n            left = 0;\n          } else if (horiz == \"middle\") {\n            left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n          }\n\n          node.style.left = left + \"px\";\n        }\n\n        if (scroll) {\n          scrollIntoView(this, {\n            left: left,\n            top: top,\n            right: left + node.offsetWidth,\n            bottom: top + node.offsetHeight\n          });\n        }\n      },\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n      execCommand: function execCommand(cmd) {\n        if (commands.hasOwnProperty(cmd)) {\n          return commands[cmd].call(null, this);\n        }\n      },\n      triggerElectric: methodOp(function (text) {\n        triggerElectric(this, text);\n      }),\n      findPosH: function findPosH(from, amount, unit, visually) {\n        var this$1 = this;\n        var dir = 1;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          cur = _findPosH(this$1.doc, cur, dir, unit, visually);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveH: methodOp(function (dir, unit) {\n        var this$1 = this;\n        this.extendSelectionsBy(function (range$$1) {\n          if (this$1.display.shift || this$1.doc.extend || range$$1.empty()) {\n            return _findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually);\n          } else {\n            return dir < 0 ? range$$1.from() : range$$1.to();\n          }\n        }, sel_move);\n      }),\n      deleteH: methodOp(function (dir, unit) {\n        var sel = this.doc.sel,\n            doc = this.doc;\n\n        if (sel.somethingSelected()) {\n          doc.replaceSelection(\"\", null, \"+delete\");\n        } else {\n          deleteNearSelection(this, function (range$$1) {\n            var other = _findPosH(doc, range$$1.head, dir, unit, false);\n\n            return dir < 0 ? {\n              from: other,\n              to: range$$1.head\n            } : {\n              from: range$$1.head,\n              to: other\n            };\n          });\n        }\n      }),\n      findPosV: function findPosV(from, amount, unit, goalColumn) {\n        var this$1 = this;\n        var dir = 1,\n            x = goalColumn;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          var coords = _cursorCoords(this$1, cur, \"div\");\n\n          if (x == null) {\n            x = coords.left;\n          } else {\n            coords.left = x;\n          }\n\n          cur = _findPosV(this$1, coords, dir, unit);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveV: methodOp(function (dir, unit) {\n        var this$1 = this;\n        var doc = this.doc,\n            goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range$$1) {\n          if (collapse) {\n            return dir < 0 ? range$$1.from() : range$$1.to();\n          }\n\n          var headPos = _cursorCoords(this$1, range$$1.head, \"div\");\n\n          if (range$$1.goalColumn != null) {\n            headPos.left = range$$1.goalColumn;\n          }\n\n          goals.push(headPos.left);\n\n          var pos = _findPosV(this$1, headPos, dir, unit);\n\n          if (unit == \"page\" && range$$1 == doc.sel.primary()) {\n            addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n          }\n\n          return pos;\n        }, sel_move);\n\n        if (goals.length) {\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            doc.sel.ranges[i].goalColumn = goals[i];\n          }\n        }\n      }),\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function findWordAt(pos) {\n        var doc = this.doc,\n            line = getLine(doc, pos.line).text;\n        var start = pos.ch,\n            end = pos.ch;\n\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n\n          if ((pos.sticky == \"before\" || end == line.length) && start) {\n            --start;\n          } else {\n            ++end;\n          }\n\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper) ? function (ch) {\n            return isWordChar(ch, helper);\n          } : /\\s/.test(startChar) ? function (ch) {\n            return /\\s/.test(ch);\n          } : function (ch) {\n            return !/\\s/.test(ch) && !isWordChar(ch);\n          };\n\n          while (start > 0 && check(line.charAt(start - 1))) {\n            --start;\n          }\n\n          while (end < line.length && check(line.charAt(end))) {\n            ++end;\n          }\n        }\n\n        return new Range(Pos(pos.line, start), Pos(pos.line, end));\n      },\n      toggleOverwrite: function toggleOverwrite(value) {\n        if (value != null && value == this.state.overwrite) {\n          return;\n        }\n\n        if (this.state.overwrite = !this.state.overwrite) {\n          addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        } else {\n          rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function hasFocus() {\n        return this.display.input.getField() == activeElt();\n      },\n      isReadOnly: function isReadOnly() {\n        return !!(this.options.readOnly || this.doc.cantEdit);\n      },\n      scrollTo: methodOp(function (x, y) {\n        scrollToCoords(this, x, y);\n      }),\n      getScrollInfo: function getScrollInfo() {\n        var scroller = this.display.scroller;\n        return {\n          left: scroller.scrollLeft,\n          top: scroller.scrollTop,\n          height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n          width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n          clientHeight: displayHeight(this),\n          clientWidth: displayWidth(this)\n        };\n      },\n      scrollIntoView: methodOp(function (range$$1, margin) {\n        if (range$$1 == null) {\n          range$$1 = {\n            from: this.doc.sel.primary().head,\n            to: null\n          };\n\n          if (margin == null) {\n            margin = this.options.cursorScrollMargin;\n          }\n        } else if (typeof range$$1 == \"number\") {\n          range$$1 = {\n            from: Pos(range$$1, 0),\n            to: null\n          };\n        } else if (range$$1.from == null) {\n          range$$1 = {\n            from: range$$1,\n            to: null\n          };\n        }\n\n        if (!range$$1.to) {\n          range$$1.to = range$$1.from;\n        }\n\n        range$$1.margin = margin || 0;\n\n        if (range$$1.from.line != null) {\n          scrollToRange(this, range$$1);\n        } else {\n          scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n        }\n      }),\n      setSize: methodOp(function (width, height) {\n        var this$1 = this;\n\n        var interpret = function interpret(val) {\n          return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n        };\n\n        if (width != null) {\n          this.display.wrapper.style.width = interpret(width);\n        }\n\n        if (height != null) {\n          this.display.wrapper.style.height = interpret(height);\n        }\n\n        if (this.options.lineWrapping) {\n          clearLineMeasurementCache(this);\n        }\n\n        var lineNo$$1 = this.display.viewFrom;\n        this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; i++) {\n              if (line.widgets[i].noHScroll) {\n                regLineChange(this$1, lineNo$$1, \"widget\");\n                break;\n              }\n            }\n          }\n\n          ++lineNo$$1;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n      operation: function operation(f) {\n        return runInOp(this, f);\n      },\n      startOperation: function startOperation() {\n        return _startOperation(this);\n      },\n      endOperation: function endOperation() {\n        return _endOperation(this);\n      },\n      refresh: methodOp(function () {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n          estimateLineHeights(this);\n        }\n\n        signal(this, \"refresh\", this);\n      }),\n      swapDoc: methodOp(function (doc) {\n        var old = this.doc;\n        old.cm = null; // Cancel the current text selection if any (#5821)\n\n        if (this.state.selectingText) {\n          this.state.selectingText();\n        }\n\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old;\n      }),\n      phrase: function phrase(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;\n      },\n      getInputField: function getInputField() {\n        return this.display.input.getField();\n      },\n      getWrapperElement: function getWrapperElement() {\n        return this.display.wrapper;\n      },\n      getScrollerElement: function getScrollerElement() {\n        return this.display.scroller;\n      },\n      getGutterElement: function getGutterElement() {\n        return this.display.gutters;\n      }\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function (type, name, value) {\n      if (!helpers.hasOwnProperty(type)) {\n        helpers[type] = CodeMirror[type] = {\n          _global: []\n        };\n      }\n\n      helpers[type][name] = value;\n    };\n\n    CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n\n      helpers[type]._global.push({\n        pred: predicate,\n        val: value\n      });\n    };\n  } // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n\n    function findNextLine() {\n      var l = pos.line + dir;\n\n      if (l < doc.first || l >= doc.first + doc.size) {\n        return false;\n      }\n\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l);\n    }\n\n    function moveOnce(boundToLine) {\n      var next;\n\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir);\n        } else {\n          return false;\n        }\n      } else {\n        pos = next;\n      }\n\n      return true;\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) {\n          break;\n        }\n\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n\n        if (group && !first && !type) {\n          type = \"s\";\n        }\n\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n            pos.sticky = \"after\";\n          }\n\n          break;\n        }\n\n        if (type) {\n          sawType = type;\n        }\n\n        if (dir > 0 && !moveOnce(!first)) {\n          break;\n        }\n      }\n    }\n\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n\n    if (equalCursorPos(oldPos, result)) {\n      result.hitSide = true;\n    }\n\n    return result;\n  } // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n\n    var target;\n\n    for (;;) {\n      target = _coordsChar(cm, x, y);\n\n      if (!target.outside) {\n        break;\n      }\n\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n\n      y += dir * 5;\n    }\n\n    return target;\n  } // CONTENTEDITABLE INPUT STYLE\n\n\n  var ContentEditableInput = function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      } // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n\n\n      if (ie_version <= 11) {\n        setTimeout(operation(cm, function () {\n          return this$1.updateFromDOM();\n        }), 20);\n      }\n    });\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {\n        data: e.data,\n        done: false\n      };\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) {\n        this$1.composing = {\n          data: e.data,\n          done: false\n        };\n      }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) {\n          this$1.readFromDOMSoon();\n        }\n\n        this$1.composing.done = true;\n      }\n    });\n    on(div, \"touchstart\", function () {\n      return input.forceCompositionEnd();\n    });\n    on(div, \"input\", function () {\n      if (!this$1.composing) {\n        this$1.readFromDOMSoon();\n      }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n\n        if (e.type == \"cut\") {\n          cm.replaceSelection(\"\", null, \"cut\");\n        }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\"); // iOS exposes the clipboard API, but seems to discard content inserted into it\n\n        e.clipboardData.setData(\"Text\", content);\n\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return;\n        }\n      } // Old-fashioned briefly-focus-a-textarea hack\n\n\n      var kludge = hiddenTextarea(),\n          te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n\n        if (hadFocus == div) {\n          input.showPrimarySelection();\n        }\n      }, 50);\n    }\n\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result;\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) {\n      return;\n    }\n\n    if (info.focus || takeFocus) {\n      this.showPrimarySelection();\n    }\n\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection();\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(),\n        cm = this.cm,\n        prim = cm.doc.sel.primary();\n    var from = prim.from(),\n        to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n      return;\n    }\n\n    var view = cm.display.view;\n    var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || {\n      node: view[0].measure.map[2],\n      offset: 0\n    };\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {\n        node: map$$1[map$$1.length - 1],\n        offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]\n      };\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0),\n        rng;\n\n    try {\n      rng = range(start.node, start.offset, end.offset, end.node);\n    } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n\n\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n\n      if (old && sel.anchorNode == null) {\n        sel.addRange(old);\n      } else if (gecko) {\n        this.startGracePeriod();\n      }\n    }\n\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n\n      if (this$1.selectionChanged()) {\n        this$1.cm.operation(function () {\n          return this$1.cm.curOp.selectionChanged = true;\n        });\n      }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode;\n    this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode;\n    this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n\n    if (!sel.rangeCount) {\n      return false;\n    }\n\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node);\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor()) {\n        this.showSelection(this.prepareSelection(), true);\n      }\n\n      this.div.focus();\n    }\n  };\n\n  ContentEditableInput.prototype.blur = function () {\n    this.div.blur();\n  };\n\n  ContentEditableInput.prototype.getField = function () {\n    return this.div;\n  };\n\n  ContentEditableInput.prototype.supportsTouch = function () {\n    return true;\n  };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n\n    if (this.selectionInEditor()) {\n      this.pollSelection();\n    } else {\n      runInOp(this.cm, function () {\n        return input.cm.curOp.selectionChanged = true;\n      });\n    }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n      return;\n    }\n\n    var sel = this.getSelection(),\n        cm = this.cm; // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({\n        type: \"keydown\",\n        keyCode: 8,\n        preventDefault: Math.abs\n      });\n      this.blur();\n      this.focus();\n      return;\n    }\n\n    if (this.composing) {\n      return;\n    }\n\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (anchor && head) {\n      runInOp(cm, function () {\n        setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n\n        if (anchor.bad || head.bad) {\n          cm.curOp.selectionChanged = true;\n        }\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm,\n        display = cm.display,\n        sel = cm.doc.sel.primary();\n    var from = sel.from(),\n        to = sel.to();\n\n    if (from.ch == 0 && from.line > cm.firstLine()) {\n      from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n    }\n\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n      to = Pos(to.line + 1, 0);\n    }\n\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n      return false;\n    }\n\n    var fromIndex, fromLine, fromNode;\n\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) {\n      return false;\n    }\n\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) {\n        newText.pop();\n        oldText.pop();\n        toLine--;\n      } else if (newText[0] == oldText[0]) {\n        newText.shift();\n        oldText.shift();\n        fromLine++;\n      } else {\n        break;\n      }\n    }\n\n    var cutFront = 0,\n        cutEnd = 0;\n    var newTop = newText[0],\n        oldTop = oldText[0],\n        maxCutFront = Math.min(newTop.length, oldTop.length);\n\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n      ++cutFront;\n    }\n\n    var newBot = lst(newText),\n        oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n\n    while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      ++cutEnd;\n    } // Try to move start of change to start of selection if ambiguous\n\n\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n\n      return true;\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) {\n      return;\n    }\n\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n    if (this.readDOMTimeout != null) {\n      return;\n    }\n\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n\n      if (this$1.composing) {\n        if (this$1.composing.done) {\n          this$1.composing = null;\n        } else {\n          return;\n        }\n      }\n\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent()) {\n      runInOp(this.cm, function () {\n        return regChange(this$1.cm);\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!this.cm.isReadOnly()) {\n      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n\n    if (!view || view.hidden) {\n      return null;\n    }\n\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line, cm.doc.direction),\n        side = \"left\";\n\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode) {\n      if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function badPos(pos, bad) {\n    if (bad) {\n      pos.bad = true;\n    }\n\n    return pos;\n  }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator(),\n        extraLinebreak = false;\n\n    function recognizeMarker(id) {\n      return function (marker) {\n        return marker.id == id;\n      };\n    }\n\n    function close() {\n      if (closing) {\n        text += lineSep;\n\n        if (extraLinebreak) {\n          text += lineSep;\n        }\n\n        closing = extraLinebreak = false;\n      }\n    }\n\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n\n        if (cmText) {\n          addText(cmText);\n          return;\n        }\n\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range$$1;\n\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n\n          if (found.length && (range$$1 = found[0].find(0))) {\n            addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep));\n          }\n\n          return;\n        }\n\n        if (node.getAttribute(\"contenteditable\") == \"false\") {\n          return;\n        }\n\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {\n          return;\n        }\n\n        if (isBlock) {\n          close();\n        }\n\n        for (var i = 0; i < node.childNodes.length; i++) {\n          walk(node.childNodes[i]);\n        }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) {\n          extraLinebreak = true;\n        }\n\n        if (isBlock) {\n          closing = true;\n        }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n\n    for (;;) {\n      walk(from);\n\n      if (from == to) {\n        break;\n      }\n\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n\n    return text;\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n\n      if (!lineNode) {\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      }\n\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) {\n          return null;\n        }\n\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n          break;\n        }\n      }\n    }\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n\n      if (lineView.node == lineNode) {\n        return locateNodeInLineView(lineView, node, offset);\n      }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n\n    if (!node || !contains(wrapper, node)) {\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    }\n\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n\n      if (offset) {\n        offset = textNode.nodeValue.length;\n      }\n    }\n\n    while (topNode.parentNode != wrapper) {\n      topNode = topNode.parentNode;\n    }\n\n    var measure = lineView.measure,\n        maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map$$1 = i < 0 ? measure.map : maps[i];\n\n        for (var j = 0; j < map$$1.length; j += 3) {\n          var curNode = map$$1[j + 2];\n\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map$$1[j] + offset;\n\n            if (offset < 0 || curNode != textNode) {\n              ch = map$$1[j + (offset ? 1 : 0)];\n            }\n\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n\n    var found = find(textNode, topNode, offset);\n\n    if (found) {\n      return badPos(found, bad);\n    } // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n\n\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      } else {\n        dist += after.textContent.length;\n      }\n    }\n\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch + dist$1), bad);\n      } else {\n        dist$1 += before.textContent.length;\n      }\n    }\n  } // TEXTAREA INPUT STYLE\n\n\n  var TextareaInput = function TextareaInput(cm) {\n    this.cm = cm; // See input.poll and input.reset\n\n    this.prevInput = \"\"; // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n\n    this.pollingFast = false; // Self-resetting timeout for the poller\n\n    this.polling = new Delayed(); // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild); // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n\n    if (ios) {\n      te.style.width = \"0px\";\n    }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) {\n        this$1.hasSelection = null;\n      }\n\n      input.poll();\n    });\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      }\n\n      cm.state.pasteIncoming = +new Date();\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n\n      if (e.type == \"cut\") {\n        cm.state.cutIncoming = +new Date();\n      }\n    }\n\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date();\n        input.focus();\n        return;\n      } // Pass the `paste` event to the textarea so it's handled by its event listener.\n\n\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    }); // Prevent normal selection in the editor (we handle our own)\n\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) {\n        e_preventDefault(e);\n      }\n    });\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n\n      if (input.composing) {\n        input.composing.range.clear();\n      }\n\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        })\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea(); // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm,\n        display = cm.display,\n        doc = cm.doc;\n    var result = prepareSelection(cm); // Move the hidden textarea near the cursor to prevent scrolling artifacts\n\n    if (cm.options.moveInputWithCursor) {\n      var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n\n      var wrapOff = display.wrapper.getBoundingClientRect(),\n          lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result;\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm,\n        display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  }; // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n\n\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) {\n      return;\n    }\n\n    var cm = this.cm;\n\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n\n      if (cm.state.focused) {\n        selectInput(this.textarea);\n      }\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = content;\n      }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = null;\n      }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () {\n    return this.textarea;\n  };\n\n  TextareaInput.prototype.supportsTouch = function () {\n    return false;\n  };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try {\n        this.textarea.focus();\n      } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n\n    }\n  };\n\n  TextareaInput.prototype.blur = function () {\n    this.textarea.blur();\n  };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () {\n    this.slowPoll();\n  }; // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n\n\n  TextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n    if (this.pollingFast) {\n      return;\n    }\n\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n\n      if (this$1.cm.state.focused) {\n        this$1.slowPoll();\n      }\n    });\n  }; // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n\n\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false,\n        input = this;\n    input.pollingFast = true;\n\n    function p() {\n      var changed = input.poll();\n\n      if (!changed && !missed) {\n        missed = true;\n        input.polling.set(60, p);\n      } else {\n        input.pollingFast = false;\n        input.slowPoll();\n      }\n    }\n\n    input.polling.set(20, p);\n  }; // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n\n\n  TextareaInput.prototype.poll = function () {\n    var this$1 = this;\n    var cm = this.cm,\n        input = this.textarea,\n        prevInput = this.prevInput; // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n\n    if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n      return false;\n    }\n\n    var text = input.value; // If nothing changed, bail.\n\n    if (text == prevInput && !cm.somethingSelected()) {\n      return false;\n    } // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n\n\n    if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false;\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n\n      if (first == 0x200b && !prevInput) {\n        prevInput = \"\\u200B\";\n      }\n\n      if (first == 0x21da) {\n        this.reset();\n        return this.cm.execCommand(\"undo\");\n      }\n    } // Find the part of the input that is actually new\n\n\n    var same = 0,\n        l = Math.min(prevInput.length, text.length);\n\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n      ++same;\n    }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null); // Don't leave long text in the textarea, since it makes further polling slow\n\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n        input.value = this$1.prevInput = \"\";\n      } else {\n        this$1.prevInput = text;\n      }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        });\n      }\n    });\n    return true;\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) {\n      this.pollingFast = false;\n    }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) {\n      this.hasSelection = null;\n    }\n\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this,\n        cm = input.cm,\n        display = cm.display,\n        te = input.textarea;\n\n    if (input.contextMenuPending) {\n      input.contextMenuPending();\n    }\n\n    var pos = posFromMouse(cm, e),\n        scrollPos = display.scroller.scrollTop;\n\n    if (!pos || presto) {\n      return;\n    } // Opera is difficult.\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n\n\n    var reset = cm.options.resetSelectionOnContextMenu;\n\n    if (reset && cm.doc.sel.contains(pos) == -1) {\n      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n    }\n\n    var oldCSS = te.style.cssText,\n        oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n\n    if (webkit) {\n      oldScrollY = window.scrollY;\n    } // Work around Chrome issue (#2712)\n\n\n    display.input.focus();\n\n    if (webkit) {\n      window.scrollTo(null, oldScrollY);\n    }\n\n    display.input.reset(); // Adds \"Select all\" to context menu in FF\n\n    if (!cm.somethingSelected()) {\n      te.value = input.prevInput = \" \";\n    }\n\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll); // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200B\" + (selected ? te.value : \"\");\n        te.value = \"\\u21DA\"; // Used to catch context-menu undo\n\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200B\";\n        te.selectionStart = 1;\n        te.selectionEnd = extval.length; // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n\n    function rehide() {\n      if (input.contextMenuPending != rehide) {\n        return;\n      }\n\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n\n      if (ie && ie_version < 9) {\n        display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n      } // Try to detect the user choosing select-all\n\n\n      if (te.selectionStart != null) {\n        if (!ie || ie && ie_version < 9) {\n          prepareSelectAllHack();\n        }\n\n        var i = 0,\n            poll = function poll() {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) {\n      prepareSelectAllHack();\n    }\n\n    if (captureRightClick) {\n      e_stop(e);\n\n      var mouseup = function mouseup() {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) {\n      this.reset();\n    }\n\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n\n    if (!options.tabindex && textarea.tabIndex) {\n      options.tabindex = textarea.tabIndex;\n    }\n\n    if (!options.placeholder && textarea.placeholder) {\n      options.placeholder = textarea.placeholder;\n    } // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n\n\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {\n      textarea.value = cm.getValue();\n    }\n\n    var realSubmit;\n\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save); // Deplorable hack to make the submit method do the right thing.\n\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n\n      cm.getTextArea = function () {\n        return textarea;\n      };\n\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\") {\n            textarea.form.submit = realSubmit;\n          }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) {\n      return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  } // EDITOR CONSTRUCTOR\n\n\n  defineOptions(CodeMirror);\n  addEditorMethods(CodeMirror); // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n\n  for (var prop in Doc.prototype) {\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n      CodeMirror.prototype[prop] = function (method) {\n        return function () {\n          return method.apply(this.doc, arguments);\n        };\n      }(Doc.prototype[prop]);\n    }\n  }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  }; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  CodeMirror.defineMode = function (name\n  /*, mode, …*/\n  ) {\n    if (!CodeMirror.defaults.mode && name != \"null\") {\n      CodeMirror.defaults.mode = name;\n    }\n\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME; // Minimal default mode.\n\n  CodeMirror.defineMode(\"null\", function () {\n    return {\n      token: function token(stream) {\n        return stream.skipToEnd();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\"); // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n  addLegacyProps(CodeMirror);\n  CodeMirror.version = \"5.49.2\";\n  return CodeMirror;\n});"],"sourceRoot":""}